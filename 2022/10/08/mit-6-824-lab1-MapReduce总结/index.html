<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="/js/jquery.goup.min.js" defer></script>
  
  <title>mit-6.824 lab1 MapReduceæ€»ç»“ - å¼ å°å‡¯çš„åšå®¢</title>
  <meta charset="UTF-8">
  <meta name="description" content="è¬™è™šã¯äººã‚’é€²æ­©ã•ã›ã€ã”ã†ã¾ã‚“ã¯äººã‚’è½å¾Œã•ã›ã‚‹ã€‚ç¤¾ä¼šã®åˆå¿ƒè€…ã‹ã‚‰ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png">
  <meta name="description" content="æœ€è¿‘å¼€å§‹é‡æ–°å­¦ä¹  mit-6.824ï¼Œç›®å‰æŠŠLab1åšå®Œäº†ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼›æºä»£ç æ ¹æ® MIT å®éªŒçš„è¦æ±‚ï¼Œæ˜¯ä¸€ä¸ªPrivateçš„ repo æ²¡æœ‰å…¬å¼€ï¼Œéœ€è¦æºä»£ç çš„å¯ä»¥è”ç³»æˆ‘ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·äº¤æµï½">
<meta name="keywords" content="åˆ†å¸ƒå¼,è¯¾ç¨‹">
<meta property="og:type" content="article">
<meta property="og:title" content="mit-6.824 lab1 MapReduceæ€»ç»“">
<meta property="og:url" content="https://jasonkayzk.github.io/2022/10/08/mit-6-824-lab1-MapReduceæ€»ç»“/index.html">
<meta property="og:site_name" content="å¼ å°å‡¯çš„åšå®¢">
<meta property="og:description" content="æœ€è¿‘å¼€å§‹é‡æ–°å­¦ä¹  mit-6.824ï¼Œç›®å‰æŠŠLab1åšå®Œäº†ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼›æºä»£ç æ ¹æ® MIT å®éªŒçš„è¦æ±‚ï¼Œæ˜¯ä¸€ä¸ªPrivateçš„ repo æ²¡æœ‰å…¬å¼€ï¼Œéœ€è¦æºä»£ç çš„å¯ä»¥è”ç³»æˆ‘ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·äº¤æµï½">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/mapreduce_architecture.png">
<meta property="og:updated_time" content="2026-02-10T12:07:45.750Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mit-6.824 lab1 MapReduceæ€»ç»“">
<meta name="twitter:description" content="æœ€è¿‘å¼€å§‹é‡æ–°å­¦ä¹  mit-6.824ï¼Œç›®å‰æŠŠLab1åšå®Œäº†ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼›æºä»£ç æ ¹æ® MIT å®éªŒçš„è¦æ±‚ï¼Œæ˜¯ä¸€ä¸ªPrivateçš„ repo æ²¡æœ‰å…¬å¼€ï¼Œéœ€è¦æºä»£ç çš„å¯ä»¥è”ç³»æˆ‘ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·äº¤æµï½">
<meta name="twitter:image" content="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/mapreduce_architecture.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/atom-one-dark.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1770725316898">

  <!-- è¿›åº¦æ¡åŠ è½½: nprogress -->
  <link href="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6617852905105366" crossorigin="anonymous"></script>
  <!-- Cloudflare Web Analytics -->
   <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{"token": "73d46a730654451bac205cdc12bea918"}"></script>
  <!-- umami Web Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="23fadd4b-d559-4ae0-a4f6-f90680c3d4c0"></script>

  <!-- æœ¬åœ°æœç´¢js -->
  <script type="text/javascript" src="/js/search.js"></script>

  <!-- ç™¾åº¦ç«™ç‚¹ç®¡ç† -->
  <meta name="baidu-site-verification" content="code-SKIvb4A1Qx">

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1NWK4EEKDF');
  </script>

  <!-- ç«™å†…é€šçŸ¥ -->
  <link href="https://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="/css/default.css">
  <link rel="stylesheet" href="/css/animate.min.css">
  <link rel="stylesheet" href="/css/notification.css">
  <link rel="stylesheet" href="/css/index.css">
<link rel="alternate" href="/atom.xml" title="å¼ å°å‡¯çš„åšå®¢" type="application/atom+xml">
</head>

<!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡æ ·å¼ -->
<style>
  #content_progress {
      /* Positioning */
      position: fixed;
      left: 0;
      top: 0;
      z-index: 99999;
      width: 100%;
      height: 3px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border: none;
      background-color: transparent;
      color: #ffaa73;
}

#content_progress::-webkit-progress-bar {
      background-color: transparent;
}

#content_progress::-webkit-progress-value {
      background-color: #ffaa73;
}

#content_progress::-moz-progress-bar {
      background-color:#ffaa73;
}
</style>
<!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡JS -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      var winHeight = window.innerHeight,
            docHeight = document.documentElement.scrollHeight,
            progressBar = document.querySelector('#content_progress');
      progressBar.max = docHeight - winHeight;
      progressBar.value = window.scrollY;

      document.addEventListener('scroll', function () {
            progressBar.max = document.documentElement.scrollHeight - window.innerHeight;
            progressBar.value = window.scrollY;
      });
});
</script>

<body class="mdui-drawer-body-left">
  <!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡ -->
  <progress id="content_progress" value="0"></progress>

  <!-- éŸ³é¢‘æ’­æ”¾ -->
  <!-- <link rel="stylesheet" href="/dist/APlayer.min.css">
  <div id="aplayer"></div>
  <script type="text/javascript" src="/dist/APlayer.min.js"></script>
  <script type="text/javascript" src="/dist/music.js"></script> -->

  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(/images/bg.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <a href="/" title="Jasonkay" class="mdui-btn mdui-btn-icon"><img src="/images/avatar4.jpg"></a>
      </div>
    </div>
  </div>
  <div id="nexmoe-header">
    <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Jasonkay">
            <img src="/images/avatar4.jpg" alt="Jasonkay">
        </a>
    </div>

    <!-- é»‘ç™½åˆ‡æ¢css -->
    <!-- <style>
        .light-dark-checkbox {
            margin: 0 auto;
        }

        /* The switch - the box around the slider */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        /* Hide default HTML checkbox */
        .switch .theme-switcher {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* The slider */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "ğŸŒ";
            height: 0px;
            width: 0px;
            left: -10px;
            top: 16px;
            line-height: 0px;
            transition: 0.4s;
        }

        .theme-switcher:checked+.slider:before {
            left: 35px;
            content: "ğŸŒ‘";
        }

        .theme-switcher:checked+.slider:before {
            transform: translateX(45px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 40px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* æš—é»‘æ ·å¼ */
        body.night {
            background-color: #263238;
            color: #aaa;
        }
        body.night img {
            filter: brightness(30%);
        }
        article.night {
            background-color: black;
            color: white;
        }
    </style> -->

    <!-- é»‘ç™½å¼€å…³ -->
    <!-- <div class="nexmoe-list-item mdui-list-item">
        <div class="light-dark-checkbox">
            <div>
                é»‘ç™½æ¨¡å¼åˆ‡æ¢(Beta)
            </div>
            <label class="switch">
                <input id="light-dark-input" type="checkbox" onclick="switchTheme();" class="theme-switcher">
                <span class="slider round"></span>
            </label>
        </div>
    </div> -->

    <!-- é»‘ç™½åˆ‡æ¢js -->
    <!-- <script>
        // get hours of the day in 24Hr format (0-23)
        var hr = (new Date()).getHours();

        $(document).ready(function () {
            var theme = sessionStorage.getItem("theme");
            if (theme == "dark") {
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
            } else if (theme == "light") {
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
            } else {
                setDefaultTheme(hr);
            }
        });

        function switchTheme() {
            if (sessionStorage.getItem("theme") == "dark") {
                sessionStorage.setItem("theme", "light");
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
            } else if (sessionStorage.getItem("theme") == "light") {
                sessionStorage.setItem("theme", "dark");
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
            } else {
                setDefaultTheme(hr);
            }
        };

        function setDefaultTheme(curHr) {
            // 6:00-18:00 light
            if (curHr >= 6 && curHr <= 18) {
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
                sessionStorage.setItem("theme", "light");
                $("#light-dark-input").attr("checked", false);
            } else {
                // 0:00-6:00 & 18:00-00:00 night
                sessionStorage.setItem("theme", "dark");
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
                $("#light-dark-input").attr("checked", true);
            }
        }
    </script> -->

    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>522</div>
        <div><span>æ ‡ç­¾</span>277</div>
        <div><span>åˆ†ç±»</span>67</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/jp/" title="æ—¥è¯­åˆ†ç«™">
            <i class="mdui-list-item-icon nexmoefont icon-calendar-fill"></i>
            <div class="mdui-list-item-content">
                æ—¥è¯­åˆ†ç«™
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about/" title="å…³äºåšå®¢">
            <i class="mdui-list-item-icon nexmoefont icon-eye-fill"></i>
            <div class="mdui-list-item-content">
                å…³äºåšå®¢
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archive" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/anki/" title="Ankiç¬”è®°">
            <i class="mdui-list-item-icon nexmoefont icon-tag-fill"></i>
            <div class="mdui-list-item-content">
                Ankiç¬”è®°
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/study/" title="å­¦ä¹ è¿›åº¦">
            <i class="mdui-list-item-icon nexmoefont icon-telegram"></i>
            <div class="mdui-list-item-content">
                å­¦ä¹ è¿›åº¦
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/running/" title="è·‘æ­¥å¥èº«">
            <i class="mdui-list-item-icon nexmoefont icon-dribbble"></i>
            <div class="mdui-list-item-content">
                è·‘æ­¥å¥èº«
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/interview/" title="é¢è¯•ç›¸å…³">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                é¢è¯•ç›¸å…³
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/algorithm/" title="ç®—æ³•æ€»ç»“">
            <i class="mdui-list-item-icon nexmoefont icon-areachart"></i>
            <div class="mdui-list-item-content">
                ç®—æ³•æ€»ç»“
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/installing/" title="è½¯ä»¶å®‰è£…">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                è½¯ä»¶å®‰è£…
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/board/" title="åˆ›æ„ç™½æ¿">
            <i class="mdui-list-item-icon nexmoefont icon-tag-fill"></i>
            <div class="mdui-list-item-content">
                åˆ›æ„ç™½æ¿
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="http://159.75.131.252:32352/" title="æ‘„å½±åˆ†äº«">
            <i class="mdui-list-item-icon nexmoefont icon-telegram"></i>
            <div class="mdui-list-item-content">
                æ‘„å½±åˆ†äº«
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/chat/" title="ç•…æ‰€æ¬²è¨€">
            <i class="mdui-list-item-icon nexmoefont icon-ellipsis"></i>
            <div class="mdui-list-item-content">
                ç•…æ‰€æ¬²è¨€
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/realtime/" title="å®æ—¶æ•°æ®ç»Ÿè®¡">
            <i class="mdui-list-item-icon nexmoefont icon-time-circle-fill"></i>
            <div class="mdui-list-item-content">
                å®æ—¶æ•°æ®ç»Ÿè®¡
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/py/" title="å‹æƒ…é“¾æ¥">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                å‹æƒ…é“¾æ¥
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç¤¾äº¤æŒ‰é’®</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/23364338" target="_blank" mdui-tooltip="{content: 'å“”å“©å“”å“©'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/jasonkayzk/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="https://steamcommunity.com/id/jasonkayzk/" target="_blank" mdui-tooltip="{content: 'Steam'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-steam"></i>
        </a><a class="mdui-ripple" href="https://twitter.com/Jasonkay_ZK/" target="_blank" mdui-tooltip="{content: 'Twitter'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-twitter"></i>
        </a><a class="mdui-ripple" href="mailto:jasonkayzk@gmail.com" target="_blank" mdui-tooltip="{content: 'Mail'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-mail-fill"></i>
        </a>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç«™å†…æœç´¢</h3>
    <div class="nexmoe-widget nexmoe-search">
        <form class="site-search-form">
            <input type="text" id="local-search-input" class="st-search-input">
        </form>
        <div id="local-search-result" class="local-search-result-cls">
        </div>
    </div>
</div>

<!-- æ‰§è¡Œæœ¬åœ°æœç´¢è„šæœ¬ -->
<script type="text/javascript">
    var path = "https://cdn.jsdelivr.net/gh/jasonkayzk/JasonkayZK.github.io@master/search.xml";
    searchFunc(path, 'local-search-input', 'local-search-result');
</script>

<style type="text/css">
/* æœç´¢æ¡ */
.site-search-form {
    text-align: center;
}
#local-search-input {
    width: 100%;
}

/* æœç´¢ç»“æœå…³é—­ */
#local-search-close {
    font-size: 22.5px;
    cursor: pointer;
    color: #ff4e6a;
}

.search-result-list > li {
    line-height: 0.75;
    margin-top: -5px;
}

</style>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ ‡ç­¾äº‘</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/2048/" style="font-size: 10px;">2048</a> <a href="/tags/ACM/" style="font-size: 10px;">ACM</a> <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/AUFS/" style="font-size: 10px;">AUFS</a> <a href="/tags/Android/" style="font-size: 10.91px;">Android</a> <a href="/tags/AppStore/" style="font-size: 10px;">AppStore</a> <a href="/tags/AppleScript/" style="font-size: 10px;">AppleScript</a> <a href="/tags/Aria2/" style="font-size: 10.91px;">Aria2</a> <a href="/tags/Async/" style="font-size: 10px;">Async</a> <a href="/tags/BFS/" style="font-size: 10.45px;">BFS</a> <a href="/tags/Bash/" style="font-size: 10.45px;">Bash</a> <a href="/tags/BitTorrent/" style="font-size: 10px;">BitTorrent</a> <a href="/tags/BloomFilter/" style="font-size: 10px;">BloomFilter</a> <a href="/tags/Bytebase/" style="font-size: 10px;">Bytebase</a> <a href="/tags/C/" style="font-size: 15.91px;">C++</a> <a href="/tags/CAP/" style="font-size: 10px;">CAP</a> <a href="/tags/CDN/" style="font-size: 10.45px;">CDN</a> <a href="/tags/CGLibåŠ¨æ€ä»£ç†/" style="font-size: 10px;">CGLibåŠ¨æ€ä»£ç†</a> <a href="/tags/CUDA/" style="font-size: 10px;">CUDA</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Caffeine/" style="font-size: 10px;">Caffeine</a> <a href="/tags/Cargo/" style="font-size: 11.82px;">Cargo</a> <a href="/tags/CentOS/" style="font-size: 12.27px;">CentOS</a> <a href="/tags/Cgroups/" style="font-size: 10px;">Cgroups</a> <a href="/tags/Chromeæ‰©å±•/" style="font-size: 10px;">Chromeæ‰©å±•</a> <a href="/tags/Cli/" style="font-size: 10.45px;">Cli</a> <a href="/tags/ClickHouse/" style="font-size: 10px;">ClickHouse</a> <a href="/tags/Cling/" style="font-size: 10px;">Cling</a> <a href="/tags/Clion/" style="font-size: 10px;">Clion</a> <a href="/tags/Colima/" style="font-size: 10px;">Colima</a> <a href="/tags/Container/" style="font-size: 10px;">Container</a> <a href="/tags/DFS/" style="font-size: 10.45px;">DFS</a> <a href="/tags/DLL/" style="font-size: 10.45px;">DLL</a> <a href="/tags/Debian/" style="font-size: 10px;">Debian</a> <a href="/tags/Docker/" style="font-size: 18.64px;">Docker</a> <a href="/tags/Docker-Compose/" style="font-size: 10.45px;">Docker-Compose</a> <a href="/tags/DockerHub/" style="font-size: 10px;">DockerHub</a> <a href="/tags/Dolt/" style="font-size: 10px;">Dolt</a> <a href="/tags/Dubbo/" style="font-size: 10.91px;">Dubbo</a> <a href="/tags/Easegress/" style="font-size: 10px;">Easegress</a> <a href="/tags/ElasticSearch/" style="font-size: 14.09px;">ElasticSearch</a> <a href="/tags/Electron/" style="font-size: 10.45px;">Electron</a> <a href="/tags/English/" style="font-size: 10px;">English</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/FFmpeg/" style="font-size: 10px;">FFmpeg</a> <a href="/tags/FTP/" style="font-size: 10.45px;">FTP</a> <a href="/tags/FaaS/" style="font-size: 10px;">FaaS</a> <a href="/tags/Future/" style="font-size: 10px;">Future</a> <a href="/tags/GC/" style="font-size: 10px;">GC</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/GRPC/" style="font-size: 10px;">GRPC</a> <a href="/tags/Gin/" style="font-size: 10px;">Gin</a> <a href="/tags/Git/" style="font-size: 13.64px;">Git</a> <a href="/tags/Gitee/" style="font-size: 10px;">Gitee</a> <a href="/tags/Github/" style="font-size: 14.55px;">Github</a> <a href="/tags/Github-Actions/" style="font-size: 10px;">Github-Actions</a> <a href="/tags/Golang/" style="font-size: 18.18px;">Golang</a> <a href="/tags/Gomod/" style="font-size: 10px;">Gomod</a> <a href="/tags/Goroutine/" style="font-size: 10.91px;">Goroutine</a> <a href="/tags/GraalVM/" style="font-size: 10px;">GraalVM</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/HAProxy/" style="font-size: 10px;">HAProxy</a> <a href="/tags/Hadoop/" style="font-size: 10px;">Hadoop</a> <a href="/tags/IDEAé…ç½®/" style="font-size: 10px;">IDEAé…ç½®</a> <a href="/tags/IDç”Ÿæˆå™¨/" style="font-size: 10.45px;">IDç”Ÿæˆå™¨</a> <a href="/tags/IOæ¨¡å‹/" style="font-size: 10px;">IOæ¨¡å‹</a> <a href="/tags/Ingress/" style="font-size: 10.45px;">Ingress</a> <a href="/tags/JDKåŠ¨æ€ä»£ç†/" style="font-size: 10.45px;">JDKåŠ¨æ€ä»£ç†</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 12.27px;">Java</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/JavaåŸºç¡€/" style="font-size: 16.82px;">JavaåŸºç¡€</a> <a href="/tags/Javaæ³¨è§£/" style="font-size: 10px;">Javaæ³¨è§£</a> <a href="/tags/Javaæºç /" style="font-size: 12.27px;">Javaæºç </a> <a href="/tags/Javaé¢è¯•/" style="font-size: 11.36px;">Javaé¢è¯•</a> <a href="/tags/JuiceFS/" style="font-size: 10px;">JuiceFS</a> <a href="/tags/JupyterLab/" style="font-size: 10px;">JupyterLab</a> <a href="/tags/Kafka/" style="font-size: 10.45px;">Kafka</a> <a href="/tags/Kubernetes/" style="font-size: 15.45px;">Kubernetes</a> <a href="/tags/LVS/" style="font-size: 10.91px;">LVS</a> <a href="/tags/Lambdaè¡¨è¾¾å¼/" style="font-size: 10.91px;">Lambdaè¡¨è¾¾å¼</a> <a href="/tags/LevelDB/" style="font-size: 10px;">LevelDB</a> <a href="/tags/Library/" style="font-size: 10.45px;">Library</a> <a href="/tags/Life/" style="font-size: 10px;">Life</a> <a href="/tags/Linux/" style="font-size: 16.36px;">Linux</a> <a href="/tags/LruCache/" style="font-size: 10px;">LruCache</a> <a href="/tags/MacOS/" style="font-size: 10.45px;">MacOS</a> <a href="/tags/Maven/" style="font-size: 12.27px;">Maven</a> <a href="/tags/MongoDB/" style="font-size: 11.82px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 13.64px;">MySQL</a> <a href="/tags/Mybatis/" style="font-size: 10.91px;">Mybatis</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/NIO/" style="font-size: 10.91px;">NIO</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Namespace/" style="font-size: 10px;">Namespace</a> <a href="/tags/Netty/" style="font-size: 10px;">Netty</a> <a href="/tags/Newman/" style="font-size: 10px;">Newman</a> <a href="/tags/Nginx/" style="font-size: 12.27px;">Nginx</a> <a href="/tags/Node-js/" style="font-size: 11.36px;">Node.js</a> <a href="/tags/Okular/" style="font-size: 10px;">Okular</a> <a href="/tags/P2P/" style="font-size: 10px;">P2P</a> <a href="/tags/POML/" style="font-size: 10px;">POML</a> <a href="/tags/Panic/" style="font-size: 10px;">Panic</a> <a href="/tags/PipelineDB/" style="font-size: 10px;">PipelineDB</a> <a href="/tags/PostgreSQL/" style="font-size: 10.45px;">PostgreSQL</a> <a href="/tags/Postman/" style="font-size: 10.45px;">Postman</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10.91px;">Protobuf</a> <a href="/tags/Python/" style="font-size: 11.36px;">Python</a> <a href="/tags/RAII/" style="font-size: 10px;">RAII</a> <a href="/tags/RPC/" style="font-size: 10px;">RPC</a> <a href="/tags/RSS/" style="font-size: 10.91px;">RSS</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redash/" style="font-size: 10px;">Redash</a> <a href="/tags/Redis/" style="font-size: 14.55px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Rust/" style="font-size: 18.64px;">Rust</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/SSE/" style="font-size: 10px;">SSE</a> <a href="/tags/SSH/" style="font-size: 10.45px;">SSH</a> <a href="/tags/Serverless/" style="font-size: 10px;">Serverless</a> <a href="/tags/Shadowsocks/" style="font-size: 10.91px;">Shadowsocks</a> <a href="/tags/Skiplist/" style="font-size: 10px;">Skiplist</a> <a href="/tags/Slice/" style="font-size: 10px;">Slice</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/Spring/" style="font-size: 11.82px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/tags/Springæºç /" style="font-size: 10px;">Springæºç </a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/TOML/" style="font-size: 10px;">TOML</a> <a href="/tags/Telegraf/" style="font-size: 10px;">Telegraf</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/Tomcat/" style="font-size: 10.45px;">Tomcat</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/UUID/" style="font-size: 10px;">UUID</a> <a href="/tags/UnionFS/" style="font-size: 10px;">UnionFS</a> <a href="/tags/VMWare/" style="font-size: 13.18px;">VMWare</a> <a href="/tags/VPN/" style="font-size: 10px;">VPN</a> <a href="/tags/WebAssembly/" style="font-size: 10.45px;">WebAssembly</a> <a href="/tags/Websocket/" style="font-size: 10px;">Websocket</a> <a href="/tags/XML/" style="font-size: 10.91px;">XML</a> <a href="/tags/YAML/" style="font-size: 10px;">YAML</a> <a href="/tags/Zookeeper/" style="font-size: 10.91px;">Zookeeper</a> <a href="/tags/apt/" style="font-size: 10px;">apt</a> <a href="/tags/autok3s/" style="font-size: 10px;">autok3s</a> <a href="/tags/cURL/" style="font-size: 10px;">cURL</a> <a href="/tags/chroot/" style="font-size: 10px;">chroot</a> <a href="/tags/cmder/" style="font-size: 10px;">cmder</a> <a href="/tags/grpc/" style="font-size: 10px;">grpc</a> <a href="/tags/hashå†²çª/" style="font-size: 10px;">hashå†²çª</a> <a href="/tags/inoreader/" style="font-size: 10px;">inoreader</a> <a href="/tags/k3s/" style="font-size: 10.45px;">k3s</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/keepalived/" style="font-size: 10px;">keepalived</a> <a href="/tags/libp2p/" style="font-size: 10px;">libp2p</a> <a href="/tags/minikube/" style="font-size: 10.45px;">minikube</a> <a href="/tags/ntfy/" style="font-size: 10px;">ntfy</a> <a href="/tags/picocli/" style="font-size: 10px;">picocli</a> <a href="/tags/telnet/" style="font-size: 10px;">telnet</a> <a href="/tags/uv/" style="font-size: 10px;">uv</a> <a href="/tags/vcpkg/" style="font-size: 10px;">vcpkg</a> <a href="/tags/xorm/" style="font-size: 10px;">xorm</a> <a href="/tags/äºŒåˆ†æ³•/" style="font-size: 10px;">äºŒåˆ†æ³•</a> <a href="/tags/äºŒå‰æ ‘/" style="font-size: 15.45px;">äºŒå‰æ ‘</a> <a href="/tags/äºŒç»´ç /" style="font-size: 10px;">äºŒç»´ç </a> <a href="/tags/äº¤å‰ç¼–è¯‘/" style="font-size: 10px;">äº¤å‰ç¼–è¯‘</a> <a href="/tags/äººå·¥æ™ºèƒ½/" style="font-size: 10.91px;">äººå·¥æ™ºèƒ½</a> <a href="/tags/äººç”Ÿæ—¥è®°/" style="font-size: 17.73px;">äººç”Ÿæ—¥è®°</a> <a href="/tags/ä»£ç†æ¨¡å¼/" style="font-size: 10px;">ä»£ç†æ¨¡å¼</a> <a href="/tags/ä½è¿ç®—/" style="font-size: 10.45px;">ä½è¿ç®—</a> <a href="/tags/ä¿¡å·/" style="font-size: 10px;">ä¿¡å·</a> <a href="/tags/ä¿¡æ¯èšåˆ/" style="font-size: 10px;">ä¿¡æ¯èšåˆ</a> <a href="/tags/å†…å­˜ç®¡ç†/" style="font-size: 10.45px;">å†…å­˜ç®¡ç†</a> <a href="/tags/å†…ç½‘ç©¿é€/" style="font-size: 10px;">å†…ç½‘ç©¿é€</a> <a href="/tags/å‡½æ•°å¼æ¥å£/" style="font-size: 10px;">å‡½æ•°å¼æ¥å£</a> <a href="/tags/åˆ†å¸ƒå¼/" style="font-size: 15.91px;">åˆ†å¸ƒå¼</a> <a href="/tags/åŠå…¬/" style="font-size: 10px;">åŠå…¬</a> <a href="/tags/åŠ¨æ€è§„åˆ’/" style="font-size: 11.36px;">åŠ¨æ€è§„åˆ’</a> <a href="/tags/åç¨‹æ± /" style="font-size: 10px;">åç¨‹æ± </a> <a href="/tags/åšå®¢ç®¡ç†/" style="font-size: 13.18px;">åšå®¢ç®¡ç†</a> <a href="/tags/åšå®¢ç¾åŒ–/" style="font-size: 11.82px;">åšå®¢ç¾åŒ–</a> <a href="/tags/åŒæŒ‡é’ˆ/" style="font-size: 10.45px;">åŒæŒ‡é’ˆ</a> <a href="/tags/åå°„/" style="font-size: 12.27px;">åå°„</a> <a href="/tags/å£æ‰/" style="font-size: 10px;">å£æ‰</a> <a href="/tags/å“ˆå¸Œè¡¨/" style="font-size: 10.45px;">å“ˆå¸Œè¡¨</a> <a href="/tags/å›æº¯/" style="font-size: 10.45px;">å›æº¯</a> <a href="/tags/å›æº¯æ³•/" style="font-size: 10px;">å›æº¯æ³•</a> <a href="/tags/å †/" style="font-size: 10.45px;">å †</a> <a href="/tags/å¤šçº¿ç¨‹ä¸‹è½½/" style="font-size: 10.45px;">å¤šçº¿ç¨‹ä¸‹è½½</a> <a href="/tags/å¤§æ•°æ®/" style="font-size: 10px;">å¤§æ•°æ®</a> <a href="/tags/å­—ç¬¦ä¸²/" style="font-size: 13.18px;">å­—ç¬¦ä¸²</a> <a href="/tags/å­—ç¬¦ä¸²å¤„ç†/" style="font-size: 10px;">å­—ç¬¦ä¸²å¤„ç†</a> <a href="/tags/å­¦ä¹ æ¡ˆä¾‹/" style="font-size: 10.45px;">å­¦ä¹ æ¡ˆä¾‹</a> <a href="/tags/å®¹å™¨/" style="font-size: 10px;">å®¹å™¨</a> <a href="/tags/å·¥å…·åˆ†äº«/" style="font-size: 19.09px;">å·¥å…·åˆ†äº«</a> <a href="/tags/å¹¶å‘ç¼–ç¨‹/" style="font-size: 15.45px;">å¹¶å‘ç¼–ç¨‹</a> <a href="/tags/å¹¶è¡Œè®¡ç®—/" style="font-size: 10px;">å¹¶è¡Œè®¡ç®—</a> <a href="/tags/åºåˆ—åŒ–/" style="font-size: 10px;">åºåˆ—åŒ–</a> <a href="/tags/å»ºç­‘/" style="font-size: 10px;">å»ºç­‘</a> <a href="/tags/å¼€å‘è§„èŒƒ/" style="font-size: 10.45px;">å¼€å‘è§„èŒƒ</a> <a href="/tags/å¼€æºåè®®/" style="font-size: 10px;">å¼€æºåè®®</a> <a href="/tags/æ€§èƒ½æŒ‡æ ‡/" style="font-size: 10px;">æ€§èƒ½æŒ‡æ ‡</a> <a href="/tags/æŠ€æœ¯æ‚è°ˆ/" style="font-size: 20px;">æŠ€æœ¯æ‚è°ˆ</a> <a href="/tags/æ’åº/" style="font-size: 11.82px;">æ’åº</a> <a href="/tags/æ¨é€/" style="font-size: 10px;">æ¨é€</a> <a href="/tags/æœç´¢/" style="font-size: 10px;">æœç´¢</a> <a href="/tags/æ“ä½œç³»ç»Ÿ/" style="font-size: 10.91px;">æ“ä½œç³»ç»Ÿ</a> <a href="/tags/æ•™å¸ˆ/" style="font-size: 10.45px;">æ•™å¸ˆ</a> <a href="/tags/æ•™æ¡ˆ/" style="font-size: 10.45px;">æ•™æ¡ˆ</a> <a href="/tags/æ•°å­¦/" style="font-size: 12.73px;">æ•°å­¦</a> <a href="/tags/æ•°æ®åº“/" style="font-size: 15px;">æ•°æ®åº“</a> <a href="/tags/æ•°ç»„/" style="font-size: 13.64px;">æ•°ç»„</a> <a href="/tags/æ–‡å­—éšè—/" style="font-size: 10px;">æ–‡å­—éšè—</a> <a href="/tags/æ–­ç‚¹ç»­ä¼ /" style="font-size: 10px;">æ–­ç‚¹ç»­ä¼ </a> <a href="/tags/æ–°æµªå¾®åš/" style="font-size: 10px;">æ–°æµªå¾®åš</a> <a href="/tags/æ—¥å¿—/" style="font-size: 10px;">æ—¥å¿—</a> <a href="/tags/æ—¥æœ¬èª/" style="font-size: 14.55px;">æ—¥æœ¬èª</a> <a href="/tags/æ—¥è¨˜/" style="font-size: 10.45px;">æ—¥è¨˜</a> <a href="/tags/æœåŠ¡è‡ªå»º/" style="font-size: 10.91px;">æœåŠ¡è‡ªå»º</a> <a href="/tags/æŸ¥æ‰¾/" style="font-size: 10.91px;">æŸ¥æ‰¾</a> <a href="/tags/æ ˆ/" style="font-size: 10.91px;">æ ˆ</a> <a href="/tags/æ­Œè©/" style="font-size: 10px;">æ­Œè©</a> <a href="/tags/æ­£åˆ™è¡¨è¾¾å¼/" style="font-size: 10.91px;">æ­£åˆ™è¡¨è¾¾å¼</a> <a href="/tags/æ±‡ç¼–è¯­è¨€/" style="font-size: 10px;">æ±‡ç¼–è¯­è¨€</a> <a href="/tags/æµ‹è¯•/" style="font-size: 10px;">æµ‹è¯•</a> <a href="/tags/æ»‘çª—/" style="font-size: 10px;">æ»‘çª—</a> <a href="/tags/ç‰ˆæœ¬æ§åˆ¶/" style="font-size: 10px;">ç‰ˆæœ¬æ§åˆ¶</a> <a href="/tags/ç”Ÿæ´»æ€»ç»“/" style="font-size: 10px;">ç”Ÿæ´»æ€»ç»“</a> <a href="/tags/ç¦åˆ©åˆ†äº«/" style="font-size: 10px;">ç¦åˆ©åˆ†äº«</a> <a href="/tags/ç®—æ³•/" style="font-size: 12.73px;">ç®—æ³•</a> <a href="/tags/ç®—æ³•é¢˜ç›®/" style="font-size: 19.55px;">ç®—æ³•é¢˜ç›®</a> <a href="/tags/ç±»åŠ è½½å™¨/" style="font-size: 10.45px;">ç±»åŠ è½½å™¨</a> <a href="/tags/ç´ æ•°/" style="font-size: 10px;">ç´ æ•°</a> <a href="/tags/çº¿æ€§æ¢æµ‹æ³•/" style="font-size: 10px;">çº¿æ€§æ¢æµ‹æ³•</a> <a href="/tags/çº¿ç¨‹æ± /" style="font-size: 10.91px;">çº¿ç¨‹æ± </a> <a href="/tags/ç¼–è¯‘ä¼˜åŒ–/" style="font-size: 10px;">ç¼–è¯‘ä¼˜åŒ–</a> <a href="/tags/ç¼–è¯‘å™¨/" style="font-size: 10px;">ç¼–è¯‘å™¨</a> <a href="/tags/ç½‘ç›˜/" style="font-size: 10px;">ç½‘ç›˜</a> <a href="/tags/ç½‘ç»œçº¿è·¯/" style="font-size: 10px;">ç½‘ç»œçº¿è·¯</a> <a href="/tags/ç¿»è¨³/" style="font-size: 10.45px;">ç¿»è¨³</a> <a href="/tags/è‡ªå¯åŠ¨/" style="font-size: 10px;">è‡ªå¯åŠ¨</a> <a href="/tags/è’™ç‰¹å¡ç½—æ–¹æ³•/" style="font-size: 10px;">è’™ç‰¹å¡ç½—æ–¹æ³•</a> <a href="/tags/è™šæ‹Ÿæœº/" style="font-size: 10.45px;">è™šæ‹Ÿæœº</a> <a href="/tags/è¡—æ™¯/" style="font-size: 10px;">è¡—æ™¯</a> <a href="/tags/è£…é¥°å™¨æ¨¡å¼/" style="font-size: 10px;">è£…é¥°å™¨æ¨¡å¼</a> <a href="/tags/è®¡ç®—æœºç½‘ç»œ/" style="font-size: 10px;">è®¡ç®—æœºç½‘ç»œ</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 10px;">è®¾è®¡æ¨¡å¼</a> <a href="/tags/è¯¾ç¨‹/" style="font-size: 10px;">è¯¾ç¨‹</a> <a href="/tags/è´Ÿè½½å‡è¡¡/" style="font-size: 12.27px;">è´Ÿè½½å‡è¡¡</a> <a href="/tags/è´ªå¿ƒ/" style="font-size: 10px;">è´ªå¿ƒ</a> <a href="/tags/è·³è·³è›™æ—¥è¯­è¯»åº“/" style="font-size: 10.45px;">è·³è·³è›™æ—¥è¯­è¯»åº“</a> <a href="/tags/è½¯ä»¶å®‰è£…ä¸é…ç½®/" style="font-size: 17.27px;">è½¯ä»¶å®‰è£…ä¸é…ç½®</a> <a href="/tags/è½¯ä»¶æ¨è/" style="font-size: 15px;">è½¯ä»¶æ¨è</a> <a href="/tags/è½¯ä»¶æµ‹è¯•/" style="font-size: 10.45px;">è½¯ä»¶æµ‹è¯•</a> <a href="/tags/è½¯è€ƒ/" style="font-size: 10px;">è½¯è€ƒ</a> <a href="/tags/è¿›åº¦æ¡/" style="font-size: 10.45px;">è¿›åº¦æ¡</a> <a href="/tags/è¿›ç¨‹é€šä¿¡/" style="font-size: 10px;">è¿›ç¨‹é€šä¿¡</a> <a href="/tags/é€†å‘å·¥ç¨‹/" style="font-size: 10px;">é€†å‘å·¥ç¨‹</a> <a href="/tags/é€’å½’/" style="font-size: 10.45px;">é€’å½’</a> <a href="/tags/é‡å®šå‘/" style="font-size: 10px;">é‡å®šå‘</a> <a href="/tags/é‡è£…ç³»ç»Ÿ/" style="font-size: 10px;">é‡è£…ç³»ç»Ÿ</a> <a href="/tags/é“¾è¡¨/" style="font-size: 13.64px;">é“¾è¡¨</a> <a href="/tags/é˜Ÿåˆ—/" style="font-size: 10px;">é˜Ÿåˆ—</a> <a href="/tags/éšæœºå›¾ç‰‡/" style="font-size: 10px;">éšæœºå›¾ç‰‡</a> <a href="/tags/é›†åˆ/" style="font-size: 14.09px;">é›†åˆ</a> <a href="/tags/é›¶å®½å­—ç¬¦/" style="font-size: 10px;">é›¶å®½å­—ç¬¦</a> <a href="/tags/é™æ€ä»£ç†/" style="font-size: 10px;">é™æ€ä»£ç†</a> <a href="/tags/é¢è¯•æ€»ç»“/" style="font-size: 15px;">é¢è¯•æ€»ç»“</a> <a href="/tags/é¡¹ç›®æ€»ç»“/" style="font-size: 10.91px;">é¡¹ç›®æ€»ç»“</a> <a href="/tags/é¡¹ç›®æ„å»º/" style="font-size: 10.91px;">é¡¹ç›®æ„å»º</a> <a href="/tags/é¡¹ç›®éƒ¨ç½²/" style="font-size: 11.36px;">é¡¹ç›®éƒ¨ç½²</a> <a href="/tags/é»‘è‹¹æœ/" style="font-size: 10px;">é»‘è‹¹æœ</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« åˆ†ç±»</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ACM/">ACM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/">Android</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/C/">C++</a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/CUDA/">CUDA</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Chromeæ‰©å±•/">Chromeæ‰©å±•</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ClickHouse/">ClickHouse</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/">Docker</a>
          <span class="category-list-count">25</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Dolt/">Dolt</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Dubbo/">Dubbo</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Electron/">Electron</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Git/">Git</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Github/">Github</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Golang/">Golang</a>
          <span class="category-list-count">31</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/GraalVM/">GraalVM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/IOåŸºç¡€/">IOåŸºç¡€</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Java/">Java</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Javaæºç /">Javaæºç </a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JuiceFS/">JuiceFS</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a>
          <span class="category-list-count">12</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Life/">Life</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Linux/">Linux</a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Maven/">Maven</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MongoDB/">MongoDB</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MySQL/">MySQL</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/">Mybatis</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/NPM/">NPM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Netty/">Netty</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Nginx/">Nginx</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Node-js/">Node.js</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/PostgreSQL/">PostgreSQL</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Protobuf/">Protobuf</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Python/">Python</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redash/">Redash</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/Redis/">Redis</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Ruby/">Ruby</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Rust/">Rust</a>
          <span class="category-list-count">35</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Spring/">Spring</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TOML/">TOML</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TypeScript/">TypeScript</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Websocket/">Websocket</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/äººç”Ÿæ—¥è®°/">äººç”Ÿæ—¥è®°</a>
          <span class="category-list-count">27</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åˆ†å¸ƒå¼/">åˆ†å¸ƒå¼</a>
          <span class="category-list-count">10</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åŠå…¬/">åŠå…¬</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åšå®¢ç®¡ç†/">åšå®¢ç®¡ç†</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/æŠ€æœ¯æ‚è°ˆ/å­¦ä¹ æ¡ˆä¾‹/">å­¦ä¹ æ¡ˆä¾‹</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/å·¥å…·åˆ†äº«/">å·¥å…·åˆ†äº«</a>
          <span class="category-list-count">41</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/å¹¶å‘ç¼–ç¨‹/">å¹¶å‘ç¼–ç¨‹</a>
          <span class="category-list-count">13</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/æŠ€æœ¯æ‚è°ˆ/">æŠ€æœ¯æ‚è°ˆ</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ•™å¸ˆ/">æ•™å¸ˆ</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ•°æ®åº“/">æ•°æ®åº“</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ—¥æœ¬èª/">æ—¥æœ¬èª</a>
          <span class="category-list-count">11</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æœåŠ¡è‡ªå»º/">æœåŠ¡è‡ªå»º</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ±‡ç¼–è¯­è¨€/">æ±‡ç¼–è¯­è¨€</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ç®—æ³•/">ç®—æ³•</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ç®—æ³•é¢˜ç›®/">ç®—æ³•é¢˜ç›®</a>
          <span class="category-list-count">60</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è¯¾ç¨‹/">è¯¾ç¨‹</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redis/è½¯ä»¶å®‰è£…ä¸é…ç½®/">è½¯ä»¶å®‰è£…ä¸é…ç½®</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è½¯ä»¶æµ‹è¯•/">è½¯ä»¶æµ‹è¯•</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è½¯è€ƒ/">è½¯è€ƒ</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/é¢è¯•æ€»ç»“/">é¢è¯•æ€»ç»“</a>
          <span class="category-list-count">15</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/é¡¹ç›®æ€»ç»“/">é¡¹ç›®æ€»ç»“</a>
          <span class="category-list-count">3</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2026/02/10/å†è§2025ï¼Œä½ å¥½2026ï¼/">å†è§2025ï¼Œä½ å¥½2026ï¼</a>
          </li>
        
          <li>
            <a href="/2025/08/20/ä¸‹ä¸€ä»£æç¤ºè¯å·¥ç¨‹è¯­è¨€POMLç®€æ˜æ•™ç¨‹/">ä¸‹ä¸€ä»£æç¤ºè¯å·¥ç¨‹è¯­è¨€POMLç®€æ˜æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2025/07/30/å¼€äº†ä¸€ä¸ªæ–°çš„ä¸“é—¨å­¦ä¹ æ—¥è¯­çš„åšå®¢/">å¼€äº†ä¸€ä¸ªæ–°çš„ä¸“é—¨å­¦ä¹ æ—¥è¯­çš„åšå®¢</a>
          </li>
        
          <li>
            <a href="/2025/07/29/ä¸€ã€å¹¶è¡Œç¼–ç¨‹å¯¼è®ºä¸CUDAå…¥é—¨/">ä¸€ã€å¹¶è¡Œç¼–ç¨‹å¯¼è®ºä¸CUDAå…¥é—¨</a>
          </li>
        
          <li>
            <a href="/2025/07/24/ä¸€äº›å…è´¹çš„GPUèµ„æº/">ä¸€äº›å…è´¹çš„GPUèµ„æº</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
    <div class="nexmoe-copyright">
        <span style="color:#707070;font-size: 14px;">
            æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ <br>
            æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡ <br>
        </span>
        <span id="showsectime" style="color:#707070;font-size: 14px;">
            æœ¬ç«™å·²è¿è¡Œ0å¤©0å°æ—¶0åˆ†0ç§’
        </span>
        <i class="fa fa-heart throb" style="color:#d43f57">â¤</i><br>

        &copy; 2026 Jasonkay
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>

    <div id="footer-info">

    </div>

    <script type="text/javascript">
        function NewDate(str) {
            str = str.split('-');
            var date = new Date();
            date.setUTCFullYear(str[0], str[1] - 1, str[2]);
            date.setUTCHours(0, 0, 0, 0);
            return date;
        }
        function showsectime() {
            var birthDay = NewDate("2019-09-01");
            var today = new Date();
            var timeold = today.getTime() - birthDay.getTime();
            var sectimeold = timeold / 1000
            var secondsold = Math.floor(sectimeold);
            var msPerDay = 24 * 60 * 60 * 1000; var e_daysold = timeold / msPerDay;
            var daysold = Math.floor(e_daysold);
            var e_hrsold = (daysold - e_daysold) * -24;
            var hrsold = Math.floor(e_hrsold);
            var e_minsold = (hrsold - e_hrsold) * -60;
            var minsold = Math.floor((hrsold - e_hrsold) * -60); var seconds = Math.floor((minsold - e_minsold) * -60).toString();
            document.getElementById("showsectime").innerHTML = "æœ¬ç«™å·²è¿è¡Œ" + daysold + "å¤©" + hrsold + "å°æ—¶" + minsold + "åˆ†" + seconds + "ç§’";
            setTimeout(showsectime, 1000);
        }
        showsectime();
    </script>

</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
      <div class="nexmoe-post">
  <div class="nexmoe-post-cover">
    
    <img src="https://img.paulzzh.com/touhou/random?10">
    
    <h1>mit-6.824 lab1 MapReduceæ€»ç»“</h1>
  </div>
  <div class="nexmoe-post-meta">
    <a><i class="nexmoefont icon-calendar-fill"></i>2022å¹´10æœˆ08æ—¥</a>
    <a><i class="nexmoefont icon-areachart"></i>11.2k å­—</a>
    <a><i class="nexmoefont icon-areachart"></i><span class="archive-article-date">é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>
      </span></a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 55 åˆ†é’Ÿ</a>

    
    <a class="nexmoefont icon-appstore-fill -link" href="/categories/è¯¾ç¨‹/">è¯¾ç¨‹</a>
    
    
    <a class="nexmoefont icon-tag-fill -link" href="/tags/åˆ†å¸ƒå¼/">åˆ†å¸ƒå¼</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/è¯¾ç¨‹/">è¯¾ç¨‹</a>
    
  </div>
  <article>
    
    <div id="toc" class="toc-article">
      <ul class="markdownIt-TOC">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mit-6-824-lab1-MapReduceæ€»ç»“"><span class="toc-text">mit-6.824 lab1 MapReduceæ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduceç®€ä»‹"><span class="toc-text">MapReduceç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MapReduce-ç¼–ç¨‹æ¨¡å‹"><span class="toc-text">MapReduce ç¼–ç¨‹æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹"><span class="toc-text">å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MapReduceè®¡ç®—æ‰§è¡Œè¿‡ç¨‹"><span class="toc-text">MapReduceè®¡ç®—æ‰§è¡Œè¿‡ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MapReduceå®¹é”™æœºåˆ¶"><span class="toc-text">MapReduceå®¹é”™æœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Workerå¤±æ•ˆ"><span class="toc-text">Workerå¤±æ•ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Masterå¤±æ•ˆ"><span class="toc-text">Masterå¤±æ•ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è½åçš„Worker"><span class="toc-text">è½åçš„Worker</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¶ä»–ä¼˜åŒ–"><span class="toc-text">å…¶ä»–ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ•°æ®æœ¬åœ°æ€§"><span class="toc-text">æ•°æ®æœ¬åœ°æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Combiner"><span class="toc-text">Combiner</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¯å¢ƒå‡†å¤‡"><span class="toc-text">ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®éªŒå†…å®¹åˆ†æ"><span class="toc-text">å®éªŒå†…å®¹åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä»£ç å®ç°"><span class="toc-text">ä»£ç å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RPCé€šä¿¡"><span class="toc-text">RPCé€šä¿¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Masterè°ƒåº¦"><span class="toc-text">Masterè°ƒåº¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Masterç»“æ„ä½“"><span class="toc-text">Masterç»“æ„ä½“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Masteråˆå§‹åŒ–åŠå¯åŠ¨"><span class="toc-text">Masteråˆå§‹åŒ–åŠå¯åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Taskçš„è·å–ä¸åˆ†é…"><span class="toc-text">Taskçš„è·å–ä¸åˆ†é…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¤„ç†å‰ä¸€ä¸ªæäº¤çš„Task"><span class="toc-text">å¤„ç†å‰ä¸€ä¸ªæäº¤çš„Task</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¤„ç†Mapå’ŒReduceç±»å‹ä»»åŠ¡çš„Handler"><span class="toc-text">å¤„ç†Mapå’ŒReduceç±»å‹ä»»åŠ¡çš„Handler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Jobä»»åŠ¡çŠ¶æ€åˆ‡æ¢transit"><span class="toc-text">Jobä»»åŠ¡çŠ¶æ€åˆ‡æ¢transit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WorkerçŠ¶æ€è½®è¯¢"><span class="toc-text">WorkerçŠ¶æ€è½®è¯¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œç»“æŸé€€å‡ºDone"><span class="toc-text">å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œç»“æŸé€€å‡ºDone</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Workerè®¡ç®—"><span class="toc-text">Workerè®¡ç®—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆå§‹åŒ–Worker"><span class="toc-text">åˆå§‹åŒ–Worker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¤„ç†Mapä»»åŠ¡"><span class="toc-text">å¤„ç†Mapä»»åŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¤„ç†Reduceä»»åŠ¡"><span class="toc-text">å¤„ç†Reduceä»»åŠ¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æµ‹è¯•éªŒè¯"><span class="toc-text">æµ‹è¯•éªŒè¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åè®°"><span class="toc-text">åè®°</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é™„å½•"><span class="toc-text">é™„å½•</span></a></li></ol>
      </ul>
    </div>
    
    <p>æœ€è¿‘å¼€å§‹é‡æ–°å­¦ä¹  mit-6.824ï¼Œç›®å‰æŠŠLab1åšå®Œäº†ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼›</p>
<p>æºä»£ç æ ¹æ® MIT å®éªŒçš„è¦æ±‚ï¼Œæ˜¯ä¸€ä¸ªPrivateçš„ repo æ²¡æœ‰å…¬å¼€ï¼Œéœ€è¦æºä»£ç çš„å¯ä»¥è”ç³»æˆ‘ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·äº¤æµï½</p>
<p>è§†é¢‘å­¦ä¹ åœ°å€ï¼š</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV1R7411t71W/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1R7411t71W/</a></li>
</ul>
<br>

<a id="more"></a>

<h1 id="mit-6-824-lab1-MapReduceæ€»ç»“"><a href="#mit-6-824-lab1-MapReduceæ€»ç»“" class="headerlink" title="mit-6.824 lab1 MapReduceæ€»ç»“"></a><strong>mit-6.824 lab1 MapReduceæ€»ç»“</strong></h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a><strong>å‰è¨€</strong></h2><p>ç›®å‰æˆ‘å­¦ä¹ çš„æ˜¯ 2020 MIT 6.824 åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå½“ç„¶ç°åœ¨æœ‰äº†æ›´æ–°çš„ 2021ã€2022 çš„ç‰ˆæœ¬ï¼Œä¸è¿‡å¤§è‡´æ€æƒ³åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼›</p>
<p>å®Œæ•´çš„ Lab è¯´æ˜åœ¨è¿™é‡Œï¼š</p>
<ul>
<li><a href="http://nil.csail.mit.edu/6.824/2020/labs/lab-mr.html" target="_blank" rel="noopener">http://nil.csail.mit.edu/6.824/2020/labs/lab-mr.html</a></li>
</ul>
<p>åœ¨åšå®éªŒä¹‹å‰ï¼Œå»ºè®®å…ˆçœ‹å®Œ Google çš„è¿™ä¸¤ç¯‡è®ºæ–‡ï¼š</p>
<ul>
<li><a href="https://static.googleusercontent.com/media/research.google.com/zh-CN//archive/gfs-sosp2003.pdf" target="_blank" rel="noopener">https://static.googleusercontent.com/media/research.google.com/zh-CN//archive/gfs-sosp2003.pdf</a></li>
<li><a href="https://pdos.csail.mit.edu/6.824/papers/mapreduce.pdf" target="_blank" rel="noopener">https://pdos.csail.mit.edu/6.824/papers/mapreduce.pdf</a></li>
</ul>
<p>å¹¶çœ‹å®Œ Lecture 1ã€2:</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV1R7411t71W/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1R7411t71W/</a></li>
</ul>
<p>å¯¹ MapReduce æœ‰ä¸€å®šçš„äº†è§£ï¼Œå¹¶ä¸”å¯¹ Go æœ‰ä¸€å®šçš„äº†è§£å†ä¸‹æ‰‹å»åšï¼›</p>
<br>

<h2 id="MapReduceç®€ä»‹"><a href="#MapReduceç®€ä»‹" class="headerlink" title="MapReduceç®€ä»‹"></a><strong>MapReduceç®€ä»‹</strong></h2><h3 id="MapReduce-ç¼–ç¨‹æ¨¡å‹"><a href="#MapReduce-ç¼–ç¨‹æ¨¡å‹" class="headerlink" title="MapReduce ç¼–ç¨‹æ¨¡å‹"></a><strong>MapReduce ç¼–ç¨‹æ¨¡å‹</strong></h3><p>æ€»çš„æ¥è®²ï¼ŒGoogle MapReduce æ‰€æ‰§è¡Œçš„åˆ†å¸ƒå¼è®¡ç®—ä¼šä»¥ä¸€ç»„é”®å€¼å¯¹ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºå¦ä¸€ç»„é”®å€¼å¯¹ï¼Œç”¨æˆ·åˆ™é€šè¿‡ç¼–å†™ Map å‡½æ•°å’Œ Reduce å‡½æ•°æ¥æŒ‡å®šæ‰€è¦è¿›è¡Œçš„è®¡ç®—ã€‚</p>
<p>ç”±ç”¨æˆ·ç¼–å†™çš„Map å‡½æ•°å°†è¢«åº”ç”¨åœ¨æ¯ä¸€ä¸ªè¾“å…¥é”®å€¼å¯¹ä¸Šï¼Œå¹¶è¾“å‡ºè‹¥å¹²é”®å€¼å¯¹ä½œä¸ºä¸­é—´ç»“æœã€‚ä¹‹åï¼ŒMapReduce æ¡†æ¶åˆ™ä¼šå°†ä¸åŒä¸€ä¸ªé”® II ç›¸å…³è”çš„å€¼éƒ½ä¼ é€’åˆ°åŒä¸€æ¬¡ Reduce å‡½æ•°è°ƒç”¨ä¸­ã€‚</p>
<p>åŒæ ·ç”±ç”¨æˆ·ç¼–å†™çš„ Reduce å‡½æ•°ä»¥é”® II ä»¥åŠä¸è¯¥é”®ç›¸å…³è”çš„å€¼çš„é›†åˆä½œä¸ºå‚æ•°ï¼Œå¯¹ä¼ å…¥çš„å€¼è¿›è¡Œåˆå¹¶å¹¶è¾“å‡ºåˆå¹¶åçš„å€¼çš„é›†åˆã€‚</p>
<p>å½¢å¼åŒ–åœ°è¯´ï¼Œç”±ç”¨æˆ·æä¾›çš„ Map å‡½æ•°å’Œ Reduce å‡½æ•°åº”æœ‰å¦‚ä¸‹ç±»å‹ï¼š</p>
<pre><code>map(k1,v1) â†’ list(k2,v2) 

reduce(k2,list(v2)) â†’ list(v2)</code></pre><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…çš„å®ç°ä¸­ MapReduce æ¡†æ¶ä½¿ç”¨ <code>Iterator</code> æ¥ä»£è¡¨ä½œä¸ºè¾“å…¥çš„é›†åˆï¼Œä¸»è¦æ˜¯ä¸ºäº†é¿å…é›†åˆè¿‡å¤§ï¼Œæ— æ³•è¢«å®Œæ•´åœ°æ”¾å…¥åˆ°å†…å­˜ä¸­ï¼›</p>
<p>ä½œä¸ºæ¡ˆä¾‹ï¼Œæˆ‘ä»¬è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šç»™å®šå¤§é‡çš„æ–‡æ¡£ï¼Œè®¡ç®—å…¶ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ï¼ˆWord Countï¼‰ï¼›</p>
<p>ç”¨æˆ·é€šå¸¸éœ€è¦æä¾›å½¢å¦‚å¦‚ä¸‹ä¼ªä»£ç çš„ä»£ç æ¥å®Œæˆè®¡ç®—ï¼š</p>
<pre><code class="python">map(String key, String value):
  // key: document name
  // value: document contents
  for each word w in value:
    EmitIntermediate(w, â€œ1â€);


reduce(String key, Iterator values):
  // key: a word
  // values: a list of counts
  int result = 0;
  for each v in values:
    result += ParseInt(v);
  Emit(AsString(result));</code></pre>
<br>

<h3 id="å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹"></a><strong>å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹</strong></h3><p>äº†è§£å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼çš„è¯»è€…ä¸éš¾å‘ç°ï¼šMapReduce æ‰€é‡‡ç”¨çš„ç¼–ç¨‹æ¨¡å‹æºè‡ªäºå‡½æ•°å¼ç¼–ç¨‹é‡Œçš„ Map å‡½æ•°å’Œ Reduce å‡½æ•°ã€‚åèµ·ä¹‹ç§€ Spark åŒæ ·é‡‡ç”¨äº†ç±»ä¼¼çš„ç¼–ç¨‹æ¨¡å‹ï¼›</p>
<p>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹æ¨¡å‹çš„å¥½å¤„åœ¨äºè¿™ç§ç¼–ç¨‹æ¨¡å‹æœ¬èº«å°±å¯¹å¹¶è¡Œæ‰§è¡Œæœ‰è‰¯å¥½çš„æ”¯æŒï¼Œè¿™ä½¿å¾—åº•å±‚ç³»ç»Ÿèƒ½å¤Ÿè½»æ˜“åœ°å°†å¤§æ•°æ®é‡çš„è®¡ç®—å¹¶è¡ŒåŒ–ï¼ŒåŒæ—¶ç”±ç”¨æˆ·å‡½æ•°æ‰€æä¾›çš„ç¡®å®šæ€§ä¹Ÿä½¿å¾—åº•å±‚ç³»ç»Ÿèƒ½å¤Ÿå°†å‡½æ•°é‡æ–°æ‰§è¡Œä½œä¸ºæä¾›å®¹é”™æ€§çš„ä¸»è¦æ‰‹æ®µï¼›</p>
<h3 id="MapReduceè®¡ç®—æ‰§è¡Œè¿‡ç¨‹"><a href="#MapReduceè®¡ç®—æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="MapReduceè®¡ç®—æ‰§è¡Œè¿‡ç¨‹"></a><strong>MapReduceè®¡ç®—æ‰§è¡Œè¿‡ç¨‹</strong></h3><p>æ¯ä¸€è½® MapReduce çš„å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/mapreduce_architecture.png" alt="mapreduce_architecture.png"></p>
<p>é¦–å…ˆï¼Œç”¨æˆ·é€šè¿‡ MapReduce å®¢æˆ·ç«¯æŒ‡å®š Map å‡½æ•°å’Œ Reduce å‡½æ•°ï¼Œä»¥åŠæ­¤æ¬¡ MapReduce è®¡ç®—çš„é…ç½®ï¼ŒåŒ…æ‹¬ä¸­é—´ç»“æœé”®å€¼å¯¹çš„ Partition æ•°é‡ RR ä»¥åŠç”¨äºåˆ‡åˆ†ä¸­é—´ç»“æœçš„å“ˆå¸Œå‡½æ•° hashï¼›</p>
<p>ç”¨æˆ·å¼€å§‹ MapReduce è®¡ç®—åï¼Œæ•´ä¸ª MapReduce è®¡ç®—çš„æµç¨‹å¯æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä½œä¸ºè¾“å…¥çš„æ–‡ä»¶ä¼šè¢«åˆ†ä¸º M ä¸ª Splitï¼Œæ¯ä¸ª Split çš„å¤§å°é€šå¸¸åœ¨ 16~64 MB ä¹‹é—´ï¼›</li>
<li>å¦‚æ­¤ï¼Œæ•´ä¸ª MapReduce è®¡ç®—åŒ…å« M ä¸ªMap ä»»åŠ¡å’Œ R ä¸ª Reduce ä»»åŠ¡ã€‚Master ç»“ç‚¹ä¼šä»ç©ºé—²çš„ Worker ç»“ç‚¹ä¸­è¿›è¡Œé€‰å–å¹¶ä¸ºå…¶åˆ†é… Map ä»»åŠ¡å’Œ Reduce ä»»åŠ¡ï¼›</li>
<li>æ”¶åˆ° Map ä»»åŠ¡çš„ Worker ä»¬ï¼ˆåˆç§° Mapperï¼‰å¼€å§‹è¯»å…¥è‡ªå·±å¯¹åº”çš„ Splitï¼Œå°†è¯»å…¥çš„å†…å®¹è§£æä¸ºè¾“å…¥é”®å€¼å¯¹å¹¶è°ƒç”¨ç”±ç”¨æˆ·å®šä¹‰çš„ Map å‡½æ•°ï¼›ç”± Map å‡½æ•°äº§ç”Ÿçš„ä¸­é—´ç»“æœé”®å€¼å¯¹ä¼šè¢«æš‚æ—¶å­˜æ”¾åœ¨ç¼“å†²å†…å­˜åŒºä¸­ï¼›</li>
<li>åœ¨ Map é˜¶æ®µè¿›è¡Œçš„åŒæ—¶ï¼ŒMapper ä»¬å‘¨æœŸæ€§åœ°å°†æ”¾ç½®åœ¨ç¼“å†²åŒºä¸­çš„ä¸­é—´ç»“æœå­˜å…¥åˆ°è‡ªå·±çš„æœ¬åœ°ç£ç›˜ä¸­ï¼ŒåŒæ—¶æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ Partition å‡½æ•°ï¼ˆé»˜è®¤ä¸º <code>hash(key) % R</code>ï¼‰å°†äº§ç”Ÿçš„ä¸­é—´ç»“æœåˆ†ä¸ºRR ä¸ªéƒ¨åˆ†ã€‚ä»»åŠ¡å®Œæˆæ—¶ï¼ŒMapper ä¾¿ä¼šå°†ä¸­é—´ç»“æœåœ¨å…¶æœ¬åœ°ç£ç›˜ä¸Šçš„å­˜æ”¾ä½ç½®æŠ¥å‘Šç»™ Masterï¼›</li>
<li>Mapper ä¸ŠæŠ¥çš„ä¸­é—´ç»“æœå­˜æ”¾ä½ç½®ä¼šè¢« Master è½¬å‘ç»™ Reducerï¼›å½“ Reducer æ¥æ”¶åˆ°è¿™äº›ä¿¡æ¯åä¾¿ä¼šé€šè¿‡ RPC è¯»å–å­˜å‚¨åœ¨ Mapper æœ¬åœ°ç£ç›˜ä¸Šå±äºå¯¹åº” Partition çš„ä¸­é—´ç»“æœï¼›åœ¨è¯»å–å®Œæ¯•åï¼ŒReducer ä¼šå¯¹è¯»å–åˆ°çš„æ•°æ®è¿›è¡Œæ’åºä»¥ä»¤æ‹¥æœ‰ç›¸åŒé”®çš„é”®å€¼å¯¹èƒ½å¤Ÿè¿ç»­åˆ†å¸ƒï¼›</li>
<li>ä¹‹åï¼ŒReducer ä¼šä¸ºæ¯ä¸ªé”®æ”¶é›†ä¸å…¶å…³è”çš„å€¼çš„é›†åˆï¼Œå¹¶ä»¥ä¹‹è°ƒç”¨ç”¨æˆ·å®šä¹‰çš„ Reduce å‡½æ•°ã€‚Reduce å‡½æ•°çš„ç»“æœä¼šè¢«æ”¾å…¥åˆ°å¯¹åº”çš„ Reduce Partition ç»“æœæ–‡ä»¶ï¼›</li>
</ol>
<p>å®é™…ä¸Šï¼Œåœ¨ä¸€ä¸ª MapReduce é›†ç¾¤ä¸­ï¼ŒMaster ä¼šè®°å½•æ¯ä¸€ä¸ª Map å’Œ Reduce ä»»åŠ¡çš„å½“å‰å®ŒæˆçŠ¶æ€ï¼Œä»¥åŠæ‰€åˆ†é…çš„ Workerï¼›é™¤æ­¤ä¹‹å¤–ï¼ŒMaster è¿˜è´Ÿè´£å°† Mapper äº§ç”Ÿçš„ä¸­é—´ç»“æœæ–‡ä»¶çš„ä½ç½®å’Œå¤§å°è½¬å‘ç»™ Reducerï¼›</p>
<p><strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡ MapReduce ä»»åŠ¡æ‰§è¡Œæ—¶ï¼ŒM å’Œ R çš„å€¼éƒ½åº”æ¯”é›†ç¾¤ä¸­çš„ Worker æ•°é‡è¦é«˜å¾—å¤šï¼Œä»¥è¾¾æˆé›†ç¾¤å†…è´Ÿè½½å‡è¡¡çš„æ•ˆæœï¼›</strong></p>
<br>

<h3 id="MapReduceå®¹é”™æœºåˆ¶"><a href="#MapReduceå®¹é”™æœºåˆ¶" class="headerlink" title="MapReduceå®¹é”™æœºåˆ¶"></a><strong>MapReduceå®¹é”™æœºåˆ¶</strong></h3><p>ç”±äº Google MapReduce å¾ˆå¤§ç¨‹åº¦ä¸Šåˆ©ç”¨äº†ç”± Google File System æä¾›çš„åˆ†å¸ƒå¼åŸå­æ–‡ä»¶è¯»å†™æ“ä½œï¼Œæ‰€ä»¥ MapReduce é›†ç¾¤çš„å®¹é”™æœºåˆ¶å®ç°ç›¸æ¯”ä¹‹ä¸‹ä¾¿ç®€æ´å¾ˆå¤šï¼Œä¹Ÿä¸»è¦é›†ä¸­åœ¨ä»»åŠ¡æ„å¤–ä¸­æ–­çš„æ¢å¤ä¸Šï¼›</p>
<h4 id="Workerå¤±æ•ˆ"><a href="#Workerå¤±æ•ˆ" class="headerlink" title="Workerå¤±æ•ˆ"></a><strong>Workerå¤±æ•ˆ</strong></h4><p>åœ¨ MapReduce é›†ç¾¤ä¸­ï¼ŒMaster ä¼šå‘¨æœŸåœ°å‘æ¯ä¸€ä¸ª Worker å‘é€ Ping ä¿¡å·ï¼šå¦‚æœæŸä¸ª Worker åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰å“åº”ï¼ŒMaster å°±ä¼šè®¤ä¸ºè¿™ä¸ª Worker å·²ç»ä¸å¯ç”¨ï¼›</p>
<p>ä»»ä½•åˆ†é…ç»™è¯¥ Worker çš„ Map ä»»åŠ¡ï¼Œæ— è®ºæ˜¯æ­£åœ¨è¿è¡Œè¿˜æ˜¯å·²ç»å®Œæˆï¼Œéƒ½éœ€è¦ç”± Master é‡æ–°åˆ†é…ç»™å…¶ä»– Workerï¼Œå› ä¸ºè¯¥ Worker ä¸å¯ç”¨ä¹Ÿæ„å‘³ç€å­˜å‚¨åœ¨è¯¥ Worker æœ¬åœ°ç£ç›˜ä¸Šçš„ä¸­é—´ç»“æœä¹Ÿä¸å¯ç”¨äº†ï¼›</p>
<p>Master ä¹Ÿä¼šå°†è¿™æ¬¡é‡è¯•é€šçŸ¥ç»™æ‰€æœ‰ Reducerï¼Œæ²¡èƒ½ä»åŸæœ¬çš„ Mapper ä¸Šå®Œæ•´è·å–ä¸­é—´ç»“æœçš„ Reducer ä¾¿ä¼šå¼€å§‹ä»æ–°çš„ Mapper ä¸Šè·å–æ•°æ®ï¼›</p>
<p>å¦‚æœæœ‰ Reduce ä»»åŠ¡åˆ†é…ç»™è¯¥ Workerï¼ŒMaster åˆ™ä¼šé€‰å–å…¶ä¸­å°šæœªå®Œæˆçš„ Reduce ä»»åŠ¡åˆ†é…ç»™å…¶ä»– Workerï¼›</p>
<p>é‰´äº Google MapReduce çš„ç»“æœæ˜¯å­˜å‚¨åœ¨ Google File System ä¸Šçš„ï¼Œå·²å®Œæˆçš„ Reduce ä»»åŠ¡çš„ç»“æœçš„å¯ç”¨æ€§ç”± Google File System æä¾›ï¼Œå› æ­¤ MapReduce Master åªéœ€è¦å¤„ç†æœªå®Œæˆçš„ Reduce ä»»åŠ¡å³å¯ï¼›</p>
<br>

<h4 id="Masterå¤±æ•ˆ"><a href="#Masterå¤±æ•ˆ" class="headerlink" title="Masterå¤±æ•ˆ"></a><strong>Masterå¤±æ•ˆ</strong></h4><p><strong>æ•´ä¸ª MapReduce é›†ç¾¤ä¸­åªä¼šæœ‰ä¸€ä¸ª Master ç»“ç‚¹ï¼Œå› æ­¤ Master å¤±æ•ˆçš„æƒ…å†µå¹¶ä¸å¤šè§ï¼›</strong></p>
<p>Master ç»“ç‚¹åœ¨è¿è¡Œæ—¶ä¼šå‘¨æœŸæ€§åœ°å°†é›†ç¾¤çš„å½“å‰çŠ¶æ€ä½œä¸ºä¿å­˜ç‚¹ï¼ˆCheckpointï¼‰å†™å…¥åˆ°ç£ç›˜ä¸­ï¼›</p>
<p>Master è¿›ç¨‹ç»ˆæ­¢åï¼Œé‡æ–°å¯åŠ¨çš„ Master è¿›ç¨‹å³å¯åˆ©ç”¨å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„æ•°æ®æ¢å¤åˆ°ä¸Šä¸€æ¬¡ä¿å­˜ç‚¹çš„çŠ¶æ€ï¼›</p>
<br>

<h4 id="è½åçš„Worker"><a href="#è½åçš„Worker" class="headerlink" title="è½åçš„Worker"></a><strong>è½åçš„Worker</strong></h4><p>å¦‚æœé›†ç¾¤ä¸­æœ‰<strong>æŸä¸ª Worker èŠ±äº†ç‰¹åˆ«é•¿çš„æ—¶é—´æ¥å®Œæˆæœ€åçš„å‡ ä¸ª Map æˆ– Reduce ä»»åŠ¡ï¼Œæ•´ä¸ª MapReduce è®¡ç®—ä»»åŠ¡çš„è€—æ—¶å°±ä¼šå› æ­¤è¢«æ‹–é•¿ï¼Œè¿™æ ·çš„ Worker ä¹Ÿå°±æˆäº†è½åè€…ï¼ˆStragglerï¼‰ï¼</strong></p>
<p><font color="#f00"><strong>MapReduce åœ¨æ•´ä¸ªè®¡ç®—å®Œæˆåˆ°ä¸€å®šç¨‹åº¦æ—¶å°±ä¼šå°†å‰©ä½™çš„ä»»åŠ¡è¿›è¡Œå¤‡ä»½ï¼Œå³åŒæ—¶å°†å…¶åˆ†é…ç»™å…¶ä»–ç©ºé—² Worker æ¥æ‰§è¡Œï¼Œå¹¶åœ¨å…¶ä¸­ä¸€ä¸ª Worker å®Œæˆåå°†è¯¥ä»»åŠ¡è§†ä½œå·²å®Œæˆï¼›</strong></font></p>
<br>

<h3 id="å…¶ä»–ä¼˜åŒ–"><a href="#å…¶ä»–ä¼˜åŒ–" class="headerlink" title="å…¶ä»–ä¼˜åŒ–"></a><strong>å…¶ä»–ä¼˜åŒ–</strong></h3><p>åœ¨é«˜å¯ç”¨çš„åŸºç¡€ä¸Šï¼ŒGoogle MapReduce ç³»ç»Ÿç°æœ‰çš„å®ç°åŒæ ·é‡‡å–äº†ä¸€äº›ä¼˜åŒ–æ–¹å¼æ¥æé«˜ç³»ç»Ÿè¿è¡Œçš„æ•´ä½“æ•ˆç‡ï¼›</p>
<h4 id="æ•°æ®æœ¬åœ°æ€§"><a href="#æ•°æ®æœ¬åœ°æ€§" class="headerlink" title="æ•°æ®æœ¬åœ°æ€§"></a><strong>æ•°æ®æœ¬åœ°æ€§</strong></h4><p>åœ¨ Google å†…éƒ¨æ‰€ä½¿ç”¨çš„è®¡ç®—ç¯å¢ƒä¸­ï¼Œæœºå™¨é—´çš„ç½‘ç»œå¸¦å®½æ˜¯æ¯”è¾ƒç¨€ç¼ºçš„èµ„æºï¼Œéœ€è¦å°½é‡å‡å°‘åœ¨æœºå™¨é—´è¿‡å¤šåœ°è¿›è¡Œä¸å¿…è¦çš„æ•°æ®ä¼ è¾“ï¼›</p>
<p>Google MapReduce é‡‡ç”¨ Google File System æ¥ä¿å­˜è¾“å…¥å’Œç»“æœæ•°æ®ï¼Œå› æ­¤ Master åœ¨åˆ†é… Map ä»»åŠ¡æ—¶ä¼šä» Google File System ä¸­è¯»å–å„ä¸ª Block çš„ä½ç½®ä¿¡æ¯ï¼Œå¹¶å°½é‡å°†å¯¹åº”çš„ Map ä»»åŠ¡åˆ†é…åˆ°æŒæœ‰è¯¥ Block çš„ Replica çš„æœºå™¨ä¸Šï¼›</p>
<p>å¦‚æœæ— æ³•å°†ä»»åŠ¡åˆ†é…è‡³è¯¥æœºå™¨ï¼ŒMaster ä¹Ÿä¼šåˆ©ç”¨ Google File System æä¾›çš„æœºæ¶æ‹“æ‰‘ä¿¡æ¯å°†ä»»åŠ¡åˆ†é…åˆ°è¾ƒè¿‘çš„æœºå™¨ä¸Šï¼›</p>
<br>

<h4 id="Combiner"><a href="#Combiner" class="headerlink" title="Combiner"></a><strong>Combiner</strong></h4><p>åœ¨æŸäº›æƒ…å½¢ä¸‹ï¼Œç”¨æˆ·æ‰€å®šä¹‰çš„ Map ä»»åŠ¡å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡é‡å¤çš„ä¸­é—´ç»“æœé”®ï¼ŒåŒæ—¶ç”¨æˆ·æ‰€å®šä¹‰çš„ Reduce å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯æ»¡è¶³äº¤æ¢å¾‹å’Œç»“åˆå¾‹çš„ï¼›</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGoogle MapReduce ç³»ç»Ÿå…è®¸ç”¨æˆ·å£°æ˜åœ¨ Mapper ä¸Šæ‰§è¡Œçš„ Combiner å‡½æ•°ï¼šMapper ä¼šä½¿ç”¨ç”±è‡ªå·±è¾“å‡ºçš„ R ä¸ªä¸­é—´ç»“æœ Partition è°ƒç”¨ Combiner å‡½æ•°ä»¥å¯¹ä¸­é—´ç»“æœè¿›è¡Œå±€éƒ¨åˆå¹¶ï¼Œå‡å°‘ Mapper å’Œ Reducer é—´éœ€è¦ä¼ è¾“çš„æ•°æ®é‡ï¼›</p>
<blockquote>
<p>  ä»¥ä¸Šå†…å®¹è½¬è‡ªï¼š</p>
<ul>
<li><a href="https://mr-dai.github.io/mapreduce_summary/" target="_blank" rel="noopener">https://mr-dai.github.io/mapreduce_summary/</a></li>
</ul>
</blockquote>
<br>

<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a><strong>ç¯å¢ƒå‡†å¤‡</strong></h2><p>Lab1 æ‰€éœ€è¦çš„ç¯å¢ƒéå¸¸ç®€å•ï¼Œåªéœ€è¦ä½ çš„ç”µè„‘å®‰è£… Go å³å¯ï¼›</p>
<blockquote>
<p>  <strong>å®éªŒè¦æ±‚çš„ç¯å¢ƒæ˜¯ Go 1.13ï¼Œä½†æ˜¯æˆ‘çš„ç¯å¢ƒæ˜¯ Go 1.18ï¼›</strong></p>
<p>  <strong>ä½†æ˜¯ç”±äº Go è‰¯å¥½å‘å‰å…¼å®¹çš„ç‰¹æ€§ï¼Œä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼</strong></p>
</blockquote>
<p>è·å–ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥é€šè¿‡ Git Clone ä¸‹æ¥å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="bash">$ git clone git://g.csail.mit.edu/6.824-golabs-2020 6.824
$ cd 6.824</code></pre>
<p>Clone ä¸‹æ¥çš„ä»£ç é»˜è®¤å·²ç»æä¾›äº†ä¸€ä¸ªç®€å•çš„é¡ºåºæ‰§è¡Œçš„ MapReduce å®ç°åœ¨ï¼š<code>src/main/mrsequential.go</code>ï¼›</p>
<p>åŒæ—¶åœ¨ <code>mrapps/</code> ç›®å½•ä¸‹ï¼Œä¹Ÿæä¾›äº†å‡ ä¸ª MapReduce çš„åº”ç”¨ï¼ˆä¸»è¦æ˜¯å®ç° Mapã€Reduce ä¸¤ä¸ªå‡½æ•°ï¼‰ï¼Œåé¢æµ‹è¯•çš„æ—¶å€™ä¼šç”¨åˆ°ï¼›</p>
<p>å¯ä»¥ç®€å•çš„å…ˆåšä¸€ä¸ªæµ‹è¯•ï¼š</p>
<pre><code class="bash">$ cd src/main
# æ„å»º MapReduce APP çš„åŠ¨æ€é“¾æ¥åº“
$ go build -buildmode=plugin ../mrapps/wc.go

# æ‰§è¡Œé¡ºåºå®ç°çš„MapReduceä¾‹å­
$ rm mr-out*
$ go run mrsequential.go wc.so pg*.txt

# éªŒè¯ç»“æœ
$ more mr-out-0
A 509
ABOUT 2
ACT 8
...</code></pre>
<p>çœ‹åˆ°æˆåŠŸè¾“å‡ºäº†æ–‡ä»¶ <code>mr-out-0</code> å°±è¯´æ˜æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯OKçš„ï¼</p>
<p>åœ¨æˆ‘ä»¬å¼€å§‹å®éªŒä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­åˆ°åº•åšäº†ç‚¹å•¥ï¼›</p>
<p>é¦–å…ˆï¼Œé€šè¿‡ <code>go build -buildmode=plugin ../mrapps/wc.go</code> å°† WordCount åº”ç”¨ç¼–è¯‘ä¸ºäº†åŠ¨æ€é“¾æ¥åº“ï¼›</p>
<blockquote>
<p>  <strong>åœ¨åé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨å†…ç½®çš„ <code>plugin</code> åº“ä¸­çš„ <code>Lookup</code> å‡½æ•°ç›´æ¥åŠ è½½äº† Map å’Œ Reduce å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼›</strong> </p>
<p>  å…³äº <code>plugin</code> åº“ï¼š</p>
<ul>
<li><a href="https://pkg.go.dev/plugin" target="_blank" rel="noopener">https://pkg.go.dev/plugin</a></li>
</ul>
</blockquote>
<p><code>mrapps/wc.go</code> ä¸­çš„é€»è¾‘éå¸¸ç®€å•ï¼š</p>
<pre><code class="go">package main

// a word-count application &quot;plugin&quot; for MapReduce.
// go build -buildmode=plugin wc.go

import &quot;../mr&quot;
import &quot;unicode&quot;
import &quot;strings&quot;
import &quot;strconv&quot;

// The map function is called once for each file of input. The first
// argument is the name of the input file, and the second is the
// file&#39;s complete contents. You should ignore the input file name,
// and look only at the contents argument. The return value is a slice
// of key/value pairs.
func Map(filename string, contents string) []mr.KeyValue {
    // function to detect word separators.
    ff := func(r rune) bool { return !unicode.IsLetter(r) }

    // split contents into an array of words.
    words := strings.FieldsFunc(contents, ff)

    kva := []mr.KeyValue{}
    for _, w := range words {
        kv := mr.KeyValue{w, &quot;1&quot;}
        kva = append(kva, kv)
    }
    return kva
}

// The reduce function is called once for each key generated by the
// map tasks, with a list of all the values created for that key by
// any map task.
func Reduce(key string, values []string) string {
    // return the number of occurrences of this word.
    return strconv.Itoa(len(values))
}</code></pre>
<p><strong>å°±æ˜¯å®šä¹‰äº† Mapã€Reduce ä¸¤ä¸ªå‡½æ•°ï¼Œè€Œä¸å¿…å…³å¿ƒåé¢çš„ä»»åŠ¡æ˜¯å¦‚ä½•è°ƒåº¦çš„ï¼ˆåˆ†å¸ƒå¼ or é¡ºåºæ‰§è¡Œï¼‰ï¼›</strong></p>
<p>éšåæ‰§è¡Œï¼š<code>go run mrsequential.go wc.so pg*.txt</code> æŒ‡å®šäº† MapReduce åŠ¨æ€è¿æ¥åº“ï¼Œä»¥åŠæå‰å‡†å¤‡å¥½çš„æµ‹è¯•æ–‡ä»¶ï¼ˆä»¥ <code>pg</code> å¼€å¤´ï¼‰ï¼›</p>
<p>ä¸‹é¢æ¥çœ‹çœ‹é¡ºåºæ‰§è¡Œçš„ MapReduce çš„å®ç°ï¼š</p>
<p>src/main/mrsequential.go</p>
<pre><code class="go">package main

// simple sequential MapReduce.
// go run mrsequential.go wc.so pg*.txt

import &quot;fmt&quot;
import &quot;../mr&quot;
import &quot;plugin&quot;
import &quot;os&quot;
import &quot;log&quot;
import &quot;io/ioutil&quot;
import &quot;sort&quot;

// for sorting by key.
type ByKey []mr.KeyValue

// for sorting by key.
func (a ByKey) Len() int           { return len(a) }
func (a ByKey) Swap(i, j int)      { a[i], a[j] = a[j], a[i] }
func (a ByKey) Less(i, j int) bool { return a[i].Key &lt; a[j].Key }

func main() {
    if len(os.Args) &lt; 3 {
        fmt.Fprintf(os.Stderr, &quot;Usage: mrsequential xxx.so inputfiles...\n&quot;)
        os.Exit(1)
    }

    mapf, reducef := loadPlugin(os.Args[1])

    // read each input file,
    // pass it to Map,
    // accumulate the intermediate Map output.
    intermediate := []mr.KeyValue{}
    for _, filename := range os.Args[2:] {
        file, err := os.Open(filename)
        if err != nil {
            log.Fatalf(&quot;cannot open %v&quot;, filename)
        }
        content, err := ioutil.ReadAll(file)
        if err != nil {
            log.Fatalf(&quot;cannot read %v&quot;, filename)
        }
        file.Close()
        kva := mapf(filename, string(content))
        intermediate = append(intermediate, kva...)
    }

    // a big difference from real MapReduce is that all the
    // intermediate data is in one place, intermediate[],
    // rather than being partitioned into NxM buckets.

    sort.Sort(ByKey(intermediate))

    oname := &quot;mr-out-0&quot;
    ofile, _ := os.Create(oname)

    // call Reduce on each distinct key in intermediate[],
    // and print the result to mr-out-0.
    i := 0
    for i &lt; len(intermediate) {
        j := i + 1
        for j &lt; len(intermediate) &amp;&amp; intermediate[j].Key == intermediate[i].Key {
            j++
        }
        values := []string{}
        for k := i; k &lt; j; k++ {
            values = append(values, intermediate[k].Value)
        }
        output := reducef(intermediate[i].Key, values)

        // this is the correct format for each line of Reduce output.
        fmt.Fprintf(ofile, &quot;%v %v\n&quot;, intermediate[i].Key, output)

        i = j
    }

    ofile.Close()
}

// load the application Map and Reduce functions
// from a plugin file, e.g. ../mrapps/wc.so
func loadPlugin(filename string) (func(string, string) []mr.KeyValue, func(string, []string) string) {
    p, err := plugin.Open(filename)
    if err != nil {
        log.Fatalf(&quot;cannot load plugin %v&quot;, filename)
    }
    xmapf, err := p.Lookup(&quot;Map&quot;)
    if err != nil {
        log.Fatalf(&quot;cannot find Map in %v&quot;, filename)
    }
    mapf := xmapf.(func(string, string) []mr.KeyValue)
    xreducef, err := p.Lookup(&quot;Reduce&quot;)
    if err != nil {
        log.Fatalf(&quot;cannot find Reduce in %v&quot;, filename)
    }
    reducef := xreducef.(func(string, []string) string)

    return mapf, reducef
}</code></pre>
<p>ç›´æ¥ä» main å‡½æ•°å¼€å§‹çœ‹ï¼š</p>
<p>é¦–å…ˆä»åŠ¨æ€è¿æ¥åº“ä¸­è·å– Map å’Œ Reduce å‡½æ•°ï¼›</p>
<p>éšåï¼Œè¯»å–æ¯ä¸€ä¸ªè¾“å…¥çš„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ Map å‡½æ•°å¤„ç†ï¼Œå¹¶å°†å¤„ç†åçš„ç»“æœå­˜å…¥ intermediate ä¸´æ—¶æ•°ç»„ä¸­ï¼›</p>
<p>ç´§æ¥ç€ï¼Œå¯¹ intermediate ä¸´æ—¶æ•°ç»„åœ¨ Key ä¸Šæ’åºï¼Œè¿™ä¹Ÿæ˜¯ MapReduce è®ºæ–‡ä¸­è¦æ±‚çš„ï¼›</p>
<p>æœ€åï¼Œç”±äºæŒ‰ç…§ Key å€¼æ’åºåçš„ä¸­é—´æ•°ç»„ç›¸åŒçš„ Key å€¼è¿ç»­æ’åˆ—ï¼Œå› æ­¤æˆ‘ä»¬å¯¹ç›¸åŒ Key å€¼è°ƒç”¨ Reduce è¿›è¡Œèšåˆï¼Œå¹¶è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼›</p>
<p>è‡³æ­¤æˆ‘ä»¬çš„é¡ºåºæ‰§è¡Œ MapReduce ç»“æŸï¼›</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé¡ºåºæ‰§è¡Œçš„ MapReduce çš„å®ç°æ˜¯éå¸¸ç®€å•çš„ï¼›ä¸‹é¢æˆ‘ä»¬æ¥çœ‹æˆ‘ä»¬è¦åšçš„å®éªŒï¼›</p>
<br>

<h2 id="å®éªŒå†…å®¹åˆ†æ"><a href="#å®éªŒå†…å®¹åˆ†æ" class="headerlink" title="å®éªŒå†…å®¹åˆ†æ"></a><strong>å®éªŒå†…å®¹åˆ†æ</strong></h2><p>æ ¹æ®å®éªŒå†…å®¹ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯ï¼š<strong>å®ç°ä¸€ä¸ª å•æœºã€å¤šè¿›ç¨‹ã€å¹¶è¡Œ ç‰ˆæœ¬çš„ MapReduceï¼›</strong></p>
<p>å®ç°åŒ…æ‹¬ä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼šå•ç‹¬çš„ master å’Œ å¤šä¸ªå¹¶è¡Œçš„ worker è¿›ç¨‹ï¼Œä¸¤è€…é€šè¿‡ rpc è°ƒç”¨é€šä¿¡ï¼›</p>
<p>æ¯ä¸ª worker è¿›ç¨‹éƒ½ä¼šå‘ master ç´¢è¦ä»»åŠ¡ã€è¯»å–ä»»åŠ¡æŒ‡å®šçš„æ–‡ä»¶ã€æ‰§è¡Œä»»åŠ¡å¹¶æœ€ç»ˆå°†ç»“æœå†™å…¥å¤šä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ï¼›</p>
<p>å¹¶ä¸”ï¼Œä¸ºäº†æ¨¡æ‹Ÿåœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ç¨‹åºçš„ worker æŒ‚æ‰çš„åœºæ™¯ï¼Œmaster éœ€è¦å¤„ç†å½“ä¸€æ®µæ—¶é—´å†… worker éƒ½æ²¡æœ‰å®Œæˆä»»åŠ¡ï¼ˆå®éªŒæŒ‡å®šçš„æ˜¯10ç§’é’Ÿï¼‰ï¼Œåˆ™éœ€è¦å°†ä»»åŠ¡äº¤ç»™å…¶ä»– worker å»åšï¼›</p>
<p>å®éªŒå·²ç»æä¾›äº†éƒ¨åˆ†ä»£ç ï¼š <code>main/mrmaster.go</code> å’Œ <code>main/mrworker.go</code>ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰ï¼›</p>
<p>åªéœ€è¦å°†å®ç°å†™åœ¨ï¼š <code>mr/master.go</code>, <code>mr/worker.go</code>ã€ <code>mr/rpc.go</code> å³å¯ï¼›</p>
<p>åŒæ—¶ï¼Œä¹Ÿæä¾›äº†åœ¨å¼€å‘çš„æ—¶å€™è¿›è¡Œæµ‹è¯•çš„æ–¹æ³•ï¼š</p>
<p>é¦–å…ˆï¼Œå¯åŠ¨ master èŠ‚ç‚¹ï¼š</p>
<pre><code class="bash">$ go run mrmaster.go pg-*.txt</code></pre>
<p>éšååœ¨å¤šä¸ªæ–°çš„ç»ˆç«¯å¯åŠ¨å¤šä¸ª worker èŠ‚ç‚¹ï¼š</p>
<pre><code class="bash">$ go run mrworker.go wc.so</code></pre>
<p>å³å¯æµ‹è¯•ï¼›</p>
<p>åŒæ—¶ï¼Œå®éªŒæä¾›äº†æµ‹è¯•è„šæœ¬ç”¨äºæ•´ä¸ªå®éªŒçš„æµ‹è¯•ï¼š<code>test-mr.sh</code>ï¼›</p>
<p>å…³äºå®éªŒçš„ä¸€äº›è§„åˆ™ï¼š</p>
<ul>
<li>åœ¨å¤„ç† Map ä»»åŠ¡æ—¶ï¼Œéœ€è¦å°†ä¸­é—´äº§ç‰© Key åˆ‡åˆ†ä¸º <code>nReduce</code> ä¸ª reduce ä»»åŠ¡ï¼Œè¿™ä¸ªå‚æ•°æ˜¯è°ƒç”¨ <code>MakeMaster()</code> å‡½æ•°æ—¶æŒ‡å®šçš„ï¼</li>
<li>ç¬¬ X ä¸ª Reduce ä»»åŠ¡çš„äº§ç‰©åº”å½“å‘½åä¸ºï¼š<code>mr-out-X</code>ï¼›</li>
<li>æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ <code>mr-out-X</code> åº”å½“æ¯è¡Œä¸€ä¸ªè¾“å‡ºï¼Œå¹¶ä¸”é‡‡ç”¨ <code>&quot;%v %v&quot;</code> æ ¼å¼ï¼ˆå’Œ <code>main/mrsequential.go</code> ä¸€è‡´ï¼‰ï¼›</li>
<li>å½“ <code>main/mrmaster.go</code> è°ƒç”¨  <code>mr/master.go</code> çš„ <code>Done</code> å‡½æ•°è¿”å› true æ—¶ï¼Œå…¶è®¤ä¸ºæ‰€æœ‰ä»»åŠ¡éƒ½å·²å®Œæˆï¼Œå°†ä¼šé€€å‡ºï¼›</li>
<li>å½“æ‰€æœ‰çš„ä»»åŠ¡éƒ½ç»“æŸï¼Œworker åº”å½“é€€å‡ºï¼›ä¸€ä¸ªç®€å•çš„å®ç°æ˜¯ï¼šå½“è°ƒç”¨ <code>call</code> rpc ä¸ master é€šä¿¡å¤±è´¥æ—¶ï¼Œè®¤ä¸ºä»»åŠ¡ç»“æŸï¼›ä¸è¿‡ä¸€ä¸ªå¦å¤–ä¸€ä¸ªåšæ³•æ˜¯å½“ä»»åŠ¡ç»“æŸåï¼Œmaster ä¸‹å‘ä¸€ä¸ª <code>è¯·é€€å‡º</code> çš„ä»»åŠ¡ï¼Œäº¤ç»™ worker å»æ‰§è¡Œï¼›</li>
</ul>
<p>ä¸€äº›æç¤ºï¼š</p>
<ul>
<li>åœ¨å¼€å‘æµ‹è¯•æ—¶ï¼Œå½“ä½ ä¿®æ”¹äº† <code>mr/</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä½ åº”è¯¥é‡æ–°ä½¿ç”¨ <code>go build -buildmode=plugin ../mrapps/wc.go</code> ç¼–è¯‘ï¼›</li>
<li>ä¸€ä¸ªåˆç†çš„ä¸­é—´ç»“æœæ–‡ä»¶çš„å‘½åä¸ºï¼š <code>mr-X-Y</code>ï¼ŒX è¡¨ç¤º Map ä»»åŠ¡Idã€Y è¡¨ç¤º Reduce ä»»åŠ¡Idï¼›</li>
<li>å¯ä»¥ä½¿ç”¨  <code>ihash(key)</code> å‡½æ•°æ¥è®¡ç®—ç”±å“ªä¸ª worker æ¥æ‰§è¡Œå¯¹åº” Key çš„ Reduce ä»»åŠ¡ï¼›</li>
<li>master èŠ‚ç‚¹ä¼šè¢«å¹¶å‘çš„è®¿é—®ï¼Œä¸è¦å¿˜äº†å¯¹å…±äº«çš„æ•°æ®åŠ é”ï¼›</li>
<li>æœ‰çš„æ—¶å€™ worker éœ€è¦ç­‰å¾…ï¼Œæ¯”å¦‚ï¼šåªæœ‰åœ¨æ‰€æœ‰çš„ Map ä»»åŠ¡éƒ½å®Œæˆï¼Œæ‰èƒ½å¼€å¯ Reduce ä»»åŠ¡ï¼›ä¸€ä¸ªå®ç°æ–¹æ¡ˆæ˜¯ï¼šworker å®šæœŸè½®è¯¢ master å»ç´¢è¦ä»»åŠ¡çš„æ—¶å€™æ¥è¯¢é—®ï¼›å¦ä¸€ä¸ªå®ç°æ–¹æ¡ˆæ˜¯ç”± master èŠ‚ç‚¹æ¥å®šæœŸè½®è¯¢æ˜¯å¦æ‰€æœ‰çš„ä»»åŠ¡éƒ½å·²ç»å®Œæˆï¼›</li>
<li>master èŠ‚ç‚¹æ— æ³•åŒºåˆ†ä¸€ä¸ª worker èŠ‚ç‚¹åˆ°åº•æ˜¯æŒ‚æ‰äº†ï¼Œè¿˜æ˜¯æ‰§è¡Œäº†ä¸€ä¸ªä»»åŠ¡å¤ªé•¿æ—¶é—´ï¼›æœ€å¥½çš„åšæ³•æ˜¯masterç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œæ”¾å¼ƒé‚£äº›æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼ˆæœ¬å®éªŒä¸­ä¸º10sï¼‰çš„ workerï¼Œè®¤ä¸ºä»–ä»¬å·²ç»æŒ‚äº†ï¼Œå¹¶é‡æ–°åˆ†é…ä»»åŠ¡ï¼›</li>
<li>å¯ä»¥ä½¿ç”¨ <code>mrapps/crash.go</code> æµ‹è¯•èŠ‚ç‚¹æŒ‚æ‰åçš„æ¢å¤ï¼Œä»–çš„ Mapã€Reduce å‡½æ•°ä¼šéšæœºç›´æ¥é€€å‡ºï¼ˆæ¨¡æ‹Ÿ worker èŠ‚ç‚¹åœ¨è¢«åˆ†é…ä»»åŠ¡åæŒ‚æ‰ï¼‰ï¼›</li>
<li><font color="#f00"><strong>ä¸ºäº†ä¿è¯æ²¡æœ‰ worker èŠ‚ç‚¹èƒ½å¤Ÿçœ‹åˆ°ç”±äºèŠ‚ç‚¹å´©æºƒè€Œå†™å…¥ä¸€åŠçš„æœ€ç»ˆäº§å‡ºæ–‡ä»¶ï¼Œåœ¨ MapReduce è®ºæ–‡ä¸­æå‡ºäº†ï¼Œå…ˆåˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨å…¨éƒ¨å†™å…¥å®Œæˆåï¼Œé‡å‘½åçš„æ–¹æ³•ï¼ˆå¾ˆèµï¼ï¼‰ï¼›ä½ ä¹Ÿåº”å½“ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼›</strong></font></li>
</ul>
<p>é€šè¿‡ä¸Šé¢çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºï¼š</p>
<p>å¯¹äº master èŠ‚ç‚¹è¦åšåˆ°ï¼š</p>
<ul>
<li><strong>åœ¨å¯åŠ¨æ—¶æ ¹æ®æŒ‡å®šçš„è¾“å…¥æ–‡ä»¶åŠ nReduce æ•°ï¼Œç”Ÿæˆ Map Task åŠ Reduce Taskï¼›</strong></li>
<li><strong>é€šè¿‡ RPC çš„æ–¹å¼ä¸º Workers åˆ†é…å¯ç”¨çš„ Task å»å¤„ç†ï¼ˆç”± Worker è°ƒç”¨å»è·å–ï¼‰ï¼›</strong></li>
<li><strong>æ ¡éªŒ Task çš„å®Œæˆæƒ…å†µï¼Œå½“æ‰€æœ‰ Map Task å®Œæˆåï¼Œæ¨è¿›åˆ° Reduce é˜¶æ®µï¼Œå¼€å§‹æ´¾å‘ Reduce Taskï¼›åœ¨æ‰€æœ‰ Reduce Task å®Œæˆåæ ‡è®°ä½œä¸šå·²å®Œæˆå¹¶é€€å‡ºï¼›</strong></li>
<li><strong>åŒæ—¶ï¼Œç”±äº worker èŠ‚ç‚¹å­˜åœ¨æŒ‚æ‰çš„å¯èƒ½ï¼Œåœ¨ master æ ¡éªŒ Task å®Œæˆæƒ…å†µæ—¶ï¼Œéœ€è¦ è¿½è¸ªå·²åˆ†é…çš„ Task çš„è¿è¡Œæƒ…å†µï¼Œåœ¨ Task è¶…å‡º 10s ä»æœªå®Œæˆæ—¶ï¼Œå°†è¯¥ Task é‡æ–°åˆ†é…ç»™å…¶ä»– Worker é‡è¯•ï¼›</strong></li>
</ul>
<p>å¯¹äº worker èŠ‚ç‚¹ï¼š</p>
<ul>
<li><strong>å½“ç©ºé—²æ—¶è°ƒç”¨ RPC å‘ master è·å–ä»»åŠ¡ï¼›</strong></li>
<li><strong>è·å–åˆ°ä»»åŠ¡åï¼Œæ ¹æ®ä¸åŒä»»åŠ¡ç±»å‹è°ƒç”¨ Mapã€Reduce å¹¶è¾“å‡ºä¸­é—´ã€æœ€ç»ˆæ–‡ä»¶ï¼›</strong></li>
</ul>
<br>

<p>ä¸€ä¸ªéš¾ç‚¹åœ¨äºï¼šåœ¨æ‰§è¡Œ Reduce ä»»åŠ¡æ—¶ï¼Œéœ€è¦æ ¹æ®æŒ‡å®šçš„ nReduce æ•°è¿›è¡Œåˆ†é…ï¼›</p>
<p>è§£å†³æ–¹æ³•æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®— <code>ihash(key)</code> æ¥å®šä¹‰ä¸­é—´äº§ç‰©æ–‡ä»¶ï¼Œæ¥è®°å½•æ¯ä¸ª Reduce æ‰€åœ¨çš„æ–‡ä»¶ï¼›</p>
<p>å¦ä¸€ä¸ªéš¾ç‚¹åœ¨äºï¼šæœ‰å¯èƒ½å­˜åœ¨ä¸¤ä¸ª worker åŒæ—¶æ‰§è¡ŒåŒä¸€ä¸ªä»»åŠ¡çš„æƒ…å†µï¼Œæ­¤æ—¶è¦ä¿è¯åªæœ‰ä¸€ä¸ª Worker èƒ½å¤Ÿå®Œæˆç»“æœæ•°æ®çš„æœ€ç»ˆå†™å‡ºï¼Œä»¥å…å‡ºç°å†²çªå¯¼è‡´æœ€ç»ˆè§‚å¯Ÿåˆ°é‡å¤æˆ–ç¼ºå¤±çš„ç»“æœæ•°æ®ï¼›</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å®éªŒç»™å‡ºçš„æç¤ºï¼šé€šè¿‡ä¸´æ—¶æ–‡ä»¶çš„æ–¹æ³•è§£å†³ï¼›å³ï¼š</p>
<p>Worker å†™å‡ºæ•°æ®æ—¶ï¼Œå…ˆå†™å‡ºåˆ°ä¸´æ—¶æ–‡ä»¶ï¼ˆWriteï¼‰ï¼Œæœ€ç»ˆç¡®è®¤æ²¡æœ‰é—®é¢˜åå†å°†å…¶é‡å‘½åï¼ˆCommitï¼‰ä¸ºæ­£å¼ç»“æœæ–‡ä»¶ï¼ŒåŒºåˆ†å¼€äº† Write å’Œ Commit çš„è¿‡ç¨‹ï¼›</p>
<p>è€Œ Commit çš„è¿‡ç¨‹å¯ä»¥æ˜¯ Master æ¥æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¯ Worker æ¥æ‰§è¡Œï¼š</p>
<ul>
<li><strong>Master Commit</strong>ï¼šWorker å‘ Master æ±‡æŠ¥ Task å®Œæˆï¼Œ<strong>Master ç¡®è®¤è¯¥ Task æ˜¯å¦ä»å±äºè¯¥ Worker</strong>ï¼Œæ˜¯åˆ™è¿›è¡Œç»“æœæ–‡ä»¶ Commitï¼Œå¦åˆ™ç›´æ¥å¿½ç•¥ï¼›</li>
<li><strong>Worker Commit</strong>ï¼šWorker å‘ Master æ±‡æŠ¥ Task å®Œæˆï¼ŒMaster ç¡®è®¤è¯¥ Task æ˜¯å¦ä»å±äºè¯¥ Worker å¹¶å“åº” Workerï¼Œæ˜¯åˆ™ Worker è¿›è¡Œç»“æœæ–‡ä»¶ Commitï¼Œå†å‘ Master æ±‡æŠ¥ Commit å®Œæˆï¼›</li>
</ul>
<p>ä¸Šé¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å¯è¡Œçš„ï¼›</p>
<p>æˆ‘çš„å®ç°é€‰æ‹©äº† Master Commitï¼Œå› ä¸ºå¯ä»¥å°‘ä¸€æ¬¡ RPC è°ƒç”¨ï¼Œåœ¨å®ç°ä¸Šä¼šæ›´ç®€å•ï¼›ä½†ç¼ºç‚¹æ˜¯æ‰€æœ‰ Task æœ€ç»ˆ Commit éƒ½ç”± Master å®Œæˆï¼Œåœ¨æç«¯åœºæ™¯ä¸‹ä¼šè®© Master å˜æˆæ•´ä¸ª MR è¿‡ç¨‹çš„æ€§èƒ½ç“¶é¢ˆï¼›</p>
<br>

<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a><strong>ä»£ç å®ç°</strong></h2><p>ä»£ç çš„å®ç°ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸”å®éªŒå·²ç»æä¾›å¥½äº†å¯¹åº”çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>Master ä¸ Worker é—´çš„ RPC é€šä¿¡ï¼Œå¯¹åº” mr/rpc.go æ–‡ä»¶ï¼›</li>
<li>Master è°ƒåº¦é€»è¾‘ï¼Œå¯¹åº” mr/master.go æ–‡ä»¶ï¼›</li>
<li>Worker è®¡ç®—é€»è¾‘ï¼Œå¯¹åº” mr/worker.go æ–‡ä»¶ï¼›</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ï¼›</p>
<h3 id="RPCé€šä¿¡"><a href="#RPCé€šä¿¡" class="headerlink" title="RPCé€šä¿¡"></a><strong>RPCé€šä¿¡</strong></h3><p>RPC é€šä¿¡ä¸»è¦æ˜¯ç”¨æ¥ï¼š</p>
<ul>
<li><strong>Query</strong>ï¼šWorker è¯·æ±‚ Master è·å– Map æˆ– Reduce ä»»åŠ¡ï¼›</li>
<li><strong>Commit</strong>ï¼šWorker å‘ Master ç¡®è®¤ä¸Šä¸€ä¸ªä»»åŠ¡å·²ç»å®Œæˆï¼›</li>
</ul>
<p>åœ¨å®ç°æ—¶ï¼Œå› ä¸ºä¸Šé¢ä¸¤ä¸ªæ­¥éª¤å¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ªæ­¥éª¤ï¼Œå› æ­¤ï¼Œå¯ä»¥ç”¨ä¸€ä¸ª RPC è°ƒç”¨å®Œæˆä¸Šé¢ä¸¤ä¸ªäº‹æƒ…ï¼›</p>
<p><strong>å³ï¼šåœ¨ Query ä¸‹ä¸€ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼ŒCommit ä¸Šä¸€ä¸ªä»»åŠ¡ï¼›</strong></p>
<p><strong>ç‰¹åˆ«çš„ï¼š</strong></p>
<ul>
<li><strong>åœ¨ Query ç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œæ²¡æœ‰ä¸Šä¸€ä¸ªä»»åŠ¡ï¼Œæ‰€ä»¥ä¸éœ€è¦ Commitï¼›</strong></li>
<li><strong>å­˜åœ¨ Query ä»»åŠ¡çš„æ—¶å€™ï¼Œä¸å­˜åœ¨ä»»åŠ¡çš„å¯èƒ½ï¼Œæ­¤æ—¶å¯ä»¥ Commit ä¸Šä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯ä¸ä¼šè¿”å›ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼›</strong></li>
</ul>
<p>RPC çš„è¯·æ±‚ä¸ç›¸åº”ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>src/mr/rpc.go</p>
<pre><code class="go">// TaskTypeOpt The MapReduce task type
type TaskTypeOpt string

const (
    TaskTypeMap      TaskTypeOpt = &quot;Map&quot;
    TaskTypeReduce   TaskTypeOpt = &quot;Reduce&quot;
    TaskTypeFinished TaskTypeOpt = &quot;Finished&quot;
)

// TaskInfo The MapReduce task
type TaskInfo struct {
    Id       string
    Type     TaskTypeOpt
    Index    int
    File     string
    WorkerId string
    Deadline time.Time
}

// AckAndQueryNewTaskRequest RPC request for Workers to query a task after finished previously task
type AckAndQueryNewTaskRequest struct {
    // The finished previous task index (if it has finished task)
    PreviousTaskIndex int
    TaskType          TaskTypeOpt
    WorkerId          string
}

// AckAndQueryNewTaskResponse RPC response for Workers to query a task
type AckAndQueryNewTaskResponse struct {
    // The task id(filename) for Map or Reduce to yield results(if there has)
    Task            *TaskInfo
    MapWorkerCnt    int
    ReduceWorkerCnt int
}</code></pre>
<p>é¦–å…ˆå®šä¹‰äº† <code>TaskTypeOpt</code> ç±»å‹ï¼Œæ ‡å¿—ä»»åŠ¡çš„ç±»å‹ï¼ŒåŒ…æ‹¬ä¸‰ç§ï¼š</p>
<ul>
<li><strong><code>&quot;Map&quot;</code>ï¼šMap ä»»åŠ¡ï¼›</strong></li>
<li><strong><code>&quot;Reduce&quot;</code>ï¼šReduce ä»»åŠ¡ï¼›</strong></li>
<li><strong><code>&quot;Finished&quot;</code>ï¼šä»»åŠ¡å·²å®Œæˆï¼Œæç¤º Worker å¯ä»¥é€€å‡ºï¼›</strong></li>
</ul>
<p><code>TaskInfo</code> è¡¨ç¤ºä¸€ä¸ªä»»åŠ¡å®ä½“ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Idï¼šä»»åŠ¡çš„Idï¼›</strong></li>
<li><strong>Typeï¼šä»»åŠ¡çš„ç±»å‹ï¼›</strong></li>
<li><strong>Indexï¼šä»»åŠ¡çš„åºå·ï¼Œè¡¨ç¤ºæ˜¯ç¬¬å‡ ä¸ªä»»åŠ¡ï¼›</strong></li>
<li><strong>Fileï¼šä»»åŠ¡éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼›</strong></li>
<li><strong>WorkerIdï¼šç›®å‰æ‰§è¡Œè¯¥ä»»åŠ¡çš„ Worker çš„Idï¼›</strong></li>
<li><strong>Deadlineï¼šä»»åŠ¡çš„ç»“æŸæ—¶é—´ï¼ˆæœ¬å®éªŒä¸º10ç§’é’Ÿï¼‰ï¼›</strong></li>
</ul>
<p>æˆ‘ä»¬ RPC çš„åç§°ä¸º <code>AckAndQueryNewTask</code>ï¼ŒåŒ…æ‹¬ Request å’Œ Response ä¸¤ä¸ªéƒ¨åˆ†ï¼›</p>
<p><code>AckAndQueryNewTaskRequest</code> åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>PreviousTaskIndex</code>ï¼šä¸Šä¸€ä¸ªæ‰§è¡Œå®Œæˆä»»åŠ¡çš„ç´¢å¼•ï¼Œç”¨äº Commit ä¸Šä¸€ä¸ªä»»åŠ¡ï¼›</li>
<li><code>TaskType</code>ï¼šä¸Šä¸€ä¸ªæ‰§è¡Œå®Œæˆä»»åŠ¡çš„ç±»å‹ï¼Œç”¨äº Commit ä¸Šä¸€ä¸ªä»»åŠ¡ï¼›</li>
<li><code>WorkerId</code>ï¼šä¸Šä¸€ä¸ªæ‰§è¡Œå®Œæˆä»»åŠ¡çš„ WorkerIdï¼ˆæœ¬ WorkerIdï¼‰ï¼Œç”¨äº Master æ ¡éªŒåˆ°åº•æ˜¯å“ªä¸ª Worker æ‰§è¡Œä»»åŠ¡ï¼ˆFailover ç­–ç•¥ï¼‰ï¼›</li>
</ul>
<p><code>AckAndQueryNewTaskResponse</code> åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Task</strong>ï¼š<code>*TaskInfo</code> ç±»å‹ï¼Œæ–°ç”³è¯·çš„ä»»åŠ¡ï¼Œå¦‚æœä¸å­˜åœ¨å¯è°ƒåº¦çš„ä»»åŠ¡ï¼Œåˆ™è¿”å› nilï¼›</li>
<li><strong>MapWorkerCntï¼š</strong>åˆ†é…æ‰§è¡Œ Map çš„ Worker æ•°ï¼Œç”¨äºç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼›</li>
<li><strong>ReduceWorkerCntï¼š</strong>åˆ†é…æ‰§è¡Œ Reduce çš„ Worker æ•°ï¼Œç”¨äºç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼›</li>
</ul>
<br>

<h3 id="Masterè°ƒåº¦"><a href="#Masterè°ƒåº¦" class="headerlink" title="Masterè°ƒåº¦"></a><strong>Masterè°ƒåº¦</strong></h3><h4 id="Masterç»“æ„ä½“"><a href="#Masterç»“æ„ä½“" class="headerlink" title="Masterç»“æ„ä½“"></a><strong>Masterç»“æ„ä½“</strong></h4><p>Master ä¸»è¦æ˜¯å®Œæˆä¸‹é¢å‡ ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li><strong>å®ç° <code>AckAndQueryNewTask</code> æ–¹æ³•ï¼Œå®ç°ä»»åŠ¡çš„åˆ†é…ã€ä¸Šä¸€ä¸ªä»»åŠ¡çš„ Commitï¼›</strong></li>
<li><strong>å®ç°å„ä¸ªä»»åŠ¡çŠ¶æ€ä¹‹é—´çš„åˆ‡æ¢ï¼šMap =&gt; Reduce =&gt; Finishedï¼›</strong></li>
<li><strong>å®šæ—¶è½®è¯¢å„ä¸ªä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼ŒæŠ›å¼ƒè¶…æ—¶çš„ä»»åŠ¡å¹¶é‡æ–°åˆ†é…ï¼›</strong></li>
</ul>
<p>å› æ­¤ï¼ŒMaster éœ€è¦ç»´æŠ¤ä¸‹é¢çš„ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>é…ç½®ä¿¡æ¯</strong>ï¼š<ul>
<li>MAP Worker æ•°é‡ï¼›</li>
<li>Reduce Worker æ•°é‡ï¼›</li>
</ul>
</li>
<li><strong>è°ƒåº¦ä»»åŠ¡ä¿¡æ¯</strong>ï¼š<ul>
<li>å½“å‰æ‰€å¤„é˜¶æ®µï¼Œæ˜¯ MAPã€REDUCEã€Finishedï¼›</li>
<li>æ‰€æœ‰ä»æœªå®Œæˆçš„ Task åŠå…¶æ‰€å±çš„ Worker å’Œ Deadlineï¼Œå¯ä»¥ä½¿ç”¨ Map é…åˆ TaskId å®ç°ï¼›</li>
<li>æ‰€æœ‰ä»æœªåˆ†é…çš„ Task æ± ï¼Œç”¨äºå“åº” Worker ç”³è¯·ä»»åŠ¡åŠ Failover æ—¶çš„é‡æ–°åˆ†é…ï¼Œå¯ä»¥ä½¿ç”¨ Channel å®ç°ï¼›</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯ Master ç»“æ„çš„å®šä¹‰ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">type Master struct {
    // Use lock to avoid data race
    lock sync.RWMutex

    // The phase of all tasks
    status TaskTypeOpt

    // The count of the workers
    mapCnt    int
    reduceCnt int

    // All tasks
    tasks map[string]*TaskInfo
    // All ongoing tasks
    availableTasks chan *TaskInfo
}</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>lock è¯»å†™é”ç”¨äºé˜²æ­¢ Master å†…éƒ¨çš„çŠ¶æ€å‡ºç° Data Raceï¼›</li>
<li>status è®°å½•äº†å½“å‰ Job çš„ä»»åŠ¡çŠ¶æ€ï¼›</li>
<li>mapCntã€reduceCnt è®°å½•äº†å½“å‰ Mapã€Reduce çš„æ•°é‡ï¼›</li>
<li>tasks è®°å½•äº†å½“å‰<strong>æ‰€æœ‰æ­£åœ¨æ‰§è¡Œã€å¯åˆ†é…</strong>çš„ä»»åŠ¡ï¼›</li>
<li>availableTasks è®°å½•äº†<strong>å½“å‰å¯ä»¥è¢«åˆ†é…</strong>çš„ä»»åŠ¡ï¼›</li>
</ul>
<br>

<h4 id="Masteråˆå§‹åŒ–åŠå¯åŠ¨"><a href="#Masteråˆå§‹åŒ–åŠå¯åŠ¨" class="headerlink" title="Masteråˆå§‹åŒ–åŠå¯åŠ¨"></a><strong>Masteråˆå§‹åŒ–åŠå¯åŠ¨</strong></h4><p>å½“åˆ›å»ºä¸€ä¸ª Master åä¸»è¦éœ€è¦åšä»¥ä¸‹å‡ ä¸ªäº‹æƒ…ï¼š</p>
<ul>
<li>åŸºäºæŒ‡å®šçš„è¾“å…¥æ–‡ä»¶ç”Ÿæˆ MAP Task åˆ°ï¼šå¯ç”¨ Task æ±  availableTasks ä»¥åŠ tasks ä¸­ï¼›</li>
<li>å¤„ç† Worker çš„ Task ç”³è¯· RPCï¼Œä»æ± ä¸­åˆ†é…ä¸€ä¸ªå¯ç”¨çš„ Task ç»™ Worker å¹¶å“åº”ï¼›</li>
<li>å¤„ç† Worker çš„ Task å®Œæˆé€šçŸ¥ï¼Œå®Œæˆ Task æœ€ç»ˆçš„ç»“æœæ•°æ® Commitï¼›</li>
<li>åœ¨ MAP Task å…¨éƒ¨å®Œæˆåï¼Œåˆ‡æ¢è‡³ REDUCE é˜¶æ®µï¼Œç”Ÿæˆ REDUCE Task åˆ°å¯ç”¨ Task æ± ï¼›</li>
<li>åœ¨ REDUCE Task å…¨éƒ¨å®Œæˆåï¼Œæ ‡è®° MR ä½œä¸šå·²å®Œæˆï¼Œé€€å‡ºï¼›</li>
<li>å‘¨æœŸè½®è¯¢æ­£åœ¨è¿è¡Œçš„ Taskï¼Œå¦‚æœå‘ç° Task è¿è¡Œæ—¶é•¿è¶…å‡º Deadline åé‡æ–°åˆ†é…å…¶åˆ°æ–°çš„ Worker ä¸Šè¿è¡Œï¼›</li>
</ul>
<p>Master çš„åˆå§‹åŒ–ä¸»è¦æ˜¯åœ¨ <code>src/main/mrmaster.go</code> ä¸­é€šè¿‡è°ƒç”¨ <code>MakeMaster</code> å‡½æ•°å®ç°çš„ï¼›</p>
<p>ä¸‹é¢æ¥çœ‹ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">// MakeMaster create a Master.
// main/mrmaster.go calls this function.
// nReduce is the number of reduce tasks to use.
func MakeMaster(files []string, nReduce int) *Master {

    // Step 1: Create master
    m := &amp;Master{
        status:         TaskTypeMap,
        mapCnt:         len(files),
        reduceCnt:      nReduce,
        tasks:          make(map[string]*TaskInfo),
        availableTasks: make(chan *TaskInfo, max(len(files), nReduce)),
    }

    // Step 2: Store the data
    for idx, file := range files {
        task := &amp;TaskInfo{
            Id:    generateTaskId(TaskTypeMap, idx),
            Type:  TaskTypeMap,
            Index: idx,
            File:  file,
        }
        m.tasks[task.Id] = task  // Store the tasks
        m.availableTasks &lt;- task // Send the task to the channel
    }

    // Step 3: Start master server
    m.server()
    infof(&quot;master server started: %v&quot;, m)

    // Step 4: Start workers heartbeats checker
    go func() {
        for {
            time.Sleep(500 * time.Millisecond)
            m.checkWorkers()
        }
    }()

    return m
}</code></pre>
<p>ä»£ç é¦–å…ˆåˆå§‹åŒ–äº† Master çš„å„ä¸ªå±æ€§ï¼Œå°†æœ€åˆçŠ¶æ€è®¾ç½®ä¸º Map ç±»å‹çš„ Taskï¼›</p>
<p>éšåï¼Œéå†è¾“å…¥çš„æ–‡ä»¶ï¼Œä¸ºæ¯ä¸ªæ–‡ä»¶åˆ›å»º Taskï¼Œå¹¶å­˜å…¥ tasks å’Œ availableTasks ä¸­ï¼›</p>
<p>è¿™é‡Œç”Ÿæˆ TaskId çš„å‡½æ•°éå¸¸ç®€å•ï¼š</p>
<p>src/mr/rpc.go</p>
<pre><code class="go">// generateTaskId Generate TaskId for the given task
//  The id follows the format: &quot;taskType-taskIndex&quot;
func generateTaskId(taskType TaskTypeOpt, index int) string {
    return fmt.Sprintf(&quot;%s-%d&quot;, taskType, index)
}</code></pre>
<p>éšåï¼Œå¯åŠ¨ RPC Serverï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">// start a thread that listens for RPCs from worker.go
func (m *Master) server() {
    _ = rpc.Register(m)
    rpc.HandleHTTP()
    //l, e := net.Listen(&quot;tcp&quot;, &quot;:1234&quot;)
    sockname := masterSock()
    _ = os.Remove(sockname)
    l, e := net.Listen(&quot;unix&quot;, sockname)
    if e != nil {
        log.Fatal(&quot;listen error:&quot;, e)
    }
    go http.Serve(l, nil)
}</code></pre>
<p>è¿™é‡Œåªæ˜¯ä½¿ç”¨å®éªŒæä¾›çš„æ–¹æ³•ï¼Œå¹¶æœªè¿›è¡Œä¿®æ”¹ï¼›</p>
<p>æœ€åï¼Œåœ¨ä¸€ä¸ªæ–°å¼€çš„åç¨‹ä¸­è°ƒç”¨ checkWorkers è½®è¯¢æˆ‘ä»¬çš„ä»»åŠ¡ï¼ˆåæ–‡ä¼šè®²ï¼‰ï¼›</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ Master åˆ›å»ºå¹¶åˆå§‹åŒ–å®Œæ¯•ï¼Œä¼šåœ¨ <code>src/main/mrmaster.go</code> ä¸­è°ƒç”¨ <code>Done</code> æ–¹æ³•ç­‰å¾…é€€å‡ºï¼š</p>
<p>src/main/mrmaster.go</p>
<pre><code class="go">m := mr.MakeMaster(os.Args[1:], 10)
for m.Done() == false {
    time.Sleep(time.Second)
}</code></pre>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Master å¤„ç†å®Œæ‰€æœ‰ä»»åŠ¡åï¼Œåœ¨ Done ä¸­è¿”å› true å³å¯ï¼</p>
<br>

<h4 id="Taskçš„è·å–ä¸åˆ†é…"><a href="#Taskçš„è·å–ä¸åˆ†é…" class="headerlink" title="Taskçš„è·å–ä¸åˆ†é…"></a><strong>Taskçš„è·å–ä¸åˆ†é…</strong></h4><p>Taskçš„è·å–ä¸åˆ†é…ä¸»è¦æ˜¯é€šè¿‡ RPC æ–¹æ³• <code>AckAndQueryNewTask</code> å®ç°çš„ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">func (m *Master) AckAndQueryNewTask(req *AckAndQueryNewTaskRequest,
    resp *AckAndQueryNewTaskResponse) error {

    // Step 1: Mark previous task finished if necessary
    if req.TaskType != &quot;&quot; {
        err := m.handlePreviousTask(req)
        if err != nil {
            errorf(&quot;handlePreviousTask err: %v&quot;, err)
            return err
        }
    }

    // Step 2: Get the next task
    task, ok := &lt;-m.availableTasks
    if !ok { // Channel closed: no available tasks
        m.lock.RLock()
        defer m.lock.RUnlock()
        retTask := &amp;TaskInfo{}
        if m.status == TaskTypeFinished {
            retTask.Type = TaskTypeFinished
        }
        resp.Task = retTask
        return nil
    }

    // Step 3: Assign the task to the worker
    m.lock.Lock()
    defer m.lock.Unlock()
    infof(&quot;Assign task %v to worker %s&quot;, task, req.WorkerId)
    task.WorkerId = req.WorkerId
    task.Deadline = time.Now().Add(10 * time.Second)
    m.tasks[generateTaskId(task.Type, task.Index)] = task

    // Step 4: Handle response
    resp.Task = &amp;TaskInfo{
        Id:       task.Id,
        Type:     task.Type,
        Index:    task.Index,
        File:     task.File,
        WorkerId: task.WorkerId,
        Deadline: task.Deadline,
    }
    resp.MapWorkerCnt = m.mapCnt
    resp.ReduceWorkerCnt = m.reduceCnt

    return nil
}</code></pre>
<p>æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€è®²çš„ï¼Œå½“ Worker å‘é€ä¸€ä¸ªæ–°çš„ Task è¯·æ±‚æ—¶ï¼Œä¼šæäº¤ä¸Šä¸€æ¬¡çš„ä»»åŠ¡ï¼›</p>
<p>å› æ­¤ä»£ç é¦–å…ˆåˆ¤æ–­äº†æ˜¯å¦å­˜åœ¨ä¸Šä¸€ä¸ªä»»åŠ¡ï¼Œå¦‚æœå­˜åœ¨ä¸Šä¸€ä¸ªä»»åŠ¡ï¼Œåˆ™è°ƒç”¨ <code>handlePreviousTask</code> é¦–å…ˆå¤„ç†ä¸Šä¸€ä¸ªä»»åŠ¡ï¼ˆè§åæ–‡ï¼‰ï¼›</p>
<p>éšåé€šè¿‡ <code>&lt;-m.availableTasks</code> è·å–ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼›è¿™é‡Œéœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li><strong>å¦‚æœ Channel æœªå…³é—­ï¼Œå¹¶ä¸”æ²¡æœ‰ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œåˆ™ä¼šåœ¨æ­¤é˜»å¡ç­‰å¾…ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼›</strong></li>
<li><strong>å¦‚æœ Channel å·²ç»å…³é—­ï¼Œåˆ™ ok ä¼šæ˜¯ falseï¼Œ</strong></li>
</ul>
<blockquote>
<p>  å¯¹ä¸Šé¢æœ‰ç–‘é—®çš„å¯ä»¥å‚è€ƒè¿™ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<ul>
<li><a href="https://go.dev/play/p/YUbEDF2XaCG" target="_blank" rel="noopener">https://go.dev/play/p/YUbEDF2XaCG</a></li>
</ul>
</blockquote>
<p>å› æ­¤ï¼Œå¦‚æœ Channel å·²ç»å…³é—­ï¼Œå¹¶ä¸”å½“å‰çš„ä»»åŠ¡çŠ¶æ€ä¸º <code>Finished</code> æˆ‘ä»¬åªéœ€è¦ç»™ Worker å‘é€ä»»åŠ¡å·²ç»å®Œæˆçš„ä»»åŠ¡å“åº”å³å¯ï¼</p>
<p>å¦åˆ™ï¼Œå¦‚æœæˆ‘ä»¬è·å–åˆ°äº†ä»»åŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è®¾ç½®ï¼š</p>
<ul>
<li>æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„ WorkerIdï¼›</li>
<li>ä»»åŠ¡çš„è¶…æ—¶æ—¶é—´ Deadlineï¼›</li>
</ul>
<p>å¹¶å°†å®ƒå†™å…¥æˆ‘ä»¬çš„ tasks ä¸­ç”¨äºè·Ÿè¸ªä»»åŠ¡çŠ¶æ€ï¼›</p>
<p>æœ€åï¼Œå“åº”æˆ‘ä»¬çš„ Worker å³å¯ï¼</p>
<br>

<h4 id="å¤„ç†å‰ä¸€ä¸ªæäº¤çš„Task"><a href="#å¤„ç†å‰ä¸€ä¸ªæäº¤çš„Task" class="headerlink" title="å¤„ç†å‰ä¸€ä¸ªæäº¤çš„Task"></a><strong>å¤„ç†å‰ä¸€ä¸ªæäº¤çš„Task</strong></h4><p>å‰é¢è¯´åˆ°ï¼Œåœ¨ RPC çš„ç¬¬ä¸€æ­¥ï¼Œå¦‚æœå­˜åœ¨å‰ä¸€ä¸ªæäº¤çš„ä»»åŠ¡ï¼Œåˆ™ä¼šè°ƒç”¨ <code>handlePreviousTask</code> å¤„ç†ä¸Šä¸€ä¸ªä»»åŠ¡ï¼›</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹è¿™é‡Œï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">var (
    taskFinishHandlerMap = map[TaskTypeOpt]func(workerId string, taskIdx, reduceCnt int) error{
        TaskTypeMap:    handleFinishedMapTask,
        TaskTypeReduce: handleFinishedReduceTask,
    }
)

// handle the previous finished task
func (m *Master) handlePreviousTask(req *AckAndQueryNewTaskRequest) error {

    previousTaskId := generateTaskId(req.TaskType, req.PreviousTaskIndex)

    m.lock.Lock()
    defer m.lock.Unlock()
    taskInfo, exists := m.tasks[previousTaskId]
    if exists {
        if taskInfo.WorkerId == req.WorkerId { // This task belongs to the worker
            infof(&quot;Mark task [%v] finished on worker %s&quot;, taskInfo, req.WorkerId)

            // Step 1: Handle the previous finished task
            handler, handlerExists := taskFinishHandlerMap[taskInfo.Type]
            if !handlerExists || handler == nil {
                return fmt.Errorf(&quot;handler not found for task: %v&quot;, taskInfo)
            }
            err := handler(req.WorkerId, req.PreviousTaskIndex, m.reduceCnt)
            if err != nil {
                errorf(&quot;Failed to handle previous task: %v&quot;, err)
                return err
            }
            delete(m.tasks, previousTaskId)

            // Step 2: Transit job phase if necessary
            if len(m.tasks) &lt;= 0 {
                m.transit()
            }
            return nil
        } else { // The task is no longer belongs to this worker
            infof(&quot;Task %v is no longer belongs to this worker&quot;, taskInfo)
            return nil
        }
    } else { // Previous task not found in task map(worker retry ack maybe)!
        warnf(&quot;[Warn] Previous task: %v not found in map&quot;, taskInfo)
        return nil
    }
}</code></pre>
<p>é¦–å…ˆåˆ›å»ºä¸Šä¸€ä¸ªä»»åŠ¡çš„Idï¼špreviousTaskIdï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ Map ä¸­çš„ Keyï¼›</p>
<p>éšåï¼Œä» Map ä¸­å–å‡ºè¿™ä¸ª Taskï¼ˆå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ— éœ€å¤„ç†äº†ï¼ï¼‰ï¼›</p>
<p>æ¥ä¸‹æ¥æ ¡éªŒè¿™ä¸ªä»»åŠ¡æ˜¯å¦å±äºå½“å‰æäº¤ä»»åŠ¡çš„ Workerï¼ˆ<code>taskInfo.WorkerId == req.WorkerId</code>ï¼‰ï¼š</p>
<p>å¦‚æœå½“å‰ä»»åŠ¡å·²ç»ä¸å±äºå½“å‰æäº¤ä»»åŠ¡çš„ Workerï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰å³å¯ï¼</p>
<blockquote>
<p>  <font color="#f00"><strong>è¿™é‡Œå°±é¿å…äº†ç”±äº Fallover å¤„ç†è€Œå¯¼è‡´çš„å¤šä¸ª Worker åŒæ—¶å¤„ç†åŒä¸€ä¸ª Task å¹¶æäº¤çš„é—®é¢˜ï¼</strong></font></p>
</blockquote>
<p>å¦åˆ™ï¼Œè¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬éœ€è¦å¤„ç†çš„ Commitï¼Œé‚£ä¹ˆæˆ‘ä»¬ä» <code>taskFinishHandlerMap</code> ä¸­è·å–åˆ°ä¸åŒç±»å‹çš„ä»»åŠ¡å¯¹åº”çš„ Handler è¿›è¡Œå¤„ç†ï¼›</p>
<p>å½“å¤„ç†æˆåŠŸåï¼Œæˆ‘ä»¬ä» tasks ä¸­å»æ‰è¿™ä¸ªä»»åŠ¡ï¼›</p>
<p>å¹¶ä¸”å¦‚æœå½“å‰æ‰€æœ‰çš„ä»»åŠ¡éƒ½å·²å¤„ç†å®Œæˆï¼Œé‚£ä¹ˆè°ƒç”¨ <code>transit</code> æ¥æ¨è¿›æ•´ä¸ª Job çš„çŠ¶æ€ï¼›</p>
<br>

<h4 id="å¤„ç†Mapå’ŒReduceç±»å‹ä»»åŠ¡çš„Handler"><a href="#å¤„ç†Mapå’ŒReduceç±»å‹ä»»åŠ¡çš„Handler" class="headerlink" title="å¤„ç†Mapå’ŒReduceç±»å‹ä»»åŠ¡çš„Handler"></a><strong>å¤„ç†Mapå’ŒReduceç±»å‹ä»»åŠ¡çš„Handler</strong></h4><p>å¯¹äºä¸åŒçš„ä»»åŠ¡ç±»å‹çš„å¤„ç†å‡½æ•°æ˜¯é€šè¿‡ä¸‹é¢çš„ Map ä¸­è·å–çš„ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">var (
    taskFinishHandlerMap = map[TaskTypeOpt]func(workerId string, taskIdx, reduceCnt int) error{
        TaskTypeMap:    handleFinishedMapTask,
        TaskTypeReduce: handleFinishedReduceTask,
    }
)</code></pre>
<p>è¿™ä¸¤ä¸ªå‡½æ•°çš„å®ç°å¦‚ä¸‹ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">// The map-type task finished handler
func handleFinishedMapTask(workerId string, taskIdx, reduceCnt int) error {
    // Mark the task&#39;s temporary file to final file(Rename)
    for reduceIdx := 0; reduceIdx &lt; reduceCnt; reduceIdx++ {
        tmpMapFileName := tmpMapOutFile(workerId, taskIdx, reduceIdx)
        finalMapOutFileName := finalMapOutFile(taskIdx, reduceIdx)
        err := os.Rename(tmpMapFileName, finalMapOutFileName)
        if err != nil {
            errorf(&quot;Failed to mark map output file `%s` as final: %e&quot;, tmpMapFileName, err)
            return err
        }
    }

    infof(&quot;handleFinishedMapTask success: workerId: %s, taskIdx: %d&quot;, workerId, taskIdx)

    return nil
}

// The reduce-type task finished handler
func handleFinishedReduceTask(workerId string, taskIdx, _ int) error {
    // Mark the task&#39;s temporary file to final file(Rename)
    tmpReduceFileName := tmpReduceOutFile(workerId, taskIdx)
    finalReduceOutFileName := finalReduceOutFile(taskIdx)
    err := os.Rename(tmpReduceFileName, finalReduceOutFileName)
    if err != nil {
        errorf(&quot;Failed to mark reduce output file `%s` as final: %v&quot;, tmpReduceFileName, err)
        return err
    }

    infof(&quot;handleFinishedReduceTask success: workerId: %s, taskIdx: %d, finalReduceOutFileName: %s&quot;,
        workerId, taskIdx, finalReduceOutFileName)

    return nil
}

// The temporary file that map-type task yield
func tmpMapOutFile(workerId string, taskIdx, reduceIdx int) string {
    return fmt.Sprintf(&quot;mr-map-%s-%d-%d&quot;, workerId, taskIdx, reduceIdx)
}

// The final file that map-type task yield(for reduce)
func finalMapOutFile(taskIdx, reduceIdx int) string {
    return fmt.Sprintf(&quot;mr-map-%d-%d&quot;, taskIdx, reduceIdx)
}

// The temporary file that reduce-type task yield
func tmpReduceOutFile(workerId string, reduceIdx int) string {
    return fmt.Sprintf(&quot;mr-reduce-%s-%d&quot;, workerId, reduceIdx)
}

// The final file that reduce-type task yield(the MapReduce task yield)
func finalReduceOutFile(taskIndex int) string {
    return fmt.Sprintf(&quot;mr-out-%d&quot;, taskIndex)
}</code></pre>
<p>ä¸¤ä¸ªå‡½æ•°çš„å†…å®¹åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼š</p>
<p><strong>éƒ½æ˜¯é¦–å…ˆé€šè¿‡ä»»åŠ¡ Id è·å–åˆ°å¯¹åº”è¾“å‡ºçš„ä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åå°†å…¶é‡å‘½åä¸ºå¯¹åº”ä»»åŠ¡çš„æœ€ç»ˆäº§å‡ºæ–‡ä»¶</strong>ï¼</p>
<p><strong>è¿™å’Œæˆ‘ä»¬æœ€å¼€å§‹çš„åˆ†ææ˜¯ä¸€è‡´çš„ï¼</strong></p>
<br>

<h4 id="Jobä»»åŠ¡çŠ¶æ€åˆ‡æ¢transit"><a href="#Jobä»»åŠ¡çŠ¶æ€åˆ‡æ¢transit" class="headerlink" title="Jobä»»åŠ¡çŠ¶æ€åˆ‡æ¢transit"></a><strong>Jobä»»åŠ¡çŠ¶æ€åˆ‡æ¢transit</strong></h4><p>åœ¨å‰é¢çš„ RPC è°ƒç”¨ä¸­ï¼Œå¦‚æœå‘ç°æŸä¸ªç±»å‹ï¼ˆMapã€Reduceï¼‰å½“å‰çš„ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œåˆ™ä¼šè°ƒç”¨ <code>transit</code> å‡½æ•°åˆ‡æ¢å½“å‰ Job çš„çŠ¶æ€ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">// Transit the job phase (from Map to Reduce)
func (m *Master) transit() {

    if m.status == TaskTypeMap {
        // All map-type tasks finished, change to reduce phase
        infof(&quot;All map-type tasks finished. Transit to REDUCE stage!&quot;)
        m.status = TaskTypeReduce

        // Yield Reduce Tasks
        for reduceIdx := 0; reduceIdx &lt; m.reduceCnt; reduceIdx++ {
            task := &amp;TaskInfo{
                Type:  TaskTypeReduce,
                Index: reduceIdx,
            }
            m.tasks[generateTaskId(task.Type, task.Index)] = task
            m.availableTasks &lt;- task
        }
    } else if m.status == TaskTypeReduce {
        // All reduce-type tasks finished, ready to exit
        infof(&quot;All reduce-type tasks finished. Prepare to exit!&quot;)
        // Close channel
        close(m.availableTasks)
        // Mark status to TaskTypeFinished for job completion
        m.status = TaskTypeFinished
    }
}</code></pre>
<p>é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¦‚æœ Map ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œåˆ™å°†çŠ¶æ€åˆ‡æ¢ä¸º Reduceï¼Œå¹¶ä¸”é‡æ–°åˆ›å»º Reduce çš„ä»»åŠ¡ï¼›</strong></li>
<li><strong>å¦‚æœ Reduce ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œåˆ™å°†çŠ¶æ€åˆ‡æ¢ä¸º Finishedï¼Œå¹¶ä¸”å…³é—­ availableTasks Channelï¼›</strong></li>
</ul>
<br>

<h4 id="WorkerçŠ¶æ€è½®è¯¢"><a href="#WorkerçŠ¶æ€è½®è¯¢" class="headerlink" title="WorkerçŠ¶æ€è½®è¯¢"></a><strong>WorkerçŠ¶æ€è½®è¯¢</strong></h4><p>å‰é¢åœ¨åˆ›å»ºå¹¶åˆå§‹åŒ– Master çš„æ—¶å€™è¯´åˆ°ï¼Œåˆå§‹åŒ– Master åï¼Œä¼šå•ç‹¬èµ·ä¸€ä¸ªåç¨‹å»è½®è¯¢ Worker çš„çŠ¶æ€ï¼Œç”¨äºæ¸…ç†é‚£äº›è¶…æ—¶çš„ Workerï¼›</p>
<p>è¿™é‡Œæ¥çœ‹è¿™ä¸ª <code>checkWorkers</code> å‡½æ•°ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">// Check all workers heartbeats
func (m *Master) checkWorkers() {

    m.lock.Lock()
    defer m.lock.Unlock()
    for _, task := range m.tasks {
        if task.WorkerId != &quot;&quot; &amp;&amp; time.Now().After(task.Deadline) {
            infof(
                &quot;Found timed-out taskï¼š%v, previously running on worker %s. Prepare to re-assign...&quot;,
                task, task.WorkerId)
            task.WorkerId = &quot;&quot;
            m.availableTasks &lt;- task
        }
    }
}</code></pre>
<p>ä¸»è¦æ˜¯éå† tasks ä¸­çš„ä»»åŠ¡ï¼Œå¦‚æœå‘ç°è¶…æ—¶çš„ï¼ˆ<code>time.Now().After(task.Deadline)</code>ï¼‰ï¼Œåˆ™å°†å…¶ <code>WorkerId</code> ç½®ä¸ºç©ºï¼Œå¹¶æ”¾å…¥ availableTasks Channel ä¸­é‡æ–°åˆ†é…ä»»åŠ¡ï¼›</p>
<blockquote>
<p>  <font color="#f00"><strong>è¿™é‡Œå…¶å®æ˜¯å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œå³ï¼šä½¿ç”¨å°æ ¹å †ä» <code>Deadline</code> æœ€æ—©çš„ä¸€ä¸ªä»»åŠ¡è¿›è¡Œéå†æ¥å‡å°‘å¼€é”€ï¼›</strong></font></p>
</blockquote>
<br>

<h4 id="å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œç»“æŸé€€å‡ºDone"><a href="#å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œç»“æŸé€€å‡ºDone" class="headerlink" title="å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œç»“æŸé€€å‡ºDone"></a><strong>å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œç»“æŸé€€å‡ºDone</strong></h4><p>æœ€åï¼Œå½“å…¨éƒ¨ä»»åŠ¡ç»“æŸåï¼ŒMaster çš„çŠ¶æ€ä¼šå˜ä¸ºï¼š<code>Finished</code>ï¼›</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­æˆ‘ä»¬ Master å½“å‰çš„çŠ¶æ€æ˜¯å¦ä¸º <code>Finished</code> å³å¯ï¼š</p>
<p>src/mr/master.go</p>
<pre><code class="go">// main/mrmaster.go calls Done() periodically to find out
// if the entire job has finished.
func (m *Master) Done() bool {
    m.lock.RLock()
    defer m.lock.RUnlock()

    taskPhase := m.status
    infof(&quot;current task phase: %s, res task count: %d&quot;, taskPhase, len(m.availableTasks))

    // All tasks have finished
    return taskPhase == TaskTypeFinished
}</code></pre>
<br>

<h3 id="Workerè®¡ç®—"><a href="#Workerè®¡ç®—" class="headerlink" title="Workerè®¡ç®—"></a><strong>Workerè®¡ç®—</strong></h3><p>Worker çš„å®ç°å°±æ¯”è¾ƒç®€å•äº†ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸æ–­åœ°å‘ Master è°ƒç”¨ AckAndQueryNewTaskï¼š</p>
<ul>
<li>Master è¿”å› MAP Taskï¼Œåˆ™ï¼š<ul>
<li>è¯»å–å¯¹åº”è¾“å…¥æ–‡ä»¶çš„å†…å®¹ï¼›</li>
<li>ä¼ é€’è‡³ APP æŒ‡å®šçš„ Map å‡½æ•°ï¼Œå¾—åˆ°å¯¹åº”çš„ä¸­é—´ç»“æœï¼›</li>
<li>æŒ‰ä¸­é—´ç»“æœ Key çš„ Hash å€¼è¿›è¡Œåˆ†æ¡¶ï¼Œä¿å­˜è‡³ä¸­é—´ç»“æœæ–‡ä»¶ï¼›</li>
<li>å‘ Master æäº¤ä»»åŠ¡ï¼›</li>
</ul>
</li>
<li>Master è¿”å› REDUCE Taskï¼Œåˆ™ï¼š<ul>
<li>è¯»å–æ‰€æœ‰å±äºè¯¥ REDUCE Task çš„ä¸­é—´ç»“æœæ–‡ä»¶æ•°æ®ï¼›</li>
<li>å¯¹æ‰€æœ‰ä¸­é—´ç»“æœè¿›è¡Œæ’åºï¼Œå¹¶æŒ‰ Key å€¼è¿›è¡Œæ’åºå½’å¹¶ï¼›</li>
<li>ä¼ é€’å½’å¹¶åçš„æ•°æ®è‡³ APP æŒ‡å®šçš„ REDUCE å‡½æ•°ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœï¼›</li>
<li>å†™å‡ºåˆ°ä¸­é—´ç»“æœæ–‡ä»¶ï¼›</li>
<li>å‘ Master æäº¤ä»»åŠ¡ï¼›</li>
</ul>
</li>
<li>Master è¿”å› Finished Taskï¼Œè¡¨ç¤ºæ‰€æœ‰ä»»åŠ¡éƒ½å·²ç»å®Œæˆï¼Œç›´æ¥é€€å‡ºå¾ªç¯ï¼Œç»“æŸ Worker è¿›ç¨‹ï¼›</li>
</ul>
<p>ä¸‹é¢å…ˆæ¥çœ‹ Worker åˆå§‹åŒ–çš„ä»£ç ï¼›</p>
<br>

<h4 id="åˆå§‹åŒ–Worker"><a href="#åˆå§‹åŒ–Worker" class="headerlink" title="åˆå§‹åŒ–Worker"></a><strong>åˆå§‹åŒ–Worker</strong></h4><p>åœ¨ <code>main/mrworker.go</code> ä¸­è°ƒç”¨ <code>Worker</code> å‡½æ•°å¯¹ Worker è¿›è¡Œåˆå§‹åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>src/mr/worker.go</p>
<pre><code class="go">// main/mrworker.go calls this function.
func Worker(mapFunc func(string, string) []KeyValue,
    reduceFunc func(string, []string) string) {

    // Done Your worker implementation here.
    workerId := generateWorkerId()
    infof(&quot;Worker %v started!\n&quot;, workerId)

    // Fire the worker to receive tasks
    var previousTaskType TaskTypeOpt
    var previousTaskIndex int
    var taskErr error
    for {
        // Step 1: Query Task &amp; Ack the last task
        req := AckAndQueryNewTaskRequest{
            WorkerId:          workerId,
            PreviousTaskIndex: previousTaskIndex,
            TaskType:          previousTaskType,
        }
        resp := AckAndQueryNewTaskResponse{}
        succeed := call(&quot;Master.AckAndQueryNewTask&quot;, &amp;req, &amp;resp)
        if !succeed {
            errorf(&quot;Failed to call AckAndQueryNewTask, retry 1 second later&quot;)
            time.Sleep(time.Second)
            continue
        }
        infof(&quot;Call AckAndQueryNewTaskResponse success! req: %v, resp: %v&quot;, &amp;req, &amp;resp)

        // Extra Step: Job finished, exit
        if resp.Task.Type == TaskTypeFinished {
            // Job finished, exit
            infof(&quot;Received job finish signal from master, exit&quot;)
            break
        }

        // Step 2: handle the queried task
        if resp.Task.Type == TaskTypeMap {
            taskErr = handleMapTask(&amp;resp, workerId, mapFunc)
            if taskErr != nil {
                errorf(&quot;Failed to handleMapTask: %v, err: %v&quot;, resp.Task, taskErr)
                continue
            }
        } else if resp.Task.Type == TaskTypeReduce {
            taskErr = handleReduceTask(&amp;resp, workerId, reduceFunc)
            if taskErr != nil {
                errorf(&quot;Failed to handleReduceTask: %v, err: %v&quot;, resp.Task, taskErr)
                continue
            }
        } else {
            errorf(&quot;No handler to handle task: %v&quot;, resp.Task)
            continue
        }

        // Step 3: save finished task info, ack for the next iteration
        previousTaskType = resp.Task.Type
        previousTaskIndex = resp.Task.Index
        infof(&quot;Finished task: %v on worker: %s\n&quot;, resp.Task, workerId)
    }

    infof(&quot;Worker %v finished!\n&quot;, workerId)
}

// Use pid as the workerId(standalone type)
func generateWorkerId() string {
    return strconv.Itoa(os.Getpid())
}</code></pre>
<p>ä»£ç é¦–å…ˆé€šè¿‡ <code>generateWorkerId</code> å°†å½“å‰Workerçš„ PID ä½œä¸º WorkerIdï¼ˆä¾¿äºDebugæ’æŸ¥é—®é¢˜ï¼‰ï¼›</p>
<p>éšåï¼Œè¿›å…¥ for å¾ªç¯ä¸­ï¼Œé¦–å…ˆè°ƒç”¨ RPC è·å–ä»»åŠ¡ï¼›</p>
<blockquote>
<p>  <strong>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¦–æ¬¡è°ƒç”¨æ—¶ï¼Œ<code>previousTaskIndex</code>ã€<code>previousTaskType</code> éƒ½ä¸ºç©ºï¼Œæ‰€ä»¥ä¸ä¼šæäº¤ä»»åŠ¡ï¼›</strong></p>
</blockquote>
<p>åœ¨è·å–åˆ°ä»»åŠ¡ä¹‹åè¿›è¡Œåˆ¤æ–­ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯ <code>Finished</code> ç±»å‹çš„ä»»åŠ¡ï¼Œåˆ™ç›´æ¥é€€å‡ºï¼›</li>
<li>å¦‚æœæ˜¯ <code>Map</code> æˆ– <code>Reduce</code> ç±»å‹çš„ä»»åŠ¡ï¼Œåˆ™åˆ†åˆ«è°ƒç”¨ä¸åŒçš„å¤„ç†å‡½æ•°è¿›è¡Œå¤„ç†ï¼›</li>
</ul>
<p>æœ€åï¼Œå¦‚æœæˆåŠŸå¤„ç†äº†ä»»åŠ¡ï¼Œåˆ™å°†æœ¬æ¬¡çš„ä»»åŠ¡ä¿¡æ¯èµ‹å€¼ç»™ <code>previousTaskIndex</code>ã€<code>previousTaskType</code>ï¼Œåœ¨ä¸‹ä¸€ä¸ª for å¾ªç¯å¼€å§‹åï¼Œä¼šå¯¹ Task è¿›è¡Œ Commitï¼›</p>
<p>ä¸‹é¢æ¥çœ‹ Mapã€Reduceä»»åŠ¡çš„å¤„ç†ï¼›</p>
<br>

<h4 id="å¤„ç†Mapä»»åŠ¡"><a href="#å¤„ç†Mapä»»åŠ¡" class="headerlink" title="å¤„ç†Mapä»»åŠ¡"></a><strong>å¤„ç†Mapä»»åŠ¡</strong></h4><p>å’Œå®éªŒæä¾›çš„é¡ºåºæ‰§è¡Œçš„ MapReduce å®ç°ç±»ä¼¼ï¼Œè¿™é‡Œçš„ Map ä»»åŠ¡ä¹Ÿæ˜¯è¯»å– Task æŒ‡å®šçš„æ–‡ä»¶ï¼Œè°ƒç”¨ Map å‡½æ•°ï¼Œå¹¶è¾“å‡ºä¸´æ—¶çš„ä¸­é—´ç»“æœæ–‡ä»¶ï¼›</p>
<p>å’Œä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œéœ€è¦æ ¹æ® Reduce ä»»åŠ¡çš„ä¸ªæ•°å¯¹è¾“å‡ºè¿›è¡Œåˆ†æ¡¶æ“ä½œï¼Œè€Œå³ä½¿å¯¹åº”çš„ Key åœ¨å“ªä¸ª Bucket çš„å‡½æ•°ï¼Œå®éªŒä¹Ÿå·²ç»æä¾›äº†ï¼š<code>ihash</code>ï¼›</p>
<p>Map ä»»åŠ¡å¤„ç†ä»£ç å¦‚ä¸‹ï¼š</p>
<p>src/mr/worker.go</p>
<pre><code class="go">// The map-type task handler for worker
func handleMapTask(resp *AckAndQueryNewTaskResponse,
    workerId string, mapFunc func(string, string) []KeyValue) error {

    // Step 1: Read task file
    taskFile, err := os.Open(resp.Task.File)
    if err != nil {
        errorf(&quot;Failed to open map input file %s: %v&quot;, resp.Task.File, err)
        return err
    }
    content, err := ioutil.ReadAll(taskFile)
    if err != nil {
        errorf(&quot;Failed to read map input file %s: %v&quot;, resp.Task.File, err)
        return err
    }

    // Step 2: Use MapFunc to yield intermediate results
    // Key: FileName, Value: FileContent
    // Then Hash the key by ihash func, and push result into different buckets
    mapResults := mapFunc(resp.Task.File, string(content))
    hashedKva := make(map[int][]KeyValue)
    for _, kv := range mapResults {
        hashed := ihash(kv.Key) % resp.ReduceWorkerCnt
        hashedKva[hashed] = append(hashedKva[hashed], kv)
    }

    // Step 3: Writes all intermediate results into intermediate files
    for idx := 0; idx &lt; resp.ReduceWorkerCnt; idx++ {
        tmpFileName := tmpMapOutFile(workerId, resp.Task.Index, idx)
        intermediateFile, _ := os.Create(tmpFileName)
        for _, kv := range hashedKva[idx] {
            // The intermediate file format is: ${key}\t${value}\n
            _, err = fmt.Fprintf(intermediateFile, &quot;%v\t%v\n&quot;, kv.Key, kv.Value)
            if err != nil {
                errorf(&quot;Write intermediate file: %s failed, err: %v&quot;, intermediateFile, err)
                intermediateFile.Close()
                return err
            }
        }
        intermediateFile.Close()
    }

    infof(&quot;Worker[%s] writes intermediate files success, task: %v&quot;, workerId, resp.Task)

    return nil
}

// use ihash(key) % NReduce to choose the reducer
// task number for each KeyValue emitted by Map.
func ihash(key string) int {
    h := fnv.New32a()
    _, _ = h.Write([]byte(key))
    return int(h.Sum32() &amp; 0x7fffffff)
}</code></pre>
<p>ä»£ç é¦–å…ˆä» Task æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–å†…å®¹ï¼›</p>
<p>éšåè°ƒç”¨ APP ä¸­æä¾›çš„ <code>mapFunc</code>ï¼Œå¹¶å°†å¾—åˆ°çš„ Key å€¼è¿›è¡Œ <code>ihash(kv.Key) % resp.ReduceWorkerCnt</code> åï¼Œæ”¾å…¥åˆ°å¯¹åº”çš„ hashedKva æ¡¶ä¸­ï¼›</p>
<p>æœ€åï¼Œåˆ†æ¡¶å†™å…¥åˆ°äº†ä¸åŒçš„ä¸´æ—¶æ–‡ä»¶ä¸­ï¼</p>
<br>

<h4 id="å¤„ç†Reduceä»»åŠ¡"><a href="#å¤„ç†Reduceä»»åŠ¡" class="headerlink" title="å¤„ç†Reduceä»»åŠ¡"></a><strong>å¤„ç†Reduceä»»åŠ¡</strong></h4><p>Reduce ä»»åŠ¡çš„å®ç°ä¹Ÿä¸é¡ºåºæ‰§è¡Œçš„ MapReduce å®ç°ç±»ä¼¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>src/mr/worker.go</p>
<pre><code class="go">// The reduce-type task handler for worker
func handleReduceTask(resp *AckAndQueryNewTaskResponse,
    workerId string, reduceFunc func(string, []string) string) error {

    // Step 1: Read the corresponding file
    var lines []string
    for mi := 0; mi &lt; resp.MapWorkerCnt; mi++ {
        inputFile := finalMapOutFile(mi, resp.Task.Index)
        file, err := os.Open(inputFile)
        if err != nil {
            errorf(&quot;Failed to open map output file %s: %v&quot;, inputFile, err)
            return err
        }
        content, err := ioutil.ReadAll(file)
        if err != nil {
            errorf(&quot;Failed to read map output file %s: %v&quot;, inputFile, err)
            return err
        }
        lines = append(lines, strings.Split(string(content), &quot;\n&quot;)...)
    }

    // Step 2: Format the lines
    var mapResults []KeyValue
    for _, line := range lines {
        if strings.TrimSpace(line) == &quot;&quot; {
            continue
        }
        parts := strings.Split(line, &quot;\t&quot;)
        mapResults = append(mapResults, KeyValue{
            Key:   parts[0],
            Value: parts[1],
        })
    }

    // Step 3: Sort the results
    sort.Sort(ByKey(mapResults))

    // Step 4: Write the results(Just as the mrsequential.go do!)
    tmpFileName := tmpReduceOutFile(workerId, resp.Task.Index)
    tmpFile, _ := os.Create(tmpFileName)
    defer tmpFile.Close()

    // Step 5: Call Reduce on each distinct key in mapResults[], and write the intermediate result.
    i := 0
    for i &lt; len(mapResults) {
        // Step 5.1: Find the same key in mapResults
        j := i + 1
        for j &lt; len(mapResults) &amp;&amp; mapResults[j].Key == mapResults[i].Key {
            j++
        }
        var values []string
        for k := i; k &lt; j; k++ {
            values = append(values, mapResults[k].Value)
        }

        // Step 5.2: Call reduceFunc
        output := reduceFunc(mapResults[i].Key, values)

        // Step 5.3: Save the yield reduce results to intermediate files.
        _, _ = fmt.Fprintf(tmpFile, &quot;%v %v\n&quot;, mapResults[i].Key, output)

        i = j
    }

    return nil
}</code></pre>
<p>ç”±äºæ‰§è¡Œ Reduce ä»»åŠ¡æ—¶ï¼Œæ‰€æœ‰çš„ Map ä»»åŠ¡ä¸€å®šéƒ½æ˜¯è¢« Commit è¿‡çš„ï¼›</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ‰€æœ‰ Map ä»»åŠ¡æœ€ç»ˆ Commit ç”Ÿæˆçš„æ–‡ä»¶å¹¶è¯»å–å†…å®¹åˆ° <code>mapResults []KeyValue</code> ä¸­ï¼›</p>
<p>éšåï¼Œæ ¹æ®è®ºæ–‡çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œå¹¶å¯¹ç›¸åŒçš„ Key è¿›è¡Œå½’å¹¶ï¼›</p>
<p>æœ€åï¼Œå’Œä¸Šé¢ä¸€æ ·ï¼Œæˆ‘ä»¬å°† Reduce çš„ç»“æœè¾“å‡ºåˆ°ä¸´æ—¶çš„æ–‡ä»¶ï¼›</p>
<p>è‡³æ­¤ï¼ŒReduce ä»»åŠ¡ç»“æŸï¼</p>
<br>

<h2 id="æµ‹è¯•éªŒè¯"><a href="#æµ‹è¯•éªŒè¯" class="headerlink" title="æµ‹è¯•éªŒè¯"></a><strong>æµ‹è¯•éªŒè¯</strong></h2><p>å¼€å‘å®Œæˆåï¼Œæˆ‘ä»¬æ¥è¿›è¡Œæµ‹è¯•ï¼›</p>
<p>ç›´æ¥åœ¨ <code>src/main</code> ç›®å½•ä¸‹æ‰§è¡Œ <code>./test-mr.sh</code> å³å¯æµ‹è¯•ï¼›</p>
<blockquote>
<p>  <strong>åˆ«å¿˜äº†æ‰“å¼€ <code>RACE=-race</code>ï¼</strong></p>
</blockquote>
<p>é€šè¿‡æœ€åçš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ç”¨ä¾‹éƒ½é€šè¿‡äº†ï¼</p>
<pre><code>*** Starting wc test.
--- wc test: PASS
*** Starting indexer test.
--- indexer test: PASS
*** Starting map parallelism test.
--- map parallelism test: PASS
*** Starting reduce parallelism test.
--- reduce parallelism test: PASS
*** Starting crash test.
--- crash test: PASS
*** PASSED ALL TESTS</code></pre><p>åŒæ—¶è¾“å‡ºäº†å¤§é‡ INFO çº§åˆ«çš„æ—¥å¿—ï¼š</p>
<pre><code>2022/10/12 22:21:11 [INFO]master server started: &amp;{{{0 0} 0 0 0 0} Map 8 10 map[Map-0:0xc000078180 Map-1:0xc0000781e0 Map-2:0xc000078240 Map-3:0xc0000782a0 Map-4:0xc000078300 Map-5:0xc000078360 Map-6:0xc0000783c0 Map-7:0xc000078420] 0xc000078120}
2022/10/12 22:21:11 [INFO]current task phase: Map, res task count: 8
2022/10/12 22:21:12 [INFO]Worker 58334 started!

2022/10/12 22:21:12 [INFO]Worker 58333 started!

2022/10/12 22:21:12 [INFO]Worker 58335 started!

2022/10/12 22:21:12 [INFO]Assign task &amp;{Map-0 Map 0 ../pg-being_ernest.txt  0001-01-01 00:00:00 +0000 UTC} to worker 58333
2022/10/12 22:21:12 [INFO]Assign task &amp;{Map-1 Map 1 ../pg-dorian_gray.txt  0001-01-01 00:00:00 +0000 UTC} to worker 58334
2022/10/12 22:21:12 [INFO]Assign task &amp;{Map-2 Map 2 ../pg-frankenstein.txt  0001-01-01 00:00:00 +0000 UTC} to worker 58335
2022/10/12 22:21:12 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{0  58334}, resp: &amp;{0xc000114ae0 8 10}
2022/10/12 22:21:12 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{0  58333}, resp: &amp;{0xc0001329c0 8 10}
2022/10/12 22:21:12 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{0  58335}, resp: &amp;{0xc000076720 8 10}
2022/10/12 22:21:12 [INFO]current task phase: Map, res task count: 5
2022/10/12 22:21:13 [INFO]Worker[58333] writes intermediate files success, task: &amp;{Map-0 Map 0 ../pg-being_ernest.txt 58333 2022-10-12 22:21:22.861303 +0800 CST}
2022/10/12 22:21:13 [INFO]Finished task: &amp;{Map-0 Map 0 ../pg-being_ernest.txt 58333 2022-10-12 22:21:22.861303 +0800 CST} on worker: 58333

2022/10/12 22:21:13 [INFO]Mark task [&amp;{Map-0 Map 0 ../pg-being_ernest.txt 58333 2022-10-12 22:21:22.861303 +0800 CST m=+11.002276209}] finished on worker 58333
2022/10/12 22:21:13 [INFO]handleFinishedMapTask success: workerId: 58333, taskIdx: 0
2022/10/12 22:21:13 [INFO]Assign task &amp;{Map-3 Map 3 ../pg-grimm.txt  0001-01-01 00:00:00 +0000 UTC} to worker 58333
2022/10/12 22:21:13 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{0 Map 58333}, resp: &amp;{0xc000076360 8 10}
2022/10/12 22:21:13 [INFO]Worker[58335] writes intermediate files success, task: &amp;{Map-2 Map 2 ../pg-frankenstein.txt 58335 2022-10-12 22:21:22.861595 +0800 CST}
2022/10/12 22:21:13 [INFO]Finished task: &amp;{Map-2 Map 2 ../pg-frankenstein.txt 58335 2022-10-12 22:21:22.861595 +0800 CST} on worker: 58335

2022/10/12 22:21:13 [INFO]Mark task [&amp;{Map-2 Map 2 ../pg-frankenstein.txt 58335 2022-10-12 22:21:22.861595 +0800 CST m=+11.002569001}] finished on worker 58335
2022/10/12 22:21:13 [INFO]handleFinishedMapTask success: workerId: 58335, taskIdx: 2
2022/10/12 22:21:13 [INFO]Assign task &amp;{Map-4 Map 4 ../pg-huckleberry_finn.txt  0001-01-01 00:00:00 +0000 UTC} to worker 58335
2022/10/12 22:21:13 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{2 Map 58335}, resp: &amp;{0xc0000ba7e0 8 10}
2022/10/12 22:21:13 [INFO]Worker[58334] writes intermediate files success, task: &amp;{Map-1 Map 1 ../pg-dorian_gray.txt 58334 2022-10-12 22:21:22.861488 +0800 CST}
2022/10/12 22:21:13 [INFO]Finished task: &amp;{Map-1 Map 1 ../pg-dorian_gray.txt 58334 2022-10-12 22:21:22.861488 +0800 CST} on worker: 58334

2022/10/12 22:21:13 [INFO]Mark task [&amp;{Map-1 Map 1 ../pg-dorian_gray.txt 58334 2022-10-12 22:21:22.861488 +0800 CST m=+11.002462043}] finished on worker 58334
2022/10/12 22:21:13 [INFO]handleFinishedMapTask success: workerId: 58334, taskIdx: 1
2022/10/12 22:21:13 [INFO]Assign task &amp;{Map-5 Map 5 ../pg-metamorphosis.txt  0001-01-01 00:00:00 +0000 UTC} to worker 58334
2022/10/12 22:21:13 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{1 Map 58334}, resp: &amp;{0xc000098420 8 10}
2022/10/12 22:21:13 [INFO]Worker[58334] writes intermediate files success, task: &amp;{Map-5 Map 5 ../pg-metamorphosis.txt 58334 2022-10-12 22:21:23.568509 +0800 CST}
2022/10/12 22:21:13 [INFO]Finished task: &amp;{Map-5 Map 5 ../pg-metamorphosis.txt 58334 2022-10-12 22:21:23.568509 +0800 CST} on worker: 58334

......

2022/10/12 22:22:25 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{2 Reduce 58551}, resp: &amp;{0xc000188240 0 0}
2022/10/12 22:22:25 [INFO]Received job finish signal from master, exit
2022/10/12 22:22:25 [INFO]Worker 58551 finished!

2022/10/12 22:22:26 [INFO]current task phase: Finished, res task count: 0
2022/10/12 22:22:26 [INFO]Worker 58818 started!

2022/10/12 22:22:26 [INFO]Worker 58817 started!

2022/10/12 22:22:26 [INFO]Worker 58820 started!

2022/10/12 22:22:26 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{0  58818}, resp: &amp;{0xc00007a720 0 0}
2022/10/12 22:22:26 [INFO]Received job finish signal from master, exit
2022/10/12 22:22:26 [INFO]Worker 58818 finished!

2022/10/12 22:22:26 [INFO]Call AckAndQueryNewTaskResponse success! req: &amp;{0  58817}, resp: &amp;{0xc00013aae0 0 0}
2022/10/12 22:22:26 [INFO]Received job finish signal from master, exit
2022/10/12 22:22:26 [INFO]Worker 58817 finished!</code></pre><p>ä»æ—¥å¿—ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæœ€ç»ˆ Master å’Œ Worker éƒ½æˆåŠŸçš„é€€å‡ºäº†ï¼</p>
<br>

<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a><strong>åè®°</strong></h2><p>ä¸Šé¢å°±æ˜¯ Lab1 çš„åŸºæœ¬å®ç°äº†ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªå°æŠ€å·§å°±æ˜¯ï¼Œ<strong>å¤§é‡æ‰“å°æ—¥å¿—</strong>ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ï¼›</p>
<p>åŒæ—¶ï¼Œåœ¨å†™ä»£ç ä¹‹å‰ï¼Œè¦æå‰è§„åˆ’å¥½ä»£ç ï¼Œç»„ç»‡å¥½é€»è¾‘ä¹‹åå†åŠ¨æ‰‹ï¼Œæ•ˆç‡åè€Œé«˜å¾ˆå¤šï¼</p>
<br>

<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a><strong>é™„å½•</strong></h1><p>æºä»£ç æ ¹æ® MIT å®éªŒçš„è¦æ±‚ï¼Œæ˜¯ä¸€ä¸ªPrivateçš„ repo æ²¡æœ‰å…¬å¼€ï¼Œéœ€è¦æºä»£ç çš„å¯ä»¥è”ç³»æˆ‘ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·äº¤æµï½</p>
<p>è§†é¢‘å­¦ä¹ åœ°å€ï¼š</p>
<ul>
<li><a href="https://www.bilibili.com/video/BV1R7411t71W/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1R7411t71W/</a></li>
</ul>
<br>


  </article>

  <div id="like-container" style="text-align: center">
    <div class="like-feed">
      <p>è§‰å¾—æœ¬æ–‡ä¸é”™å°±ç‚¹ä¸ª<span>â™¥</span>å†èµ°å§~</p>
      <div class="like-img">
        <div class="like-heart" id="like" rel="like"></div>
        <div class="like-count" id="like-count"></div>
      </div>
    </div>
  </div>

  <!-- æ–‡ç« åˆ†äº« -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
  <div class="social-share" data-mode="prepend" data-disabled="tencent,diandian"></div>
  <br>

  
  
<div class="nexmoe-post-copyright">
<i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
<strong>æœ¬æ–‡ä½œè€…ï¼š</strong>Jasonkay<br>
<strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://jasonkayzk.github.io/2022/10/08/mit-6-824-lab1-MapReduceæ€»ç»“/" title="https://jasonkayzk.github.io/2022/10/08/mit-6-824-lab1-MapReduceæ€»ç»“/" target="_blank" rel="noopener">https://jasonkayzk.github.io/2022/10/08/mit-6-824-lab1-MapReduceæ€»ç»“/</a><br>

  <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯

</div>


  

  <!-- å¢åŠ é¢è¯•ç‚¹å‡»æ ‡é¢˜æ‰æ˜¾ç¤ºç­”æ¡ˆç­‰æ•ˆæœ! -->
  <!-- <script type="text/javascript">
    $(".question").click(function () {
      var a = $(".answer").eq($(".question").index(this));
      a.is(".answer_shown") ? a.animate({ 'opacity': '1' }, 800).removeClass("answer_shown") : a.animate({ 'opacity': '0' }, 800).addClass("answer_shown");
    });
  </script> -->
  <!-- <style>
    .answer_shown {
      opacity: 0;
    }
  </style> -->

  <!-- åŠ è½½åšå®¢ç‚¹èµåŠŸèƒ½ -->
  <script>
    function ajax(options) {
      return new Promise(function (resolve, reject) {
        $.ajax(options).done(resolve).fail(reject);
      });
    }

    var docName = $('meta[property="og:title"]').attr('content');
    
    // è·³è¿‡localhost
    if (location.hostname !== 'localhost') {
      // åˆå§‹åŒ–
      ajax({
        url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
        type: 'post',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({
          "actionId": "get",
          "docName": docName
        })
      }).then(
        function fulfillHandler(data) {
          $('#like-count').text(data.likeNum);
        },
        function rejectHandler(jqXHR, textStatus, errorThrown) {
          $('#like-count').text(0);
          console.log(jqXHR, textStatus, errorThrown);
        }
      ).catch(function errorHandler(error) {
        $('#like-count').text(0);
        console.log(error);
      });

      $(document).ready(function () {
        $(".like-heart").on("click", function () {
          var heart = $(this);
          var likeCount = $("#like-count" + heart.attr("id").split("like")[1]);
          var intCount = parseInt(likeCount.html());
          var rel = heart.attr("rel");

          if (rel === "like") {
            likeCount.html(intCount + 1);
            heart.addClass("like-heartAnimation").attr("rel", "unlike");
            ajax({
              url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
              type: 'post',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({
                "actionId": "add",
                "docName": docName
              })
            }).catch(function errorHandler(error) {
              console.log(error);
            });
          } else {
            likeCount.html(intCount - 1);
            heart.removeClass("like-heartAnimation").attr("rel", "like");
            heart.css("background-position", "left");
            ajax({
              url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
              type: 'post',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({
                "actionId": "subtract",
                "docName": docName
              })
            }).catch(function errorHandler(error) {
              console.log(error);
            });
          }
        }).on("mouseleave", function () {
          $(this).css("background-position", "");
        });
      });
    }
  </script>
  <style>
    #like-container {
      margin: 0 auto;
      width: 100%;
    }

    .like-img {
      width: 200px;
      height: 100px;
      display: inline-block;
    }

    .like-heart {
      float: left;
      background: url(/images/web_heart_animation.png);
      background-position: left;
      background-repeat: no-repeat;
      height: 50px;
      width: 120px;
      left: -14px;
      background-size: 2900%;
    }

    .like-count {
      float: left;
      font-family: 'Georgia', Times, Times New Roman, serif;
      font-size: 35px;
      color: #999999;
      text-align: left;
      height: 50px;
      width: 50px;
      line-height: 44px;
    }

    .like-heart:hover,
    .like-heart:focus {
      background-position: right;
    }

    @-webkit-keyframes heartBlast {
      0% {
        background-position: left;
      }

      100% {
        background-position: right;
      }
    }

    @keyframes heartBlast {
      0% {
        background-position: left;
      }

      100% {
        background-position: right;
      }
    }

    .like-heartAnimation {
      display: inline-block;
      -webkit-animation-name: heartBlast;
      animation-name: heartBlast;
      -webkit-animation-duration: .8s;
      animation-duration: .8s;
      -webkit-animation-iteration-count: 1;
      animation-iteration-count: 1;
      -webkit-animation-timing-function: steps(28);
      animation-timing-function: steps(28);
      background-position: right;
    }

    .like-feed {
      height: 90px;
      margin-bottom: 20px;
      text-align: center
    }

    .like-feed p {
      font-family: 'microsoft yahei', 'Georgia';
      font-size: 25px;
    }

    .like-feed span {
      font-size: 30px;
      color: #D33115;
    }
  </style>

  <section class="nexmoe-comment">
    <div class="utterances"></div>
<style>
    .v .vwrap {
      border: 1px dashed #c4bfbf
    }
  
    .v .vwrap .vheader .vinput {
      border-bottom: 1px dashed #c4bfbf
    }
</style>
<script src="https://utteranc.es/client.js" repo="JasonkayZK/JasonkayZK.github.io" issue-term="title" label="commentâœ¨ğŸ’¬âœ¨" theme="github-light" crossorigin="anonymous" async>
</script>

</section>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/app.js?v=1770725317037"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>




  
    <!-- Google Analytics -->
<script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'G-1NWK4EEKDF', 'auto');
    ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>






    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5f5ec71a32c11ff54dff64d0341017b0";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<!-- 
<script type="text/javascript">
  !function (e, t, a) { function n() { c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), o(), r() } function r() { for (var e = 0; e < d.length; e++)d[e].alpha <= 0 ? (t.body.removeChild(d[e].el), d.splice(e, 1)) : (d[e].y--, d[e].scale += .004, d[e].alpha -= .013, d[e].el.style.cssText = "left:" + d[e].x + "px;top:" + d[e].y + "px;opacity:" + d[e].alpha + ";transform:scale(" + d[e].scale + "," + d[e].scale + ") rotate(45deg);background:" + d[e].color + ";z-index:99999"); requestAnimationFrame(r) } function o() { var t = "function" == typeof e.onclick && e.onclick; e.onclick = function (e) { t && t(), i(e) } } function i(e) { var a = t.createElement("div"); a.className = "heart", d.push({ el: a, x: e.clientX - 5, y: e.clientY - 5, scale: 1, alpha: 1, color: s() }), t.body.appendChild(a) } function c(e) { var a = t.createElement("style"); a.type = "text/css"; try { a.appendChild(t.createTextNode(e)) } catch (t) { a.styleSheet.cssText = e } t.getElementsByTagName("head")[0].appendChild(a) } function s() { return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")" } var d = []; e.requestAnimationFrame = function () { return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) { setTimeout(e, 1e3 / 60) } }(), n() }(window, document);
</script>
 -->
 
<script>
  // è¿›åº¦æ¡åŠ è½½: nprogress
  NProgress.start()
  NProgress.done()
</script>

<script type="text/javascript" defer>
  $(document).ready(function () {
    $.goup({
      trigger: 100,
      bottomOffset: 50,
      locationOffset: 50,
      title: '0%',
      titleAsText: true
    });
    $(".goup-container").css("background", "#64dcf0 none repeat scroll 0% 0%").css("opacity", 0.9);
    $(".goup-text").css("font-weight", 600).css("opacity", 0.9);
  });

  $(document).scroll(function () {
    var d_h = $(document).height();
    var c_h = $(window).height();
    var c_t_h = $(window).scrollTop();
    var schedule = c_t_h / (d_h - c_h - 0.5);
    var str = Number(schedule * 100).toFixed();
    str += "%";
    $(".goup-text").text(str);
  });
</script>

<!-- ç«™å†…é€šçŸ¥ -->
<script src="/js/notification.js"></script>
<script>
  'use strict';

  (function () {
    $(function () {
      $('.position').click(function (event) {
        var el = $(event.target);
        $('.position').removeClass('selected');
        el.addClass('selected');
        position = el.attr('data-position');
      });
    });
  });

  var position = 2;
  // å…³é—­ç™¾æ¯«ç§’æ•°
  var closeTime = 50;
  var notifyFunc = function () {
    // Notification.create(
    //   //Â Title
    //   "Tencentå†…æ¨ä¸­ğŸ“§",
    //   //Â Text
    //   "ç®€å†æŠ•é€’å¤„ï¼š<BR/><a href='/hiring/'>ç®€å†æŠ•é€’</a>",
    //   //Â Illustration
    //   "/images/avatar4.jpg",
    //   //Â Effect
    //   'fadeInRight',
    //   //Â PositionÂ 1, 2,Â 3,Â 4
    //   position,
    //   closeTime
    // );
    // setTimeout(() => {
    //   Notification.create(
    //     "èµ„æºä¸‹è½½âš¡",
    //     "ä¼ é€é—¨ï¼š<BR/><a href='/sharing/'>æ–‡ä»¶åˆ†äº«</a>",
    //     "/images/avatar4.jpg",
    //     'fadeInRight',
    //     position,
    //     closeTime
    //   )
    // }, 350);
    setTimeout(() => {
      Notification.create(
        "RSSè®¢é˜…ğŸ“¢",
        "ä¼ é€é—¨ï¼š<BR/><a href='/atom.xml'>RSSè®¢é˜…</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 0);
    setTimeout(() => {
        Notification.create(
        "åœ¨çº¿ç¾¤èŠğŸ’­",
        "ä¼ é€é—¨ï¼š<BR/><a href='/chat/'>ç•…æ‰€æ¬²è¨€</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 350);
    setTimeout(() => {
        Notification.create(
        // "è·‘æ­¥å¥èº«ğŸƒ",
        // "ä¼ é€é—¨ï¼š<BR/><a href='/running/'>è·‘æ­¥å¥èº«</a>",
        "æ‘„å½±åˆ†äº«ğŸ“·",
        "ä¼ é€é—¨ï¼š<BR/><a href='http://159.75.131.252:32352/'>æ‘„å½±åˆ†äº«</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 700);
  };

  (function once() {
    if (sessionStorage.getItem('load') == null) {
      notifyFunc();
      sessionStorage.setItem('load', false);
    } else {
      return;
    }
  })();
</script>
<script>
  $(document).on("click", ".dismiss", function (e) {
    Notification.hide(e.currentTarget.classList[1].split('-')[1]);
  })
</script>

</html>