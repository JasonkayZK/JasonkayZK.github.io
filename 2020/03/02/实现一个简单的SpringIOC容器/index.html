<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="/js/jquery.goup.min.js" defer></script>
  
  <title>å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨ - å¼ å°å‡¯çš„åšå®¢</title>
  <meta charset="UTF-8">
  <meta name="description" content="è¬™è™šã¯äººã‚’é€²æ­©ã•ã›ã€ã”ã†ã¾ã‚“ã¯äººã‚’è½å¾Œã•ã›ã‚‹ã€‚ç¤¾ä¼šã®åˆå¿ƒè€…ã‹ã‚‰ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png">
  <meta name="description" content="Springä¸­æ ¸å¿ƒçš„æ€æƒ³å³IoCå’ŒAOP. ä¸ºäº†æ›´å¥½çš„ç†è§£å…³äºSpring IoCåº•å±‚å®ç°, æ‰“ç®—æ ¹æ®Spring 5.xçš„æºç å®ç°ä¸€ä¸ªç®€å•çš„Spring IoCå®¹å™¨">
<meta name="keywords" content="Spring,Springæºç ">
<meta property="og:type" content="article">
<meta property="og:title" content="å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨">
<meta property="og:url" content="https://jasonkayzk.github.io/2020/03/02/å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨/index.html">
<meta property="og:site_name" content="å¼ å°å‡¯çš„åšå®¢">
<meta property="og:description" content="Springä¸­æ ¸å¿ƒçš„æ€æƒ³å³IoCå’ŒAOP. ä¸ºäº†æ›´å¥½çš„ç†è§£å…³äºSpring IoCåº•å±‚å®ç°, æ‰“ç®—æ ¹æ®Spring 5.xçš„æºç å®ç°ä¸€ä¸ªç®€å•çš„Spring IoCå®¹å™¨">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2026-02-10T12:07:45.761Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨">
<meta name="twitter:description" content="Springä¸­æ ¸å¿ƒçš„æ€æƒ³å³IoCå’ŒAOP. ä¸ºäº†æ›´å¥½çš„ç†è§£å…³äºSpring IoCåº•å±‚å®ç°, æ‰“ç®—æ ¹æ®Spring 5.xçš„æºç å®ç°ä¸€ä¸ªç®€å•çš„Spring IoCå®¹å™¨">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/atom-one-dark.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1770725349624">

  <!-- è¿›åº¦æ¡åŠ è½½: nprogress -->
  <link href="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6617852905105366" crossorigin="anonymous"></script>
  <!-- Cloudflare Web Analytics -->
   <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{"token": "73d46a730654451bac205cdc12bea918"}"></script>
  <!-- umami Web Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="23fadd4b-d559-4ae0-a4f6-f90680c3d4c0"></script>

  <!-- æœ¬åœ°æœç´¢js -->
  <script type="text/javascript" src="/js/search.js"></script>

  <!-- ç™¾åº¦ç«™ç‚¹ç®¡ç† -->
  <meta name="baidu-site-verification" content="code-SKIvb4A1Qx">

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1NWK4EEKDF');
  </script>

  <!-- ç«™å†…é€šçŸ¥ -->
  <link href="https://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="/css/default.css">
  <link rel="stylesheet" href="/css/animate.min.css">
  <link rel="stylesheet" href="/css/notification.css">
  <link rel="stylesheet" href="/css/index.css">
<link rel="alternate" href="/atom.xml" title="å¼ å°å‡¯çš„åšå®¢" type="application/atom+xml">
</head>

<!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡æ ·å¼ -->
<style>
  #content_progress {
      /* Positioning */
      position: fixed;
      left: 0;
      top: 0;
      z-index: 99999;
      width: 100%;
      height: 3px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border: none;
      background-color: transparent;
      color: #ffaa73;
}

#content_progress::-webkit-progress-bar {
      background-color: transparent;
}

#content_progress::-webkit-progress-value {
      background-color: #ffaa73;
}

#content_progress::-moz-progress-bar {
      background-color:#ffaa73;
}
</style>
<!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡JS -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      var winHeight = window.innerHeight,
            docHeight = document.documentElement.scrollHeight,
            progressBar = document.querySelector('#content_progress');
      progressBar.max = docHeight - winHeight;
      progressBar.value = window.scrollY;

      document.addEventListener('scroll', function () {
            progressBar.max = document.documentElement.scrollHeight - window.innerHeight;
            progressBar.value = window.scrollY;
      });
});
</script>

<body class="mdui-drawer-body-left">
  <!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡ -->
  <progress id="content_progress" value="0"></progress>

  <!-- éŸ³é¢‘æ’­æ”¾ -->
  <!-- <link rel="stylesheet" href="/dist/APlayer.min.css">
  <div id="aplayer"></div>
  <script type="text/javascript" src="/dist/APlayer.min.js"></script>
  <script type="text/javascript" src="/dist/music.js"></script> -->

  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(/images/bg.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <a href="/" title="Jasonkay" class="mdui-btn mdui-btn-icon"><img src="/images/avatar4.jpg"></a>
      </div>
    </div>
  </div>
  <div id="nexmoe-header">
    <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Jasonkay">
            <img src="/images/avatar4.jpg" alt="Jasonkay">
        </a>
    </div>

    <!-- é»‘ç™½åˆ‡æ¢css -->
    <!-- <style>
        .light-dark-checkbox {
            margin: 0 auto;
        }

        /* The switch - the box around the slider */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        /* Hide default HTML checkbox */
        .switch .theme-switcher {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* The slider */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "ğŸŒ";
            height: 0px;
            width: 0px;
            left: -10px;
            top: 16px;
            line-height: 0px;
            transition: 0.4s;
        }

        .theme-switcher:checked+.slider:before {
            left: 35px;
            content: "ğŸŒ‘";
        }

        .theme-switcher:checked+.slider:before {
            transform: translateX(45px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 40px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* æš—é»‘æ ·å¼ */
        body.night {
            background-color: #263238;
            color: #aaa;
        }
        body.night img {
            filter: brightness(30%);
        }
        article.night {
            background-color: black;
            color: white;
        }
    </style> -->

    <!-- é»‘ç™½å¼€å…³ -->
    <!-- <div class="nexmoe-list-item mdui-list-item">
        <div class="light-dark-checkbox">
            <div>
                é»‘ç™½æ¨¡å¼åˆ‡æ¢(Beta)
            </div>
            <label class="switch">
                <input id="light-dark-input" type="checkbox" onclick="switchTheme();" class="theme-switcher">
                <span class="slider round"></span>
            </label>
        </div>
    </div> -->

    <!-- é»‘ç™½åˆ‡æ¢js -->
    <!-- <script>
        // get hours of the day in 24Hr format (0-23)
        var hr = (new Date()).getHours();

        $(document).ready(function () {
            var theme = sessionStorage.getItem("theme");
            if (theme == "dark") {
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
            } else if (theme == "light") {
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
            } else {
                setDefaultTheme(hr);
            }
        });

        function switchTheme() {
            if (sessionStorage.getItem("theme") == "dark") {
                sessionStorage.setItem("theme", "light");
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
            } else if (sessionStorage.getItem("theme") == "light") {
                sessionStorage.setItem("theme", "dark");
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
            } else {
                setDefaultTheme(hr);
            }
        };

        function setDefaultTheme(curHr) {
            // 6:00-18:00 light
            if (curHr >= 6 && curHr <= 18) {
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
                sessionStorage.setItem("theme", "light");
                $("#light-dark-input").attr("checked", false);
            } else {
                // 0:00-6:00 & 18:00-00:00 night
                sessionStorage.setItem("theme", "dark");
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
                $("#light-dark-input").attr("checked", true);
            }
        }
    </script> -->

    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>522</div>
        <div><span>æ ‡ç­¾</span>277</div>
        <div><span>åˆ†ç±»</span>67</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/jp/" title="æ—¥è¯­åˆ†ç«™">
            <i class="mdui-list-item-icon nexmoefont icon-calendar-fill"></i>
            <div class="mdui-list-item-content">
                æ—¥è¯­åˆ†ç«™
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about/" title="å…³äºåšå®¢">
            <i class="mdui-list-item-icon nexmoefont icon-eye-fill"></i>
            <div class="mdui-list-item-content">
                å…³äºåšå®¢
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archive" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/anki/" title="Ankiç¬”è®°">
            <i class="mdui-list-item-icon nexmoefont icon-tag-fill"></i>
            <div class="mdui-list-item-content">
                Ankiç¬”è®°
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/study/" title="å­¦ä¹ è¿›åº¦">
            <i class="mdui-list-item-icon nexmoefont icon-telegram"></i>
            <div class="mdui-list-item-content">
                å­¦ä¹ è¿›åº¦
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/running/" title="è·‘æ­¥å¥èº«">
            <i class="mdui-list-item-icon nexmoefont icon-dribbble"></i>
            <div class="mdui-list-item-content">
                è·‘æ­¥å¥èº«
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/interview/" title="é¢è¯•ç›¸å…³">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                é¢è¯•ç›¸å…³
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/algorithm/" title="ç®—æ³•æ€»ç»“">
            <i class="mdui-list-item-icon nexmoefont icon-areachart"></i>
            <div class="mdui-list-item-content">
                ç®—æ³•æ€»ç»“
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/installing/" title="è½¯ä»¶å®‰è£…">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                è½¯ä»¶å®‰è£…
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/board/" title="åˆ›æ„ç™½æ¿">
            <i class="mdui-list-item-icon nexmoefont icon-tag-fill"></i>
            <div class="mdui-list-item-content">
                åˆ›æ„ç™½æ¿
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="http://159.75.131.252:32352/" title="æ‘„å½±åˆ†äº«">
            <i class="mdui-list-item-icon nexmoefont icon-telegram"></i>
            <div class="mdui-list-item-content">
                æ‘„å½±åˆ†äº«
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/chat/" title="ç•…æ‰€æ¬²è¨€">
            <i class="mdui-list-item-icon nexmoefont icon-ellipsis"></i>
            <div class="mdui-list-item-content">
                ç•…æ‰€æ¬²è¨€
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/realtime/" title="å®æ—¶æ•°æ®ç»Ÿè®¡">
            <i class="mdui-list-item-icon nexmoefont icon-time-circle-fill"></i>
            <div class="mdui-list-item-content">
                å®æ—¶æ•°æ®ç»Ÿè®¡
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/py/" title="å‹æƒ…é“¾æ¥">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                å‹æƒ…é“¾æ¥
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç¤¾äº¤æŒ‰é’®</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/23364338" target="_blank" mdui-tooltip="{content: 'å“”å“©å“”å“©'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/jasonkayzk/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="https://steamcommunity.com/id/jasonkayzk/" target="_blank" mdui-tooltip="{content: 'Steam'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-steam"></i>
        </a><a class="mdui-ripple" href="https://twitter.com/Jasonkay_ZK/" target="_blank" mdui-tooltip="{content: 'Twitter'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-twitter"></i>
        </a><a class="mdui-ripple" href="mailto:jasonkayzk@gmail.com" target="_blank" mdui-tooltip="{content: 'Mail'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-mail-fill"></i>
        </a>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç«™å†…æœç´¢</h3>
    <div class="nexmoe-widget nexmoe-search">
        <form class="site-search-form">
            <input type="text" id="local-search-input" class="st-search-input">
        </form>
        <div id="local-search-result" class="local-search-result-cls">
        </div>
    </div>
</div>

<!-- æ‰§è¡Œæœ¬åœ°æœç´¢è„šæœ¬ -->
<script type="text/javascript">
    var path = "https://cdn.jsdelivr.net/gh/jasonkayzk/JasonkayZK.github.io@master/search.xml";
    searchFunc(path, 'local-search-input', 'local-search-result');
</script>

<style type="text/css">
/* æœç´¢æ¡ */
.site-search-form {
    text-align: center;
}
#local-search-input {
    width: 100%;
}

/* æœç´¢ç»“æœå…³é—­ */
#local-search-close {
    font-size: 22.5px;
    cursor: pointer;
    color: #ff4e6a;
}

.search-result-list > li {
    line-height: 0.75;
    margin-top: -5px;
}

</style>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ ‡ç­¾äº‘</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/2048/" style="font-size: 10px;">2048</a> <a href="/tags/ACM/" style="font-size: 10px;">ACM</a> <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/AUFS/" style="font-size: 10px;">AUFS</a> <a href="/tags/Android/" style="font-size: 10.91px;">Android</a> <a href="/tags/AppStore/" style="font-size: 10px;">AppStore</a> <a href="/tags/AppleScript/" style="font-size: 10px;">AppleScript</a> <a href="/tags/Aria2/" style="font-size: 10.91px;">Aria2</a> <a href="/tags/Async/" style="font-size: 10px;">Async</a> <a href="/tags/BFS/" style="font-size: 10.45px;">BFS</a> <a href="/tags/Bash/" style="font-size: 10.45px;">Bash</a> <a href="/tags/BitTorrent/" style="font-size: 10px;">BitTorrent</a> <a href="/tags/BloomFilter/" style="font-size: 10px;">BloomFilter</a> <a href="/tags/Bytebase/" style="font-size: 10px;">Bytebase</a> <a href="/tags/C/" style="font-size: 15.91px;">C++</a> <a href="/tags/CAP/" style="font-size: 10px;">CAP</a> <a href="/tags/CDN/" style="font-size: 10.45px;">CDN</a> <a href="/tags/CGLibåŠ¨æ€ä»£ç†/" style="font-size: 10px;">CGLibåŠ¨æ€ä»£ç†</a> <a href="/tags/CUDA/" style="font-size: 10px;">CUDA</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Caffeine/" style="font-size: 10px;">Caffeine</a> <a href="/tags/Cargo/" style="font-size: 11.82px;">Cargo</a> <a href="/tags/CentOS/" style="font-size: 12.27px;">CentOS</a> <a href="/tags/Cgroups/" style="font-size: 10px;">Cgroups</a> <a href="/tags/Chromeæ‰©å±•/" style="font-size: 10px;">Chromeæ‰©å±•</a> <a href="/tags/Cli/" style="font-size: 10.45px;">Cli</a> <a href="/tags/ClickHouse/" style="font-size: 10px;">ClickHouse</a> <a href="/tags/Cling/" style="font-size: 10px;">Cling</a> <a href="/tags/Clion/" style="font-size: 10px;">Clion</a> <a href="/tags/Colima/" style="font-size: 10px;">Colima</a> <a href="/tags/Container/" style="font-size: 10px;">Container</a> <a href="/tags/DFS/" style="font-size: 10.45px;">DFS</a> <a href="/tags/DLL/" style="font-size: 10.45px;">DLL</a> <a href="/tags/Debian/" style="font-size: 10px;">Debian</a> <a href="/tags/Docker/" style="font-size: 18.64px;">Docker</a> <a href="/tags/Docker-Compose/" style="font-size: 10.45px;">Docker-Compose</a> <a href="/tags/DockerHub/" style="font-size: 10px;">DockerHub</a> <a href="/tags/Dolt/" style="font-size: 10px;">Dolt</a> <a href="/tags/Dubbo/" style="font-size: 10.91px;">Dubbo</a> <a href="/tags/Easegress/" style="font-size: 10px;">Easegress</a> <a href="/tags/ElasticSearch/" style="font-size: 14.09px;">ElasticSearch</a> <a href="/tags/Electron/" style="font-size: 10.45px;">Electron</a> <a href="/tags/English/" style="font-size: 10px;">English</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/FFmpeg/" style="font-size: 10px;">FFmpeg</a> <a href="/tags/FTP/" style="font-size: 10.45px;">FTP</a> <a href="/tags/FaaS/" style="font-size: 10px;">FaaS</a> <a href="/tags/Future/" style="font-size: 10px;">Future</a> <a href="/tags/GC/" style="font-size: 10px;">GC</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/GRPC/" style="font-size: 10px;">GRPC</a> <a href="/tags/Gin/" style="font-size: 10px;">Gin</a> <a href="/tags/Git/" style="font-size: 13.64px;">Git</a> <a href="/tags/Gitee/" style="font-size: 10px;">Gitee</a> <a href="/tags/Github/" style="font-size: 14.55px;">Github</a> <a href="/tags/Github-Actions/" style="font-size: 10px;">Github-Actions</a> <a href="/tags/Golang/" style="font-size: 18.18px;">Golang</a> <a href="/tags/Gomod/" style="font-size: 10px;">Gomod</a> <a href="/tags/Goroutine/" style="font-size: 10.91px;">Goroutine</a> <a href="/tags/GraalVM/" style="font-size: 10px;">GraalVM</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/HAProxy/" style="font-size: 10px;">HAProxy</a> <a href="/tags/Hadoop/" style="font-size: 10px;">Hadoop</a> <a href="/tags/IDEAé…ç½®/" style="font-size: 10px;">IDEAé…ç½®</a> <a href="/tags/IDç”Ÿæˆå™¨/" style="font-size: 10.45px;">IDç”Ÿæˆå™¨</a> <a href="/tags/IOæ¨¡å‹/" style="font-size: 10px;">IOæ¨¡å‹</a> <a href="/tags/Ingress/" style="font-size: 10.45px;">Ingress</a> <a href="/tags/JDKåŠ¨æ€ä»£ç†/" style="font-size: 10.45px;">JDKåŠ¨æ€ä»£ç†</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 12.27px;">Java</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/JavaåŸºç¡€/" style="font-size: 16.82px;">JavaåŸºç¡€</a> <a href="/tags/Javaæ³¨è§£/" style="font-size: 10px;">Javaæ³¨è§£</a> <a href="/tags/Javaæºç /" style="font-size: 12.27px;">Javaæºç </a> <a href="/tags/Javaé¢è¯•/" style="font-size: 11.36px;">Javaé¢è¯•</a> <a href="/tags/JuiceFS/" style="font-size: 10px;">JuiceFS</a> <a href="/tags/JupyterLab/" style="font-size: 10px;">JupyterLab</a> <a href="/tags/Kafka/" style="font-size: 10.45px;">Kafka</a> <a href="/tags/Kubernetes/" style="font-size: 15.45px;">Kubernetes</a> <a href="/tags/LVS/" style="font-size: 10.91px;">LVS</a> <a href="/tags/Lambdaè¡¨è¾¾å¼/" style="font-size: 10.91px;">Lambdaè¡¨è¾¾å¼</a> <a href="/tags/LevelDB/" style="font-size: 10px;">LevelDB</a> <a href="/tags/Library/" style="font-size: 10.45px;">Library</a> <a href="/tags/Life/" style="font-size: 10px;">Life</a> <a href="/tags/Linux/" style="font-size: 16.36px;">Linux</a> <a href="/tags/LruCache/" style="font-size: 10px;">LruCache</a> <a href="/tags/MacOS/" style="font-size: 10.45px;">MacOS</a> <a href="/tags/Maven/" style="font-size: 12.27px;">Maven</a> <a href="/tags/MongoDB/" style="font-size: 11.82px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 13.64px;">MySQL</a> <a href="/tags/Mybatis/" style="font-size: 10.91px;">Mybatis</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/NIO/" style="font-size: 10.91px;">NIO</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Namespace/" style="font-size: 10px;">Namespace</a> <a href="/tags/Netty/" style="font-size: 10px;">Netty</a> <a href="/tags/Newman/" style="font-size: 10px;">Newman</a> <a href="/tags/Nginx/" style="font-size: 12.27px;">Nginx</a> <a href="/tags/Node-js/" style="font-size: 11.36px;">Node.js</a> <a href="/tags/Okular/" style="font-size: 10px;">Okular</a> <a href="/tags/P2P/" style="font-size: 10px;">P2P</a> <a href="/tags/POML/" style="font-size: 10px;">POML</a> <a href="/tags/Panic/" style="font-size: 10px;">Panic</a> <a href="/tags/PipelineDB/" style="font-size: 10px;">PipelineDB</a> <a href="/tags/PostgreSQL/" style="font-size: 10.45px;">PostgreSQL</a> <a href="/tags/Postman/" style="font-size: 10.45px;">Postman</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10.91px;">Protobuf</a> <a href="/tags/Python/" style="font-size: 11.36px;">Python</a> <a href="/tags/RAII/" style="font-size: 10px;">RAII</a> <a href="/tags/RPC/" style="font-size: 10px;">RPC</a> <a href="/tags/RSS/" style="font-size: 10.91px;">RSS</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redash/" style="font-size: 10px;">Redash</a> <a href="/tags/Redis/" style="font-size: 14.55px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Rust/" style="font-size: 18.64px;">Rust</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/SSE/" style="font-size: 10px;">SSE</a> <a href="/tags/SSH/" style="font-size: 10.45px;">SSH</a> <a href="/tags/Serverless/" style="font-size: 10px;">Serverless</a> <a href="/tags/Shadowsocks/" style="font-size: 10.91px;">Shadowsocks</a> <a href="/tags/Skiplist/" style="font-size: 10px;">Skiplist</a> <a href="/tags/Slice/" style="font-size: 10px;">Slice</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/Spring/" style="font-size: 11.82px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/tags/Springæºç /" style="font-size: 10px;">Springæºç </a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/TOML/" style="font-size: 10px;">TOML</a> <a href="/tags/Telegraf/" style="font-size: 10px;">Telegraf</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/Tomcat/" style="font-size: 10.45px;">Tomcat</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/UUID/" style="font-size: 10px;">UUID</a> <a href="/tags/UnionFS/" style="font-size: 10px;">UnionFS</a> <a href="/tags/VMWare/" style="font-size: 13.18px;">VMWare</a> <a href="/tags/VPN/" style="font-size: 10px;">VPN</a> <a href="/tags/WebAssembly/" style="font-size: 10.45px;">WebAssembly</a> <a href="/tags/Websocket/" style="font-size: 10px;">Websocket</a> <a href="/tags/XML/" style="font-size: 10.91px;">XML</a> <a href="/tags/YAML/" style="font-size: 10px;">YAML</a> <a href="/tags/Zookeeper/" style="font-size: 10.91px;">Zookeeper</a> <a href="/tags/apt/" style="font-size: 10px;">apt</a> <a href="/tags/autok3s/" style="font-size: 10px;">autok3s</a> <a href="/tags/cURL/" style="font-size: 10px;">cURL</a> <a href="/tags/chroot/" style="font-size: 10px;">chroot</a> <a href="/tags/cmder/" style="font-size: 10px;">cmder</a> <a href="/tags/grpc/" style="font-size: 10px;">grpc</a> <a href="/tags/hashå†²çª/" style="font-size: 10px;">hashå†²çª</a> <a href="/tags/inoreader/" style="font-size: 10px;">inoreader</a> <a href="/tags/k3s/" style="font-size: 10.45px;">k3s</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/keepalived/" style="font-size: 10px;">keepalived</a> <a href="/tags/libp2p/" style="font-size: 10px;">libp2p</a> <a href="/tags/minikube/" style="font-size: 10.45px;">minikube</a> <a href="/tags/ntfy/" style="font-size: 10px;">ntfy</a> <a href="/tags/picocli/" style="font-size: 10px;">picocli</a> <a href="/tags/telnet/" style="font-size: 10px;">telnet</a> <a href="/tags/uv/" style="font-size: 10px;">uv</a> <a href="/tags/vcpkg/" style="font-size: 10px;">vcpkg</a> <a href="/tags/xorm/" style="font-size: 10px;">xorm</a> <a href="/tags/äºŒåˆ†æ³•/" style="font-size: 10px;">äºŒåˆ†æ³•</a> <a href="/tags/äºŒå‰æ ‘/" style="font-size: 15.45px;">äºŒå‰æ ‘</a> <a href="/tags/äºŒç»´ç /" style="font-size: 10px;">äºŒç»´ç </a> <a href="/tags/äº¤å‰ç¼–è¯‘/" style="font-size: 10px;">äº¤å‰ç¼–è¯‘</a> <a href="/tags/äººå·¥æ™ºèƒ½/" style="font-size: 10.91px;">äººå·¥æ™ºèƒ½</a> <a href="/tags/äººç”Ÿæ—¥è®°/" style="font-size: 17.73px;">äººç”Ÿæ—¥è®°</a> <a href="/tags/ä»£ç†æ¨¡å¼/" style="font-size: 10px;">ä»£ç†æ¨¡å¼</a> <a href="/tags/ä½è¿ç®—/" style="font-size: 10.45px;">ä½è¿ç®—</a> <a href="/tags/ä¿¡å·/" style="font-size: 10px;">ä¿¡å·</a> <a href="/tags/ä¿¡æ¯èšåˆ/" style="font-size: 10px;">ä¿¡æ¯èšåˆ</a> <a href="/tags/å†…å­˜ç®¡ç†/" style="font-size: 10.45px;">å†…å­˜ç®¡ç†</a> <a href="/tags/å†…ç½‘ç©¿é€/" style="font-size: 10px;">å†…ç½‘ç©¿é€</a> <a href="/tags/å‡½æ•°å¼æ¥å£/" style="font-size: 10px;">å‡½æ•°å¼æ¥å£</a> <a href="/tags/åˆ†å¸ƒå¼/" style="font-size: 15.91px;">åˆ†å¸ƒå¼</a> <a href="/tags/åŠå…¬/" style="font-size: 10px;">åŠå…¬</a> <a href="/tags/åŠ¨æ€è§„åˆ’/" style="font-size: 11.36px;">åŠ¨æ€è§„åˆ’</a> <a href="/tags/åç¨‹æ± /" style="font-size: 10px;">åç¨‹æ± </a> <a href="/tags/åšå®¢ç®¡ç†/" style="font-size: 13.18px;">åšå®¢ç®¡ç†</a> <a href="/tags/åšå®¢ç¾åŒ–/" style="font-size: 11.82px;">åšå®¢ç¾åŒ–</a> <a href="/tags/åŒæŒ‡é’ˆ/" style="font-size: 10.45px;">åŒæŒ‡é’ˆ</a> <a href="/tags/åå°„/" style="font-size: 12.27px;">åå°„</a> <a href="/tags/å£æ‰/" style="font-size: 10px;">å£æ‰</a> <a href="/tags/å“ˆå¸Œè¡¨/" style="font-size: 10.45px;">å“ˆå¸Œè¡¨</a> <a href="/tags/å›æº¯/" style="font-size: 10.45px;">å›æº¯</a> <a href="/tags/å›æº¯æ³•/" style="font-size: 10px;">å›æº¯æ³•</a> <a href="/tags/å †/" style="font-size: 10.45px;">å †</a> <a href="/tags/å¤šçº¿ç¨‹ä¸‹è½½/" style="font-size: 10.45px;">å¤šçº¿ç¨‹ä¸‹è½½</a> <a href="/tags/å¤§æ•°æ®/" style="font-size: 10px;">å¤§æ•°æ®</a> <a href="/tags/å­—ç¬¦ä¸²/" style="font-size: 13.18px;">å­—ç¬¦ä¸²</a> <a href="/tags/å­—ç¬¦ä¸²å¤„ç†/" style="font-size: 10px;">å­—ç¬¦ä¸²å¤„ç†</a> <a href="/tags/å­¦ä¹ æ¡ˆä¾‹/" style="font-size: 10.45px;">å­¦ä¹ æ¡ˆä¾‹</a> <a href="/tags/å®¹å™¨/" style="font-size: 10px;">å®¹å™¨</a> <a href="/tags/å·¥å…·åˆ†äº«/" style="font-size: 19.09px;">å·¥å…·åˆ†äº«</a> <a href="/tags/å¹¶å‘ç¼–ç¨‹/" style="font-size: 15.45px;">å¹¶å‘ç¼–ç¨‹</a> <a href="/tags/å¹¶è¡Œè®¡ç®—/" style="font-size: 10px;">å¹¶è¡Œè®¡ç®—</a> <a href="/tags/åºåˆ—åŒ–/" style="font-size: 10px;">åºåˆ—åŒ–</a> <a href="/tags/å»ºç­‘/" style="font-size: 10px;">å»ºç­‘</a> <a href="/tags/å¼€å‘è§„èŒƒ/" style="font-size: 10.45px;">å¼€å‘è§„èŒƒ</a> <a href="/tags/å¼€æºåè®®/" style="font-size: 10px;">å¼€æºåè®®</a> <a href="/tags/æ€§èƒ½æŒ‡æ ‡/" style="font-size: 10px;">æ€§èƒ½æŒ‡æ ‡</a> <a href="/tags/æŠ€æœ¯æ‚è°ˆ/" style="font-size: 20px;">æŠ€æœ¯æ‚è°ˆ</a> <a href="/tags/æ’åº/" style="font-size: 11.82px;">æ’åº</a> <a href="/tags/æ¨é€/" style="font-size: 10px;">æ¨é€</a> <a href="/tags/æœç´¢/" style="font-size: 10px;">æœç´¢</a> <a href="/tags/æ“ä½œç³»ç»Ÿ/" style="font-size: 10.91px;">æ“ä½œç³»ç»Ÿ</a> <a href="/tags/æ•™å¸ˆ/" style="font-size: 10.45px;">æ•™å¸ˆ</a> <a href="/tags/æ•™æ¡ˆ/" style="font-size: 10.45px;">æ•™æ¡ˆ</a> <a href="/tags/æ•°å­¦/" style="font-size: 12.73px;">æ•°å­¦</a> <a href="/tags/æ•°æ®åº“/" style="font-size: 15px;">æ•°æ®åº“</a> <a href="/tags/æ•°ç»„/" style="font-size: 13.64px;">æ•°ç»„</a> <a href="/tags/æ–‡å­—éšè—/" style="font-size: 10px;">æ–‡å­—éšè—</a> <a href="/tags/æ–­ç‚¹ç»­ä¼ /" style="font-size: 10px;">æ–­ç‚¹ç»­ä¼ </a> <a href="/tags/æ–°æµªå¾®åš/" style="font-size: 10px;">æ–°æµªå¾®åš</a> <a href="/tags/æ—¥å¿—/" style="font-size: 10px;">æ—¥å¿—</a> <a href="/tags/æ—¥æœ¬èª/" style="font-size: 14.55px;">æ—¥æœ¬èª</a> <a href="/tags/æ—¥è¨˜/" style="font-size: 10.45px;">æ—¥è¨˜</a> <a href="/tags/æœåŠ¡è‡ªå»º/" style="font-size: 10.91px;">æœåŠ¡è‡ªå»º</a> <a href="/tags/æŸ¥æ‰¾/" style="font-size: 10.91px;">æŸ¥æ‰¾</a> <a href="/tags/æ ˆ/" style="font-size: 10.91px;">æ ˆ</a> <a href="/tags/æ­Œè©/" style="font-size: 10px;">æ­Œè©</a> <a href="/tags/æ­£åˆ™è¡¨è¾¾å¼/" style="font-size: 10.91px;">æ­£åˆ™è¡¨è¾¾å¼</a> <a href="/tags/æ±‡ç¼–è¯­è¨€/" style="font-size: 10px;">æ±‡ç¼–è¯­è¨€</a> <a href="/tags/æµ‹è¯•/" style="font-size: 10px;">æµ‹è¯•</a> <a href="/tags/æ»‘çª—/" style="font-size: 10px;">æ»‘çª—</a> <a href="/tags/ç‰ˆæœ¬æ§åˆ¶/" style="font-size: 10px;">ç‰ˆæœ¬æ§åˆ¶</a> <a href="/tags/ç”Ÿæ´»æ€»ç»“/" style="font-size: 10px;">ç”Ÿæ´»æ€»ç»“</a> <a href="/tags/ç¦åˆ©åˆ†äº«/" style="font-size: 10px;">ç¦åˆ©åˆ†äº«</a> <a href="/tags/ç®—æ³•/" style="font-size: 12.73px;">ç®—æ³•</a> <a href="/tags/ç®—æ³•é¢˜ç›®/" style="font-size: 19.55px;">ç®—æ³•é¢˜ç›®</a> <a href="/tags/ç±»åŠ è½½å™¨/" style="font-size: 10.45px;">ç±»åŠ è½½å™¨</a> <a href="/tags/ç´ æ•°/" style="font-size: 10px;">ç´ æ•°</a> <a href="/tags/çº¿æ€§æ¢æµ‹æ³•/" style="font-size: 10px;">çº¿æ€§æ¢æµ‹æ³•</a> <a href="/tags/çº¿ç¨‹æ± /" style="font-size: 10.91px;">çº¿ç¨‹æ± </a> <a href="/tags/ç¼–è¯‘ä¼˜åŒ–/" style="font-size: 10px;">ç¼–è¯‘ä¼˜åŒ–</a> <a href="/tags/ç¼–è¯‘å™¨/" style="font-size: 10px;">ç¼–è¯‘å™¨</a> <a href="/tags/ç½‘ç›˜/" style="font-size: 10px;">ç½‘ç›˜</a> <a href="/tags/ç½‘ç»œçº¿è·¯/" style="font-size: 10px;">ç½‘ç»œçº¿è·¯</a> <a href="/tags/ç¿»è¨³/" style="font-size: 10.45px;">ç¿»è¨³</a> <a href="/tags/è‡ªå¯åŠ¨/" style="font-size: 10px;">è‡ªå¯åŠ¨</a> <a href="/tags/è’™ç‰¹å¡ç½—æ–¹æ³•/" style="font-size: 10px;">è’™ç‰¹å¡ç½—æ–¹æ³•</a> <a href="/tags/è™šæ‹Ÿæœº/" style="font-size: 10.45px;">è™šæ‹Ÿæœº</a> <a href="/tags/è¡—æ™¯/" style="font-size: 10px;">è¡—æ™¯</a> <a href="/tags/è£…é¥°å™¨æ¨¡å¼/" style="font-size: 10px;">è£…é¥°å™¨æ¨¡å¼</a> <a href="/tags/è®¡ç®—æœºç½‘ç»œ/" style="font-size: 10px;">è®¡ç®—æœºç½‘ç»œ</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 10px;">è®¾è®¡æ¨¡å¼</a> <a href="/tags/è¯¾ç¨‹/" style="font-size: 10px;">è¯¾ç¨‹</a> <a href="/tags/è´Ÿè½½å‡è¡¡/" style="font-size: 12.27px;">è´Ÿè½½å‡è¡¡</a> <a href="/tags/è´ªå¿ƒ/" style="font-size: 10px;">è´ªå¿ƒ</a> <a href="/tags/è·³è·³è›™æ—¥è¯­è¯»åº“/" style="font-size: 10.45px;">è·³è·³è›™æ—¥è¯­è¯»åº“</a> <a href="/tags/è½¯ä»¶å®‰è£…ä¸é…ç½®/" style="font-size: 17.27px;">è½¯ä»¶å®‰è£…ä¸é…ç½®</a> <a href="/tags/è½¯ä»¶æ¨è/" style="font-size: 15px;">è½¯ä»¶æ¨è</a> <a href="/tags/è½¯ä»¶æµ‹è¯•/" style="font-size: 10.45px;">è½¯ä»¶æµ‹è¯•</a> <a href="/tags/è½¯è€ƒ/" style="font-size: 10px;">è½¯è€ƒ</a> <a href="/tags/è¿›åº¦æ¡/" style="font-size: 10.45px;">è¿›åº¦æ¡</a> <a href="/tags/è¿›ç¨‹é€šä¿¡/" style="font-size: 10px;">è¿›ç¨‹é€šä¿¡</a> <a href="/tags/é€†å‘å·¥ç¨‹/" style="font-size: 10px;">é€†å‘å·¥ç¨‹</a> <a href="/tags/é€’å½’/" style="font-size: 10.45px;">é€’å½’</a> <a href="/tags/é‡å®šå‘/" style="font-size: 10px;">é‡å®šå‘</a> <a href="/tags/é‡è£…ç³»ç»Ÿ/" style="font-size: 10px;">é‡è£…ç³»ç»Ÿ</a> <a href="/tags/é“¾è¡¨/" style="font-size: 13.64px;">é“¾è¡¨</a> <a href="/tags/é˜Ÿåˆ—/" style="font-size: 10px;">é˜Ÿåˆ—</a> <a href="/tags/éšæœºå›¾ç‰‡/" style="font-size: 10px;">éšæœºå›¾ç‰‡</a> <a href="/tags/é›†åˆ/" style="font-size: 14.09px;">é›†åˆ</a> <a href="/tags/é›¶å®½å­—ç¬¦/" style="font-size: 10px;">é›¶å®½å­—ç¬¦</a> <a href="/tags/é™æ€ä»£ç†/" style="font-size: 10px;">é™æ€ä»£ç†</a> <a href="/tags/é¢è¯•æ€»ç»“/" style="font-size: 15px;">é¢è¯•æ€»ç»“</a> <a href="/tags/é¡¹ç›®æ€»ç»“/" style="font-size: 10.91px;">é¡¹ç›®æ€»ç»“</a> <a href="/tags/é¡¹ç›®æ„å»º/" style="font-size: 10.91px;">é¡¹ç›®æ„å»º</a> <a href="/tags/é¡¹ç›®éƒ¨ç½²/" style="font-size: 11.36px;">é¡¹ç›®éƒ¨ç½²</a> <a href="/tags/é»‘è‹¹æœ/" style="font-size: 10px;">é»‘è‹¹æœ</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« åˆ†ç±»</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ACM/">ACM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/">Android</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/C/">C++</a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/CUDA/">CUDA</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Chromeæ‰©å±•/">Chromeæ‰©å±•</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ClickHouse/">ClickHouse</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/">Docker</a>
          <span class="category-list-count">25</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Dolt/">Dolt</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Dubbo/">Dubbo</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Electron/">Electron</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Git/">Git</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Github/">Github</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Golang/">Golang</a>
          <span class="category-list-count">31</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/GraalVM/">GraalVM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/IOåŸºç¡€/">IOåŸºç¡€</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Java/">Java</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Javaæºç /">Javaæºç </a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JuiceFS/">JuiceFS</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a>
          <span class="category-list-count">12</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Life/">Life</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Linux/">Linux</a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Maven/">Maven</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MongoDB/">MongoDB</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MySQL/">MySQL</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/">Mybatis</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/NPM/">NPM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Netty/">Netty</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Nginx/">Nginx</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Node-js/">Node.js</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/PostgreSQL/">PostgreSQL</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Protobuf/">Protobuf</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Python/">Python</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redash/">Redash</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/Redis/">Redis</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Ruby/">Ruby</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Rust/">Rust</a>
          <span class="category-list-count">35</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Spring/">Spring</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TOML/">TOML</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TypeScript/">TypeScript</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Websocket/">Websocket</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/äººç”Ÿæ—¥è®°/">äººç”Ÿæ—¥è®°</a>
          <span class="category-list-count">27</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åˆ†å¸ƒå¼/">åˆ†å¸ƒå¼</a>
          <span class="category-list-count">10</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åŠå…¬/">åŠå…¬</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åšå®¢ç®¡ç†/">åšå®¢ç®¡ç†</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/æŠ€æœ¯æ‚è°ˆ/å­¦ä¹ æ¡ˆä¾‹/">å­¦ä¹ æ¡ˆä¾‹</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/å·¥å…·åˆ†äº«/">å·¥å…·åˆ†äº«</a>
          <span class="category-list-count">41</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/å¹¶å‘ç¼–ç¨‹/">å¹¶å‘ç¼–ç¨‹</a>
          <span class="category-list-count">13</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/æŠ€æœ¯æ‚è°ˆ/">æŠ€æœ¯æ‚è°ˆ</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ•™å¸ˆ/">æ•™å¸ˆ</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ•°æ®åº“/">æ•°æ®åº“</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ—¥æœ¬èª/">æ—¥æœ¬èª</a>
          <span class="category-list-count">11</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æœåŠ¡è‡ªå»º/">æœåŠ¡è‡ªå»º</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ±‡ç¼–è¯­è¨€/">æ±‡ç¼–è¯­è¨€</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ç®—æ³•/">ç®—æ³•</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ç®—æ³•é¢˜ç›®/">ç®—æ³•é¢˜ç›®</a>
          <span class="category-list-count">60</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è¯¾ç¨‹/">è¯¾ç¨‹</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redis/è½¯ä»¶å®‰è£…ä¸é…ç½®/">è½¯ä»¶å®‰è£…ä¸é…ç½®</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è½¯ä»¶æµ‹è¯•/">è½¯ä»¶æµ‹è¯•</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è½¯è€ƒ/">è½¯è€ƒ</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/é¢è¯•æ€»ç»“/">é¢è¯•æ€»ç»“</a>
          <span class="category-list-count">15</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/é¡¹ç›®æ€»ç»“/">é¡¹ç›®æ€»ç»“</a>
          <span class="category-list-count">3</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2026/02/10/å†è§2025ï¼Œä½ å¥½2026ï¼/">å†è§2025ï¼Œä½ å¥½2026ï¼</a>
          </li>
        
          <li>
            <a href="/2025/08/20/ä¸‹ä¸€ä»£æç¤ºè¯å·¥ç¨‹è¯­è¨€POMLç®€æ˜æ•™ç¨‹/">ä¸‹ä¸€ä»£æç¤ºè¯å·¥ç¨‹è¯­è¨€POMLç®€æ˜æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2025/07/30/å¼€äº†ä¸€ä¸ªæ–°çš„ä¸“é—¨å­¦ä¹ æ—¥è¯­çš„åšå®¢/">å¼€äº†ä¸€ä¸ªæ–°çš„ä¸“é—¨å­¦ä¹ æ—¥è¯­çš„åšå®¢</a>
          </li>
        
          <li>
            <a href="/2025/07/29/ä¸€ã€å¹¶è¡Œç¼–ç¨‹å¯¼è®ºä¸CUDAå…¥é—¨/">ä¸€ã€å¹¶è¡Œç¼–ç¨‹å¯¼è®ºä¸CUDAå…¥é—¨</a>
          </li>
        
          <li>
            <a href="/2025/07/24/ä¸€äº›å…è´¹çš„GPUèµ„æº/">ä¸€äº›å…è´¹çš„GPUèµ„æº</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
    <div class="nexmoe-copyright">
        <span style="color:#707070;font-size: 14px;">
            æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ <br>
            æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡ <br>
        </span>
        <span id="showsectime" style="color:#707070;font-size: 14px;">
            æœ¬ç«™å·²è¿è¡Œ0å¤©0å°æ—¶0åˆ†0ç§’
        </span>
        <i class="fa fa-heart throb" style="color:#d43f57">â¤</i><br>

        &copy; 2026 Jasonkay
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>

    <div id="footer-info">

    </div>

    <script type="text/javascript">
        function NewDate(str) {
            str = str.split('-');
            var date = new Date();
            date.setUTCFullYear(str[0], str[1] - 1, str[2]);
            date.setUTCHours(0, 0, 0, 0);
            return date;
        }
        function showsectime() {
            var birthDay = NewDate("2019-09-01");
            var today = new Date();
            var timeold = today.getTime() - birthDay.getTime();
            var sectimeold = timeold / 1000
            var secondsold = Math.floor(sectimeold);
            var msPerDay = 24 * 60 * 60 * 1000; var e_daysold = timeold / msPerDay;
            var daysold = Math.floor(e_daysold);
            var e_hrsold = (daysold - e_daysold) * -24;
            var hrsold = Math.floor(e_hrsold);
            var e_minsold = (hrsold - e_hrsold) * -60;
            var minsold = Math.floor((hrsold - e_hrsold) * -60); var seconds = Math.floor((minsold - e_minsold) * -60).toString();
            document.getElementById("showsectime").innerHTML = "æœ¬ç«™å·²è¿è¡Œ" + daysold + "å¤©" + hrsold + "å°æ—¶" + minsold + "åˆ†" + seconds + "ç§’";
            setTimeout(showsectime, 1000);
        }
        showsectime();
    </script>

</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
      <div class="nexmoe-post">
  <div class="nexmoe-post-cover">
    
    <img src="https://img.paulzzh.com/touhou/random?21">
    
    <h1>å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨</h1>
  </div>
  <div class="nexmoe-post-meta">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020å¹´03æœˆ02æ—¥</a>
    <a><i class="nexmoefont icon-areachart"></i>11.8k å­—</a>
    <a><i class="nexmoefont icon-areachart"></i><span class="archive-article-date">é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>
      </span></a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 56 åˆ†é’Ÿ</a>

    
    <a class="nexmoefont icon-appstore-fill -link" href="/categories/Spring/">Spring</a>
    
    
    <a class="nexmoefont icon-tag-fill -link" href="/tags/Spring/">Spring</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/Springæºç /">Springæºç </a>
    
  </div>
  <article>
    
    <div id="toc" class="toc-article">
      <ul class="markdownIt-TOC">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨"><span class="toc-text">å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é›¶-å®¹å™¨å…¥å£ApplicationContext"><span class="toc-text">é›¶.å®¹å™¨å…¥å£ApplicationContext</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€-è‡ªå®šä¹‰æ³¨è§£"><span class="toc-text">ä¸€. è‡ªå®šä¹‰æ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äºŒ-å®¹å™¨åˆå§‹åŒ–"><span class="toc-text">äºŒ. å®¹å™¨åˆå§‹åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Springä¸­çš„æ„é€ æ–¹æ³•"><span class="toc-text">Springä¸­çš„æ„é€ æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®¹å™¨æŠ½è±¡ç±»AbstractApplicationContext"><span class="toc-text">å®¹å™¨æŠ½è±¡ç±»AbstractApplicationContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®¹å™¨å®ç°ç±»AnnotationConfigApplicationContext"><span class="toc-text">å®¹å™¨å®ç°ç±»AnnotationConfigApplicationContext</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸‰-Beanå·¥å‚ç±»æ„é€ æ–¹æ³•"><span class="toc-text">ä¸‰. Beanå·¥å‚ç±»æ„é€ æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BeanFactoryæ¥å£"><span class="toc-text">BeanFactoryæ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„é€ DefaultListableBeanFactory"><span class="toc-text">æ„é€ DefaultListableBeanFactory</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å››-Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition"><span class="toc-text">å››. Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äº”-Beanæ‰«æå™¨ClassPathBeanDefinitionScanner"><span class="toc-text">äº”. Beanæ‰«æå™¨ClassPathBeanDefinitionScanner</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ClassPathBeanDefinitionScannerä»£ç "><span class="toc-text">ClassPathBeanDefinitionScannerä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scannerçš„åŠŸèƒ½"><span class="toc-text">Scannerçš„åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scannerçš„å±æ€§"><span class="toc-text">Scannerçš„å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#doScan-æ–¹æ³•"><span class="toc-text">doScan()æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿›è¡ŒBeanæ³¨å†Œ"><span class="toc-text">è¿›è¡ŒBeanæ³¨å†Œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…­-Beançš„åˆ›å»ºå’Œæ³¨å…¥"><span class="toc-text">å…­. Beançš„åˆ›å»ºå’Œæ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DefaultListableBeanFactoryä»£ç "><span class="toc-text">DefaultListableBeanFactoryä»£ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ƒ-ä»£ç æµ‹è¯•"><span class="toc-text">ä¸ƒ. ä»£ç æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®šä¹‰å‡ ä¸ªServiceæ–¹æ³•"><span class="toc-text">å®šä¹‰å‡ ä¸ªServiceæ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ§åˆ¶å™¨ç±»"><span class="toc-text">æ§åˆ¶å™¨ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åç½®å¤„ç†å™¨"><span class="toc-text">åç½®å¤„ç†å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯åŠ¨ç±»"><span class="toc-text">å¯åŠ¨ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é™„å½•"><span class="toc-text">é™„å½•</span></a></li></ol>
      </ul>
    </div>
    
    <p>Springä¸­æ ¸å¿ƒçš„æ€æƒ³å³IoCå’ŒAOP. ä¸ºäº†æ›´å¥½çš„ç†è§£å…³äºSpring IoCåº•å±‚å®ç°, æ‰“ç®—æ ¹æ®Spring 5.xçš„æºç å®ç°ä¸€ä¸ªç®€å•çš„Spring IoCå®¹å™¨</p>
<p>æœ¬æ–‡å†…å®¹åŒ…æ‹¬:</p>
<ul>
<li>è‡ªå®šä¹‰æ³¨è§£@MyAutowiredç­‰</li>
<li>å®¹å™¨åˆå§‹åŒ–</li>
<li>Beanå·¥ç¨‹ç±»çš„æ„é€ æ–¹æ³•</li>
<li>Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition</li>
<li>Beanæ‰«æå™¨ClassPathBeanDefinitionScanner</li>
<li>Beançš„åˆ›å»ºå’Œæ³¨å…¥</li>
<li>ä»£ç æµ‹è¯•</li>
</ul>
<p>æºä»£ç : </p>
<ul>
<li><a href="https://github.com/JasonkayZK/Java_Samples/tree/spring-ioc" target="_blank" rel="noopener">https://github.com/JasonkayZK/Java_Samples/tree/spring-ioc</a></li>
</ul>
<br>

<a id="more"></a>

<h2 id="å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨"><a href="#å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨" class="headerlink" title="å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨"></a>å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨</h2><p>æœ¬ä¾‹å­<strong>ä»…ä»…ä½¿ç”¨äº†Lombokå’Œcommons-lang3å®ç°äº†Spring-coreä¸­çš„å¤§éƒ¨åˆ†IoCåŠŸèƒ½</strong></p>
<p>åŒ…æ‹¬:</p>
<ul>
<li><code>@MyAutowired</code>, <code>@MyService</code>, <code>@MyComponent</code>, <code>@MyController</code>, <code>@MyLazy</code>ç­‰æ³¨è§£</li>
<li>åˆ›å»ºåŸºäºAnnotationConfigçš„ä¸Šä¸‹æ–‡å®¹å™¨AnnotationConfigApplicationContext</li>
<li>DefaultListableBeanFactory: Beanå·¥å‚çš„å®ç°</li>
<li>BeanPostProcessor: å®ç°Beançš„åˆå§‹åŒ–å‰ç½®/åç½®å¤„ç†</li>
<li>AnnotationConfigRegistry: JavaBeançš„å…ƒæ•°æ®BeanDefinitionçš„æ³¨å†Œç±»</li>
<li>ClassPathBeanDefinitionScanner: æ ¹æ®ClassPathçš„åŒ…æ‰«æå™¨</li>
</ul>
<p>å¯å®Œæˆç±»ä¼¼äº:</p>
<ul>
<li>è¯»å–å¹¶è§£æé…ç½®æ–‡ä»¶(å¯é…ç½®devç­‰)</li>
<li>æ‰«ææŒ‡å®šåŒ…çš„æ³¨è§£(<code>@Component</code>, <code>@Service</code>ç­‰)å®ç°Beanå’Œå®¹å™¨çš„åˆå§‹åŒ–</li>
<li>é€šè¿‡context.getBean()è·å–æŒ‡å®šçš„bean</li>
<li>é€šè¿‡ç»§æ‰¿BeanPostProcessorå®ç°Beançš„åˆå§‹åŒ–å‰ç½®/åç½®å¤„ç†</li>
<li>é€šè¿‡<code>@MyLazy</code>å®ç°æ‡’åŠ è½½</li>
<li>é€šè¿‡<code>@MyService</code>æˆ–<code>@MyController</code>çš„nameå±æ€§æŒ‡å®šBeanåç§°(Id)</li>
<li>è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜</li>
</ul>
<br>

<h2 id="é›¶-å®¹å™¨å…¥å£ApplicationContext"><a href="#é›¶-å®¹å™¨å…¥å£ApplicationContext" class="headerlink" title="é›¶.å®¹å™¨å…¥å£ApplicationContext"></a>é›¶.å®¹å™¨å…¥å£ApplicationContext</h2><p>åœ¨å¼€å§‹ä»¿å†™springçš„iocå®¹å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹springå®¹å™¨ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç±»ApplicationContext(å³springå®¹å™¨çš„å…¥å£):</p>
<pre><code class="java">// åŸºäºåŒ…è·¯å¾„æ‰«æ
ApplicationContext context = new AnnotationConfigApplicationContext(&quot;top.jasonkayzk&quot;);
// åŸºäºXMLé…ç½®æ–‡ä»¶
ApplicationContext context1 = new ClassPathXmlApplicationContext(&quot;myBeans.xml&quot;);
// åŸºäºé…ç½®ç±»
ApplicationContext context2 = new AnnotationConfigApplicationContext(MyConf.class);
// ......</code></pre>
<p>è¿™äº›ç±»å°±æ˜¯Springå®¹å™¨çš„å…¥å£</p>
<p>æœ¬ä¾‹å°†ä¼šä»¿å†™ä¸€ä¸ª<strong>åŸºäºæ³¨è§£çš„åŒ…æ‰«æå®ç°IOCåŠŸèƒ½çš„å°Demo</strong>, ä¹Ÿå°±æ˜¯: AnnotationConfigApplicationContextç±»</p>
<blockquote>
<br>

<p><strong>è¡¥å……:</strong></p>
<p><strong>ä»Springçš„æºç å¯ä»¥çœ‹å‡º:</strong></p>
<p><strong>ApplicationContextåŒæ—¶ä¹Ÿå®ç°äº†BeanFactoryå’ŒBeanRegistryæ¥å£</strong></p>
<p><strong>(å³å®Œæˆäº†Beanåˆ›å»ºå’ŒBeanä¿¡æ¯æ³¨å†ŒåŠŸèƒ½)</strong></p>
</blockquote>
<br>

<h2 id="ä¸€-è‡ªå®šä¹‰æ³¨è§£"><a href="#ä¸€-è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="ä¸€. è‡ªå®šä¹‰æ³¨è§£"></a>ä¸€. è‡ªå®šä¹‰æ³¨è§£</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå®šä¹‰äº†å‡ ä¸ªéœ€è¦ç”¨åˆ°çš„æ³¨è§£ï¼Œä»è€Œå®ç°<strong>Beançš„æ‰«æã€Beançš„æ‡’åŠ è½½ã€Beançš„æ³¨å…¥ç­‰</strong>è¿™äº›åŸºç¡€çš„ç”¨æ³•:</p>
<ul>
<li>@MyAutowired</li>
<li>@MyComponent</li>
<li>@MyLazy</li>
<li>@MyService</li>
<li>@MyController</li>
<li>@MyRequestMapping</li>
</ul>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<p>MyAutowired.java</p>
<pre><code class="java">// å®ç°Beançš„å±æ€§å¡«å……ï¼Œä¾èµ–æ³¨å…¥
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
@Documented
@MyComponent
public @interface MyAutowired {
}</code></pre>
<p>MyComponent.java</p>
<pre><code class="java">/**
 * å®ç°Beançš„æ‰«æ
 *
 * ç±»åŠ è½½æ—¶ä¼šæ·»åŠ åˆ°å€™é€‰èµ„æºä¸­ï¼ŒåæœŸå®ŒæˆBeançš„æ³¨å…¥
 *
 * @author zk
 */
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyComponent {
    /**
     * ç»„ä»¶åç§°
     *
     * @return ç»„ä»¶åç§°
     */
    String name() default &quot;&quot;;
}</code></pre>
<p>MyLazy.java</p>
<pre><code class="java">/**
 * å½“æ·»åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œåˆ™è¡¨ç¤ºBeanæ˜¯æ‡’åŠ è½½çš„
 *
 * @author zk
 */
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@MyComponent
public @interface MyLazy {
}</code></pre>
<p>MyService.java</p>
<pre><code class="java">/**
 * Springä¸­ä¸šåŠ¡å±‚æ³¨è§£
 *
 * @author zk
 */
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@MyComponent
public @interface MyService {
    /**
     * ä¸šåŠ¡Beanåç§°
     *
     * @return ä¸šåŠ¡Beanåç§°
     */
    String name() default &quot;&quot;;
}</code></pre>
<p>MyController.java</p>
<pre><code class="java">/**
 * SpringMVCä¸­æ§åˆ¶å™¨æ³¨è§£
 *
 * @author zk
 */
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@MyComponent
public @interface MyController {
}</code></pre>
<p>MyRequestMapping.java</p>
<pre><code class="java">/**
 * è®¿é—®æ§åˆ¶å±‚urlå¤„ç†
 *
 * @author zk
 */
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyRequestMapping {
    /**
     * è¯·æ±‚è®¿é—®urlè·¯å¾„
     *
     * @return è¯·æ±‚è®¿é—®urlè·¯å¾„, é»˜è®¤ä¸º: &quot;/&quot;
     */
    String value() default &quot;/&quot;;
}</code></pre>
<br>

<h2 id="äºŒ-å®¹å™¨åˆå§‹åŒ–"><a href="#äºŒ-å®¹å™¨åˆå§‹åŒ–" class="headerlink" title="äºŒ. å®¹å™¨åˆå§‹åŒ–"></a>äºŒ. å®¹å™¨åˆå§‹åŒ–</h2><p>æ³¨è§£åˆ›å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬å¼€å§‹åˆ›å»ºè¿™ä¸ªAnnotationConfigApplicationContextç±»</p>
<h3 id="Springä¸­çš„æ„é€ æ–¹æ³•"><a href="#Springä¸­çš„æ„é€ æ–¹æ³•" class="headerlink" title="Springä¸­çš„æ„é€ æ–¹æ³•"></a>Springä¸­çš„æ„é€ æ–¹æ³•</h3><p>åœ¨åˆ›å»ºè¿™ä¸ªç±»ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹spring-framework-5.0.xæºç ä¸­è¿™ä¸ªç±»çš„æ„é€ æ–¹æ³•:</p>
<p>AnnotationConfigApplicationContext.java</p>
<pre><code class="java">public class AnnotationConfigApplicationContext extends GenericApplicationContext implements AnnotationConfigRegistry {
    private final AnnotatedBeanDefinitionReader reader;
    // Beanå®šä¹‰æ‰«æå™¨
    private final ClassPathBeanDefinitionScanner scanner;

    public AnnotationConfigApplicationContext() {
        // æ­¤ç±»æœ‰ä¸€ä¸ªçˆ¶ç±»GenericApplicationContext, åœ¨æ‰§è¡Œæ„é€ æ–¹æ³•ä¹‹å‰, å…ˆæ‰§è¡Œçˆ¶ç±»æ„é€ æ–¹æ³•
        // super();

        // åˆå§‹åŒ–æ³¨è§£æ¨¡å¼ä¸‹Beanå®šä¹‰çš„æ‰«æå™¨
        // æ­¤å¤„çš„thiså°±æ˜¯AnnotationConfigApplicationContext
        this.reader = new AnnotatedBeanDefinitionReader(this);
        this.scanner = new ClassPathBeanDefinitionScanner(this);
    }

    // æ‰«æç»™å®šåŒ…ä¸­çš„beanå®šä¹‰, å¹¶è‡ªåŠ¨åˆ·æ–°å’Œåˆ›å»ºä¸Šä¸‹æ–‡
    public AnnotationConfigApplicationContext(String... basePackages) {
        // åˆå§‹åŒ–å®¹å™¨ä¿¡æ¯, Beançš„æ‰«æå™¨, æ³¨å†Œè¡¨ç­‰ä¿¡æ¯
        this();
        // åŠ è½½, æ‰«ææŒ‡å®šåŒ…è·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»
        // å°†æ‰€æœ‰çš„å¸¦æœ‰æŒ‡å®šæ ‡è®°çš„ç±»æ‰«æåˆ°ä¸€ä¸ªé›†åˆä¸­, é›†åˆä¿å­˜ç±»çš„æºæ•°æ®ä¿¡æ¯
        this.scan(basePackages);
        // æ³¨å…¥Bean
        this.refresh();
    }
    //......
}</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªæ„é€ å™¨: </p>
<p><code>new AnnotationConfigApplicationContext(String basePackages)</code></p>
<p>å¹¶ä¸”å®Œæˆä¸‹åˆ—åˆå§‹åŒ–å·¥ä½œ:</p>
<ul>
<li><strong>é¦–å…ˆå®¹å™¨è°ƒç”¨è‡ªèº«çš„æ„é€ å‡½æ•°this()å®Œæˆå®¹å™¨çš„åˆå§‹åŒ–å‡†å¤‡å·¥ä½œ</strong></li>
<li><strong>å…¶æ¬¡è°ƒç”¨scan(basePackages)æ–¹æ³•å®ŒæˆåŒ…çš„æ‰«æå·¥ä½œå°†æ‰«æçš„åŒ…æ·»åŠ åˆ°å€™é€‰èµ„æºé›†åˆä¸­</strong></li>
<li><strong>åˆ©ç”¨ä¸Šè¿°æ‰«æè¿‡çš„é›†åˆ, ä½¿ç”¨refresh()æ–¹æ³•å®ŒæˆBeançš„åˆ›å»ºå’Œæ³¨å…¥å·¥ä½œ</strong></li>
</ul>
<h3 id="å®¹å™¨æŠ½è±¡ç±»AbstractApplicationContext"><a href="#å®¹å™¨æŠ½è±¡ç±»AbstractApplicationContext" class="headerlink" title="å®¹å™¨æŠ½è±¡ç±»AbstractApplicationContext"></a>å®¹å™¨æŠ½è±¡ç±»AbstractApplicationContext</h3><p>ä¸ºäº†å±•ç¤ºä¸Springä¸­ç±»ä¼¼çš„ç»§æ‰¿å…³ç³»(GenericApplicationContext), è¿™é‡Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªAbstractApplicationContextç±»</p>
<p>æ‰€ä»¥åœ¨è¿›è¡Œæ„é€ æ—¶, é¦–å…ˆä¼šè°ƒç”¨AbstractApplicationContextç±»çš„æ„é€ å‡½æ•°</p>
<p>è€ŒAbstractApplicationContextå®ç°äº†BeanDefinitionRegistryæ¥å£, æ‰€ä»¥å…ˆçœ‹ä¸€ä¸‹BeanDefinitionRegistryæ¥å£</p>
<p>BeanDefinitionRegistry.java</p>
<pre><code class="java">// beançš„æ³¨å†Œå™¨
public interface BeanDefinitionRegistry {
    void registerBeanDefinition(String beanName, BeanDefinition beanDefinition);

    BeanDefinition getBeanDefinition(String beanName);

    boolean containsBeanDefinition(String beanName);

    Set&lt;String&gt; getBeanDefinitionNames();

    void registerProperties(Properties properties);
}</code></pre>
<blockquote>
  <br>

<p>  BeanDefinitionRegistryæ¥å£ä¸»è¦ç»´æŠ¤äº†BeanDefinition(å³Beançš„å…ƒæ•°æ®ç±», è§ä¸‹)çš„åˆ—è¡¨</p>
</blockquote>
<p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹AbstractApplicationContext</p>
<p>AbstractApplicationContext.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.context;

import top.jasonkayzk.ioc.core.entity.BeanDefinition;
import top.jasonkayzk.ioc.core.factory.DefaultListableBeanFactory;
import top.jasonkayzk.ioc.core.registry.BeanDefinitionRegistry;

import java.util.Properties;
import java.util.Set;

/**
 * ApplicationContext, Springå®¹å™¨çš„é¡¶å±‚æŠ½è±¡ç±»
 *
 * @author zk
 */
public abstract class AbstractApplicationContext implements BeanDefinitionRegistry {

    /**
     * Beanå·¥å‚ï¼Œç”¨æˆ·Beançš„åˆ›å»ºå’Œç®¡ç†
     */
    public final DefaultListableBeanFactory beanFactory;

    /**
     * åˆ›å»ºä¸€ä¸ªæ–°çš„AbstractApplicationContext
     */
    public AbstractApplicationContext() {
        // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
        // ä¸ºApplicationContext Springä¸Šä¸‹æ–‡å¯¹è±¡åˆå§‹åŒ–BeanFactory
        this.beanFactory = new DefaultListableBeanFactory();
    }

    /**
     * å¾€æ³¨å†Œè¡¨ä¸­æ³¨å†Œä¸€ä¸ªæ–°çš„ BeanDefinitionå®ä¾‹[å…³é”®]
     */
    @Override
    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {
        this.beanFactory.registerBeanDefinition(beanName, beanDefinition);
    }

    /**
     * æ ¹æ®Beançš„åç§°è·å–Beançš„å®šä¹‰
     *
     * @param beanName Beançš„åç§°
     * @return Beançš„å®šä¹‰
     */
    @Override
    public BeanDefinition getBeanDefinition(String beanName) {
        return this.beanFactory.beanDefinitionMap.get(beanName);
    }

    /**
     * åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªBean
     *
     * @param beanName Beançš„åç§°
     * @return æ˜¯å¦åŒ…å«æŸä¸ªBean
     */
    @Override
    public boolean containsBeanDefinition(String beanName) {
        return this.beanFactory.beanDefinitionMap.containsKey(beanName);
    }

    /**
     * è·å–æ‰€æœ‰Beançš„id
     *
     * @return æ‰€æœ‰Beançš„id(name)çš„Seté›†åˆ
     */
    @Override
    public Set&lt;String&gt; getBeanDefinitionNames() {
        return this.beanFactory.beanDefinitionMap.keySet();
    }

    /**
     * æ³¨å†Œé…ç½®æ–‡ä»¶
     *
     * @param properties é…ç½®æ–‡ä»¶
     */
    @Override
    public void registerProperties(Properties properties) {
        this.beanFactory.registerProperties(properties);
    }

    /**
     * ä»å®¹å™¨ä¸­è·å–Bean
     *
     * @param beanName Beanåç§°
     * @return Beanåç§°å¯¹åº”çš„Bean
     */
    public Object getBean(String beanName) {
        return this.beanFactory.getBean(beanName);
    }

    /**
     * æ³¨å…¥Bean
     */
    public void refresh() {
        // è·å–beanå·¥å‚
        DefaultListableBeanFactory beanFactory = obtainFreshBeanFactory();
        // å·¥å‚ä¿¡æ¯åˆå§‹åŒ–å®Œæˆåï¼Œå¼€å§‹åˆ›å»ºå•ä¾‹éæ‡’åŠ è½½çš„bean
        finishBeanFactoryInitialization(beanFactory);
    }

    /**
     * è·å–Beanå·¥å‚ç±»
     *
     * @return Beanå·¥å‚ç±»
     */
    private DefaultListableBeanFactory obtainFreshBeanFactory() {
        return this.beanFactory;
    }

    /**
     * å¼€å§‹è¿›è¡ŒBeançš„æ³¨å…¥å·¥ä½œ
     *
     * @param beanFactory beanå·¥å‚çš„å®ä¾‹
     */
    private void finishBeanFactoryInitialization(DefaultListableBeanFactory beanFactory) {
        beanFactory.preInstantiateSingletons();
    }
}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p>é¦–å…ˆ, AbstractApplicationContextè™½ç„¶æ˜¯ä¸€ä¸ªæŠ½è±¡ç±», ä½†æ˜¯å†…éƒ¨æ²¡æœ‰abstractæ–¹æ³•!</p>
<p><strong>â‘  Beanå·¥å‚: beanFactory</strong></p>
<p>DefaultListableBeanFactoryç±»å‹, ç”¨äºç”¨æˆ·Beançš„åˆ›å»ºå’Œç®¡ç†(åæ–‡ä¼šå°†ä»‹ç»)</p>
<hr>
<p><strong>â‘¡ æ„é€ æ–¹æ³•</strong></p>
<p>AbstractApplicationContextæ˜¯ä¸€ä¸ªæŠ½è±¡ç±», ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯: <font color="#f00"><strong>æŠ½è±¡ç±»çš„æ„é€ æ–¹æ³•åœ¨å­ç±»æ„é€ æ—¶ä¹Ÿæ˜¯ä¼šè¢«è°ƒç”¨çš„!</strong></font></p>
<p>æ­¤æ¬¡åœ¨åˆ›å»ºAnnotationConfigApplicationContextæ—¶, ä¼šå…ˆè°ƒç”¨AbstractApplicationContextçš„æ„é€ æ–¹æ³•, åˆå§‹åŒ–beanFactory;</p>
<hr>
<p><strong>â‘¢ ä¸BeanDefinitionç›¸å…³æ–¹æ³•</strong></p>
<p>BeanDefinitionæ˜¯ä¸€ä¸ªå®ä½“ç±», é‡Œé¢å­˜æ”¾å¤§é‡ä¸Beanç›¸å…³çš„å…ƒæ•°æ®, å¦‚: beanName, beanClass, lazyInitç­‰</p>
<p>AbstractApplicationContextä¸­å®šä¹‰äº†ä¸€äº›è·å–è¿™äº›å…ƒæ•°æ®çš„æ“ä½œ, å¦‚:</p>
<ul>
<li>registerBeanDefinition(): å¾€æ³¨å†Œè¡¨ä¸­æ³¨å†Œä¸€ä¸ªæ–°çš„ BeanDefinitionå®ä¾‹</li>
<li>getBeanDefinition(): æ ¹æ®Beançš„åç§°è·å–Beançš„å®šä¹‰</li>
<li>containsBeanDefinition(): åˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªBean</li>
<li>getBeanDefinitionNames(): è·å–æ‰€æœ‰Beançš„id(Name)</li>
</ul>
<hr>
<p><strong>â‘£ ä¸Applicationé…ç½®ç›¸å…³</strong></p>
<p>registerProperties()æ–¹æ³•: å‘BeanFactoryä¸­æ³¨å†Œé…ç½®æ–‡ä»¶</p>
<hr>
<p><strong>â‘¤ ä¸Beanæ“ä½œç›¸å…³æ–¹æ³•</strong></p>
<ul>
<li>getBean(String beanName): ä»å®¹å™¨ä¸­æ ¹æ®åç§°è·å–Bean</li>
<li>refresh(): å®ŒæˆBeançš„æ³¨å…¥å·¥ä½œ(å‘ä¾èµ–ä¸­æ³¨å…¥Bean)</li>
</ul>
<p><font color="#f00"><strong>ä¸Šè¿°æ–¹æ³•å…¶å®æ˜¯é€šè¿‡BeanFactoryå®ç°çš„</strong></font></p>
</blockquote>
<p>çˆ¶ç±»AbstractApplicationContextåˆå§‹åŒ–ä¹‹å, ä¼šå®Œæˆscan()å’Œrefresh()æ–¹æ³•å®ŒæˆBeanåˆ›å»ºå’ŒBeanæ³¨å…¥å·¥ä½œ</p>
<h3 id="å®¹å™¨å®ç°ç±»AnnotationConfigApplicationContext"><a href="#å®¹å™¨å®ç°ç±»AnnotationConfigApplicationContext" class="headerlink" title="å®¹å™¨å®ç°ç±»AnnotationConfigApplicationContext"></a>å®¹å™¨å®ç°ç±»AnnotationConfigApplicationContext</h3><p>å¯¹äºAnnotationConfigApplicationContextå¾ˆç®€å•(ä»–å°±æ˜¯ä¸€ä¸ªå¤–å£³è€Œå·²):</p>
<p>å¯¹äºAnnotationConfigApplicationContextå®ƒå®ç°äº†AnnotationConfigRegistryæ¥å£(è€ŒAbstractApplicationContextå®ç°äº†BeanDefinitionRegistryæ¥å£)</p>
<p>è™½ç„¶å’Œçˆ¶ç±»å®ç°çš„æ¥å£ä¸åŒ, ä½†æ˜¯AnnotationConfigRegistryä¹Ÿæ˜¯å®šä¹‰äº†ä¸€äº›ç»´æŠ¤BeanDefinitioné›†åˆçš„æ–¹æ³•</p>
<p>ä¸‹é¢å…ˆæ¥çœ‹ä¸€ä¸‹AnnotationConfigRegistry:</p>
<p>AnnotationConfigRegistry.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.registry;

import top.jasonkayzk.ioc.core.annotation.MyComponent;

/**
 * æ³¨è§£çš„æ³¨å†Œå™¨
 *
 * @author zk
 */
public interface AnnotationConfigRegistry {
    /**
     * å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªç±»è¿›è¡Œæ³¨å†Œ
     * è°ƒç”¨æ­¤æ–¹æ³•{@code register}æ˜¯å¹‚ç­‰çš„, å³:
     * å°†åŒä¸€ä¸ªæ³¨è§£è¿‡çš„ç±»æ³¨å†Œå¤šæ¬¡æ²¡æœ‰å‰¯ä½œç”¨!
     * &lt;p&gt;
     * Register one or more annotated classes to be processed.
     * Calls to {@code register} are idempotent; adding the same
     * annotated class more than once has no additional effect.
     *
     * @param annotatedClasses ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¢«æ³¨è§£çš„ç±»
     *                         å¦‚: {@link MyComponent @MyComponent} ç±»
     */
    void register(Class&lt;?&gt;... annotatedClasses);

    /**
     * åŸºäºæŒ‡å®šçš„åŒ…è¿›è¡Œæ‰«ææ³¨è§£ç±»
     *
     * Perform a scan within the specified base packages.
     *
     * @param basePackages the packages to check for annotated classes
     */
    void scan(String... basePackages);
}</code></pre>
<p>å†æ¥çœ‹ä¸€ä¸‹AnnotationConfigApplicationContextç±»</p>
<p>AnnotationConfigApplicationContext.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.context;

import top.jasonkayzk.ioc.core.registry.AnnotationConfigRegistry;
import top.jasonkayzk.ioc.core.scanner.ClassPathBeanDefinitionScanner;

/**
 * é€šè¿‡Annotationé…ç½®çš„ä¸Šä¸‹æ–‡å®¹å™¨
 *
 * @author zk
 */
public class AnnotationConfigApplicationContext extends AbstractApplicationContext implements AnnotationConfigRegistry {

    /**
     * åˆ›å»ºä¸€ä¸ªæ‰«æå™¨
     */
    private final ClassPathBeanDefinitionScanner scanner;

    public AnnotationConfigApplicationContext() {
        this.scanner = new ClassPathBeanDefinitionScanner(this);
    }

    public AnnotationConfigApplicationContext(String... basePackages) {
        // å®¹å™¨åˆå§‹åŒ–
        this();

        // åŠ è½½: æ‰«ææŒ‡å®šåŒ…è·¯å¾„ä¸‹çš„æ‰€æœ‰çš„ç±»
        // å°†æ‰€æœ‰çš„å¸¦æœ‰æŒ‡å®šæ ‡è®°çš„ç±»æ‰«æåˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œé›†åˆä¸­ä¿å­˜çš„æ˜¯ç±»çš„å…ƒæ•°æ®ä¿¡æ¯
        scan(basePackages);

        // æ³¨å…¥Bean
        refresh();
    }

    @Override
    public void register(Class&lt;?&gt;... annotatedClasses) {
    }

    @Override
    public void scan(String... basePackages) {
        this.scanner.scan(basePackages);
    }
}</code></pre>
<br>

<h2 id="ä¸‰-Beanå·¥å‚ç±»æ„é€ æ–¹æ³•"><a href="#ä¸‰-Beanå·¥å‚ç±»æ„é€ æ–¹æ³•" class="headerlink" title="ä¸‰. Beanå·¥å‚ç±»æ„é€ æ–¹æ³•"></a>ä¸‰. Beanå·¥å‚ç±»æ„é€ æ–¹æ³•</h2><p>åœ¨ä¸Šé¢AnnotationConfigApplicationContextæ„é€ æ—¶, é¦–å…ˆæ„é€ äº†çˆ¶ç±»AbstractApplicationContext</p>
<p>è€ŒAbstractApplicationContextåˆå§‹åŒ–äº†ä¸€ä¸ªç±»DefaultListableBeanFactory(å³Beanå·¥å‚)</p>
<p>BeanFactoryæ˜¯Springæ¡†æ¶ä¸­æ ¸å¿ƒçš„æ ¸å¿ƒ, å®ƒå®Œæˆäº†: Beançš„åˆå§‹åŒ–, æ³¨å…¥, ç®¡ç†ç­‰å„ç§æ ¸å¿ƒæ–¹æ³•</p>
<h3 id="BeanFactoryæ¥å£"><a href="#BeanFactoryæ¥å£" class="headerlink" title="BeanFactoryæ¥å£"></a>BeanFactoryæ¥å£</h3><p>å…ˆçœ‹ä¸€ä¸‹DefaultListableBeanFactoryå®ç°çš„æ¥å£BeanFactory</p>
<p>BeanFactory.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.factory;

/**
 * Springä¸­å·¥å‚æ¨¡å¼åˆ›å»ºBeançš„å·¥å‚æ¥å£
 *
 * @author zk
 */
public interface BeanFactory {
    /**
     * æ ¹æ®Beançš„åç§°è·å–Beanå¯¹è±¡
     *
     * @param beanName Beançš„åç§°
     * @return Beanå¯¹è±¡
     */
    Object getBean(String beanName);

    /**
     * çœŸæ­£å¼€å§‹è·å–Bean
     *
     * @param beanName Beançš„åç§°
     * @return Beanå¯¹è±¡
     */
    Object doGetBean(String beanName);

    /**
     * æ ¹æ®beançš„åç§°åˆ›å»ºBean
     *
     * @param beanName Beançš„åç§°
     * @return Beanå¯¹è±¡
     */
    Object createBean(String beanName);

    /**
     * æ ¹æ®beançš„åç§°çœŸæ­£å¼€å§‹åˆ›å»ºbean
     *
     * @param beanName Beançš„åç§°
     * @return Beanå¯¹è±¡
     */
    Object doCreateBean(String beanName);
}</code></pre>
<p>å…¶å®æ ¸å¿ƒæ–¹æ³•åªæœ‰ä¸¤ä¸ª: doGetBean(), doCreateBean()</p>
<p>åˆ†åˆ«ç”¨æ¥è·å–Beanå¯¹è±¡å’Œåˆ›å»ºBeanå¯¹è±¡(<strong>doCreateBeanå°¤å…¶å…³é”®!!</strong>)</p>
<hr>
<h3 id="æ„é€ DefaultListableBeanFactory"><a href="#æ„é€ DefaultListableBeanFactory" class="headerlink" title="æ„é€ DefaultListableBeanFactory"></a>æ„é€ DefaultListableBeanFactory</h3><p>å†æ¥çœ‹ä¸€ä¸‹DefaultListableBeanFactoryçš„å°éƒ¨åˆ†å†…å®¹:</p>
<pre><code class="java">public class DefaultListableBeanFactory implements BeanFactory {

    /**
     * ä¸€çº§ç¼“å­˜
     * ç”¨äºå­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„Beanï¼Œä»è¯¥ç¼“å­˜ä¸­æ‹¿å‡ºæ¥çš„Beanå¯ä»¥ç›´æ¥ä½¿ç”¨
     */
    private final Map&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;&gt;(256);

    /**
     * äºŒçº§ç¼“å­˜:
     * å­˜å‚¨çš„åŸå§‹çš„Bean(è¿˜æœªå®Œå…¨å¡«å……å±æ€§),
     * ç”¨äºè§£å†³Springä¸­çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œæ­¤æ—¶å·²ç»åˆ†é…äº†å†…å­˜åœ°å€
     * &lt;p&gt;
     * Cache of early singleton objects: bean name --&gt; bean instance
     */
    private final Map&lt;String, Object&gt; earlySingletonObjects = new HashMap&lt;&gt;(16);

    /**
     * ä¸‰çº§ç¼“å­˜:
     * å•ä¾‹å¯¹è±¡å·¥å‚çš„cacheï¼Œå­˜æ”¾beanå·¥å‚å¯¹è±¡ï¼Œç”¨äºè§£å†³å¾ªç¯ä¾èµ–
     * Cache of singleton factories: bean name --&gt; ObjectFactory
     */
    private final Map&lt;String, Object&gt; singletonFactories = new HashMap&lt;&gt;(16);

    /**
     * ä¿å­˜æ‰€æœ‰BeanPostProcessor
     */
    private Set&lt;BeanPostProcessor&gt; beanPostProcessorSet = new HashSet&lt;&gt;(16);

    /**
     * Beançš„æºæ•°æ®é›†åˆï¼Œå­˜å‚¨çš„æ˜¯æ‰«æå™¨æ‰«æçš„ç±»çš„æºæ•°æ®ä¿¡æ¯
     */
    public final Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new ConcurrentHashMap&lt;&gt;(128);

    /**
     * é…ç½®æ–‡ä»¶
     */
    private Properties properties = null;

    ......
}</code></pre>
<p>åœ¨DefaultListableBeanFactoryä¸­æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„é›†åˆ:</p>
<table>
<thead>
<tr>
<th align="left"><strong>é›†åˆåç§°</strong></th>
<th align="center"><strong>ä½œç”¨</strong></th>
<th align="left"><strong>è¯¦ç»†è¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>singletonObjects</strong></td>
<td align="center"><strong>ä¸€çº§ç¼“å­˜</strong></td>
<td align="left">ç”¨äº<strong>å­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„Bean</strong>ï¼Œä»è¯¥ç¼“å­˜ä¸­æ‹¿å‡ºæ¥çš„Beanå¯ä»¥ç›´æ¥ä½¿ç”¨</td>
</tr>
<tr>
<td align="left"><strong>earlySingletonObjects</strong></td>
<td align="center"><strong>äºŒçº§ç¼“å­˜</strong></td>
<td align="left"><strong>å­˜å‚¨çš„åŸå§‹çš„Bean(è¿˜æœªå®Œå…¨å¡«å……å±æ€§)</strong><br><font color="#f00"><strong>ç”¨äºè§£å†³Springä¸­çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œæ­¤æ—¶å·²ç»åˆ†é…äº†å†…å­˜åœ°å€</strong></font></td>
</tr>
<tr>
<td align="left"><strong>singletonFactories</strong></td>
<td align="center"><strong>ä¸‰çº§ç¼“å­˜</strong></td>
<td align="left"><strong>å•ä¾‹å¯¹è±¡å·¥å‚çš„cacheï¼Œå­˜æ”¾beanå·¥å‚å¯¹è±¡</strong><br><strong>ç”¨äºè§£å†³å¾ªç¯ä¾èµ–</strong></td>
</tr>
<tr>
<td align="left"><strong>beanDefinitionMap</strong></td>
<td align="center"></td>
<td align="left">Beançš„æºæ•°æ®é›†åˆï¼Œå­˜å‚¨çš„æ˜¯æ‰«æå™¨æ‰«æçš„ç±»çš„æºæ•°æ®ä¿¡æ¯</td>
</tr>
<tr>
<td align="left"><strong>beanPostProcessorSet</strong></td>
<td align="center"></td>
<td align="left">ä¿å­˜æ‰€æœ‰BeanPostProcessor</td>
</tr>
</tbody></table>
<p>åˆ†åˆ«ç”¨äº: è®°å½•Beançš„åˆ›å»ºè¿‡ç¨‹å’Œæ‰€æœ‰çš„Beançš„å€™é€‰èµ„æºé›†åˆä»¥åŠæ‰€æœ‰çš„Beançš„åç½®å¤„ç†å™¨ï¼Œè¿™äº›åœ¨åé¢éƒ½ä¼šè¢«ç”¨åˆ°!</p>
<blockquote>
<br>

<p><strong>è¯´æ˜:</strong></p>
<p>æˆªè‡³åˆ°ç°åœ¨: <strong>åœ¨æ‰§è¡ŒAnnotationConfigApplicationContextçš„this()æ„é€ å‡½æ•°ä¹‹å‰çš„äº‹æƒ…åŸºæœ¬ä¸Šéƒ½å¤„ç†çš„å·®ä¸å¤šäº†</strong></p>
<p>ç°åœ¨å¯ä»¥å¼€å§‹è¿›è¡Œ<strong>åˆå§‹åŒ–æ“ä½œäº†:</strong></p>
<p>åœ¨AnnotationConfigApplicationContextçš„æ„é€ å‡½æ•°ä¸­ï¼Œå®ä¾‹åŒ–äº†ä¸€ä¸ªClassPathBeanDefinitionScannerç±»(ä¹Ÿå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªç±»çš„æ‰«æå™¨):</p>
<p>ç”¨äºæ‰«æéœ€è¦æ‰«æçš„åŒ…è·¯å¾„ä¸‹çš„æ‰€æœ‰çš„ç±»ï¼Œ<strong>å°†æŒ‡å®šçš„ç±»æ·»åŠ åˆ°å€™é€‰èµ„æºé›†åˆä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çœ‹åˆ°çš„è¿™ä¸ªbeanDefinitionMapé›†åˆä¸­ï¼›</strong></p>
</blockquote>
<br>

<h2 id="å››-Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition"><a href="#å››-Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition" class="headerlink" title="å››. Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition"></a>å››. Beanå…ƒæ•°æ®å®šä¹‰BeanDefinition</h2><p>åœ¨æŸ¥çœ‹ClassPathBeanDefinitionScannerä¹‹å‰, éœ€è¦çœ‹ä¸€ä¸‹BeanDefinitionè¿™ä¸ªç±»</p>
<p>å› ä¸ºåœ¨DefaultListableBeanFactoryä¸­ç»´æŠ¤äº†ä¸€ä¸ªBeanDefinitionçš„è¡¨beanDefinitionMap(åŒ…æ‹¬Beançš„æ‰€æœ‰å…ƒæ•°æ®ä¿¡æ¯)</p>
<p>æ‰€ä»¥åœ¨åˆ†æDefaultListableBeanFactoryä¹‹å‰, <strong>å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªBeanDefinition</strong></p>
<p>BeanDefinition.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.entity;

import lombok.Data;

/**
 * JavaBeanå…ƒæ•°æ®å®šä¹‰ï¼Œè®°å½•å€™é€‰Beançš„è¡Œä¸ºä¿¡æ¯
 *
 * @author zk
 */
@Data
public class BeanDefinition {

    /**
     * Beançš„name(åŒæ—¶ä¹Ÿæ˜¯Id)
     */
    private String beanName;

    /**
     * Beançš„å­—èŠ‚ç å¯¹è±¡
     */
    public Class&lt;?&gt; beanClass;

    /**
     * Beançš„å…¨é™åˆ¶å
     */
    public String beanReferenceName;

    /**
     * æ˜¯å¦æ˜¯æŠ½è±¡çš„
     */
    private boolean abstractFlag = false;

    /**
     * æ˜¯å¦æ˜¯æ‡’åŠ è½½çš„
     */
    private boolean lazyInit = false;

    /**
     * Beançš„ä½œç”¨åŸŸ: è®¾ç½®é»˜è®¤å•ä¾‹
     */
    private String scope = &quot;singleton&quot;;

    public BeanDefinition(String beanName, Class&lt;?&gt; beanClass, String beanReferenceName) {
        this.beanName = beanName;
        this.beanClass = beanClass;
        this.beanReferenceName = beanReferenceName;
    }

    public BeanDefinition(String beanName, Class&lt;?&gt; beanClass, String beanReferenceName, boolean abstractFlag) {
        this.beanName = beanName;
        this.beanClass = beanClass;
        this.beanReferenceName = beanReferenceName;
        this.abstractFlag = abstractFlag;
    }

    public BeanDefinition(String beanName, Class&lt;?&gt; beanClass, String beanReferenceName, boolean lazyInit,  boolean abstractFlag) {
        this.beanName = beanName;
        this.beanClass = beanClass;
        this.beanReferenceName = beanReferenceName;
        this.lazyInit = lazyInit;
        this.abstractFlag = abstractFlag;
    }
}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p>å¯ä»¥çœ‹å‡ºBeanDefinitionå°±æ˜¯ä¸€ä¸ªç®€å•çš„POJO(æ‰€ä»¥ä¹Ÿè¢«Lombokçš„@Dataæ ‡æ³¨)</p>
<p>ä¸‹é¢å¯¹BeanDefinitionåŒ…æ‹¬çš„ä¸€äº›å±æ€§åšç®€å•è¯´æ˜:</p>
<p><strong>â‘  beanName</strong></p>
<p>ç†Ÿæ‚‰Springçš„éƒ½çŸ¥é“, Springä¸­ä¸èƒ½å­˜åœ¨ä¸¤ä¸ªç›¸åŒå‘½åçš„Bean(è¿™ä¸ªnameè¢«ä½œä¸ºbeanIdä½¿ç”¨)</p>
<p><strong>â‘¡ beanClass</strong></p>
<p>ä¸beanNameå¯¹åº”çš„ç±»å¯¹è±¡(åé¢é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡)</p>
<p><strong>â‘¢ beanReferenceName</strong></p>
<p>Beançš„å…¨é™å®šå</p>
<p><strong>â‘£ abstractFlag</strong></p>
<p>Beanæ˜¯å¦æ˜¯æŠ½è±¡çš„(æŠ½è±¡ç±»/æ¥å£æ— æ³•åˆ›å»ºå®ä¾‹!)</p>
<p><strong>â‘¤ æ˜¯å¦æ˜¯æ‡’åŠ è½½çš„</strong></p>
<p>åœ¨Springä¸­å•ä¾‹beané»˜è®¤ä¸æ˜¯æ‡’åŠ è½½çš„, é€šå¸¸ä¼šåœ¨å¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–</p>
<p>è‹¥æ ‡æ³¨ä¸º@Lazy, åˆ™ä¼šåœ¨ä½¿ç”¨æ—¶æ‰è¿›è¡Œåˆå§‹åŒ–</p>
<p><strong>â‘¥ scope</strong></p>
<p>Beançš„ä½œç”¨åŸŸ: <strong>åœ¨Springä¸­é»˜è®¤Beanä¸ºå•ä¾‹</strong></p>
<p>ä¸‹é¢ä¸ºSpringä¸­äº”ç§ä½œç”¨åŸŸ</p>
<table>
<thead>
<tr>
<th><strong>ä½œç”¨åŸŸ</strong></th>
<th><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>singleton</strong></td>
<td>åœ¨spring IoCå®¹å™¨ä»…å­˜åœ¨ä¸€ä¸ªBeanå®ä¾‹ï¼ŒBeanä»¥å•ä¾‹æ–¹å¼å­˜åœ¨ï¼Œbeanä½œç”¨åŸŸèŒƒå›´çš„é»˜è®¤å€¼</td>
</tr>
<tr>
<td><strong>prototype</strong></td>
<td><strong>æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹</strong>ï¼Œå³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ï¼Œç›¸å½“äºæ‰§è¡ŒnewXxxBean()</td>
</tr>
<tr>
<td><strong>request</strong></td>
<td>æ¯æ¬¡<strong>HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Bean</strong><br>è¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºwebçš„Spring WebApplicationContextç¯å¢ƒ</td>
</tr>
<tr>
<td><strong>session</strong></td>
<td><strong>åŒä¸€ä¸ªHTTP Sessionå…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒSessionä½¿ç”¨ä¸åŒçš„Bean</strong><br>è¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºwebçš„Spring WebApplicationContextç¯å¢ƒ</td>
</tr>
<tr>
<td><strong>application</strong></td>
<td><strong>é™å®šä¸€ä¸ªBeançš„ä½œç”¨åŸŸä¸º<code>ServletContext</code>çš„ç”Ÿå‘½å‘¨æœŸ</strong><br>è¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºwebçš„Spring WebApplicationContextç¯å¢ƒ</td>
</tr>
</tbody></table>
</blockquote>
<br>

<h2 id="äº”-Beanæ‰«æå™¨ClassPathBeanDefinitionScanner"><a href="#äº”-Beanæ‰«æå™¨ClassPathBeanDefinitionScanner" class="headerlink" title="äº”. Beanæ‰«æå™¨ClassPathBeanDefinitionScanner"></a>äº”. Beanæ‰«æå™¨ClassPathBeanDefinitionScanner</h2><p>å½“this()æ–¹æ³•å®Œæˆåï¼Œç´§æ¥ç€ï¼Œæˆ‘ä»¬å¼€å§‹è¿›è¡ŒåŒ…çš„æ‰«æå·¥ä½œï¼Œä¹Ÿå°±æ˜¯scan(basePackages)æ–¹æ³•:</p>
<p>ä»–æ˜¯é€šè¿‡åœ¨AnnotationConfigApplicationContextç±»åˆå§‹åŒ–çš„ClassPathBeanDefinitionScannerç±»çš„scan(basePackages)æ–¹æ³•å®ç°çš„</p>
<h3 id="ClassPathBeanDefinitionScannerä»£ç "><a href="#ClassPathBeanDefinitionScannerä»£ç " class="headerlink" title="ClassPathBeanDefinitionScannerä»£ç "></a>ClassPathBeanDefinitionScannerä»£ç </h3><p>ClassPathBeanDefinitionScannerçš„ä»£ç å¦‚ä¸‹:</p>
<p>ClassPathBeanDefinitionScanner.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.scanner;

import org.apache.commons.lang3.StringUtils;
import top.jasonkayzk.ioc.app.controller.CustomerController;
import top.jasonkayzk.ioc.core.annotation.MyComponent;
import top.jasonkayzk.ioc.core.annotation.MyController;
import top.jasonkayzk.ioc.core.annotation.MyLazy;
import top.jasonkayzk.ioc.core.annotation.MyRequestMapping;
import top.jasonkayzk.ioc.core.annotation.MyService;
import top.jasonkayzk.ioc.core.entity.BeanDefinition;
import top.jasonkayzk.ioc.core.entity.IocConstant;
import top.jasonkayzk.ioc.core.registry.BeanDefinitionRegistry;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.lang.annotation.Annotation;
import java.lang.annotation.Documented;
import java.lang.annotation.Inherited;
import java.lang.annotation.Retention;
import java.lang.annotation.Target;
import java.lang.reflect.Modifier;
import java.net.URL;
import java.nio.charset.StandardCharsets;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Objects;
import java.util.Properties;
import java.util.Set;

/**
 * ç±»æ‰«æå™¨
 *
 * @author zk
 */
public class ClassPathBeanDefinitionScanner {

    /**
     * Beanæ³¨å†Œè¡¨
     */
    private final BeanDefinitionRegistry registry;

    /**
     * æ‰«æåŒ…ä¸‹æ‰€æœ‰çš„ç±»çš„å­—èŠ‚ç å¯¹è±¡(å€™é€‰èµ„æºå’Œéå€™é€‰èµ„æº)
     */
    private final static Set&lt;String&gt; BASE_PACKAGE_CLASS_NAME = new HashSet&lt;&gt;();

    /**
     * å­˜å‚¨æ‰€æœ‰çš„å€™é€‰èµ„æºçš„åç§°
     */
    private final static Set&lt;String&gt; BEAN_DEFINITION_NAMES = new HashSet&lt;&gt;();

    public ClassPathBeanDefinitionScanner(BeanDefinitionRegistry registry) {
        this.registry = registry;
    }

    /**
     * å¼€å§‹è¿›è¡ŒåŒ…æ‰«æ
     *
     * @param basePackages åŒ…çš„è·¯å¾„
     */
    public void scan(String[] basePackages) {
        doScan(basePackages);
    }

    /**
     * è·å–æ‰€æœ‰çš„å€™é€‰èµ„æºå…ƒæ•°æ®ä¿¡æ¯
     *
     * @param basePackages åŒ…çš„è·¯å¾„
     */
    private void doScan(String[] basePackages) {
        Set&lt;BeanDefinition&gt; candidates = new HashSet&lt;&gt;();

        // æ‰«æå¹¶æ³¨å†Œé…ç½®æ–‡ä»¶
        Properties properties = findAllConfigurationFile();
        registry.registerProperties(properties);

        // æ‰«ææ‰€æœ‰çš„å€™é€‰èµ„æºåˆ—è¡¨
        findCandidateComponents(basePackages, candidates);

        // å°†æ‰«æå‡ºæ¥çš„å€™é€‰èµ„æºä¿¡æ¯æ·»åŠ åˆ°æ³¨å†Œè¡¨ä¸­
        candidates.forEach(beanDefinition -&gt; registry.registerBeanDefinition(beanDefinition.getBeanName(), beanDefinition));
    }

    /**
     * è·å–æ‰€æœ‰çš„å€™é€‰èµ„æºæºæ•°æ®ä¿¡æ¯
     *
     * @param basePackages éœ€è¦æ‰«æçš„åŒ…çš„å€™é€‰èµ„æºä¿¡æ¯
     */
    private void findCandidateComponents(String[] basePackages, Set&lt;BeanDefinition&gt; candidates) {
        // åŠ è½½æ‰€æœ‰class
        for (String basePackage : basePackages) {
            loadClass(basePackage);
        }

        // è·å–åˆ°éœ€è¦æ‰«æçš„åŒ…è·¯å¾„ä¸‹æ‰€æœ‰çš„ç±»å
        // å¼€å§‹æŒ‘é€‰å‡ºéœ€è¦æ‰€æœ‰çš„å€™é€‰èµ„æºä¿¡æ¯: BeanDefinition
        BASE_PACKAGE_CLASS_NAME.forEach(packageClassName -&gt; {
            try {
                Class&lt;?&gt; packageClass = Class.forName(packageClassName);

                // åˆ¤æ–­æ˜¯å¦æ˜¯å€™é€‰èµ„æº(æºå¸¦æŒ‡å®šæ³¨è§£: @MyComponent, @MyService)
                Class&lt;?&gt; annos = getAnnos(packageClass);
                if (!Objects.isNull(annos)) {
                    String beanName;
                    // è¢«@MyComponentæ ‡æ³¨, å¹¶ä¸”@MyComponentçš„name(id)ä¸ä¸ºç©º
                    // æŒ‰ç…§@MyComponentçš„nameæ¥æ³¨å†ŒbeanName;
                    if (annos.getTypeName().equals(MyComponent.class.getTypeName()) &amp;&amp; StringUtils.isNotEmpty(packageClass.getAnnotation(MyComponent.class).name())) {
                        beanName = packageClass.getAnnotation(MyComponent.class).name();
                        // è¢«@MyServiceæ ‡æ³¨, å¹¶ä¸”@MyServiceçš„name(id)ä¸ä¸ºç©º
                        // æŒ‰ç…§@MyServiceçš„nameæ¥æ³¨å†ŒbeanName;
                    } else if (annos.getTypeName().equals(MyService.class.getTypeName()) &amp;&amp; StringUtils.isNotEmpty(packageClass.getAnnotation(MyService.class).name())) {
                        beanName = packageClass.getAnnotation(MyService.class).name();
                    } else {
                        // å¦åˆ™nameä¸ºç©º, æŒ‰ç…§ç±»åé¦–å­—æ¯å˜æˆå°å†™åˆ›å»ºBean
                        // (æ­¤å¤„æ³¨æ„: ç”±äºæ˜¯å•ä¾‹, è¿™æ ·åšä¸€å®šä¸ä¼šé‡å¤!!!)
                        beanName = toLowercaseIndex(packageClass.getSimpleName());
                    }

                    // å¦‚æœBEAN_DEFINITION_NAMESé›†åˆä¸­å­˜åœ¨äº†beanName
                    // è¯´æ˜beanNameå£°æ˜é‡å¤!
                    if (BEAN_DEFINITION_NAMES.contains(beanName)) {
                        throw new RuntimeException(&quot;beanNameå·²ç»å­˜åœ¨ï¼š&quot; + beanName);
                    }

                    // åˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ˜¯æŠ½è±¡çš„
                    boolean isAbstract = false;
                    if (Modifier.isAbstract(packageClass.getModifiers())) {
                        isAbstract = true;
                    }

                    // åˆ¤æ–­æ˜¯å¦æ˜¯æ‡’åŠ è½½çš„
                    if (packageClass.isAnnotationPresent(MyLazy.class)) {
                        candidates.add(new BeanDefinition(beanName, packageClass, packageClassName, true, isAbstract));
                    } else {
                        candidates.add(new BeanDefinition(beanName, packageClass, packageClassName, isAbstract));
                    }

                    // åŠ å…¥Bean
                    BEAN_DEFINITION_NAMES.add(beanName);
                }
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
        });
    }

    /**
     * ç±»åé¦–å­—æ¯è½¬å°å†™
     *
     * @param name ç±»å
     * @return ç±»åé¦–å­—æ¯è½¬å°å†™åçš„å­—ç¬¦ä¸²
     */
    public static String toLowercaseIndex(String name) {
        if (StringUtils.isNotEmpty(name)) {
            return name.substring(0, 1).toLowerCase() + name.substring(1);
        }
        return name;
    }

    /**
     * æ‰«æé…ç½®æ–‡ä»¶
     * &lt;p&gt;
     * ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºä¼˜å…ˆçº§:
     * &lt;p&gt;
     * include &gt;&gt; active &gt;&gt; é»˜è®¤
     */
    private Properties findAllConfigurationFile() {
        Properties properties = new Properties();
        InputStream is = null, is1 = null;
        try {
            // å¯»æ‰¾: &quot;application.properties&quot;æ–‡ä»¶
            is = this.getClass().getClassLoader().getResourceAsStream(&quot;application.properties&quot;);
            if (!Objects.isNull(is)) {
                InputStreamReader inputStreamReader = new InputStreamReader(is, StandardCharsets.UTF_8);
                properties.load(inputStreamReader);
            }
            // å¦‚æœpropertiesä¸­å­˜åœ¨IocConstant.ACTIVE(&quot;spring.profiles.active&quot;)
            // éœ€è¦æ‰«æapplication-${spring.profiles.active}.propertiesé…ç½®
            if (properties.containsKey(IocConstant.ACTIVE) &amp;&amp; !Objects.isNull(properties.get(IocConstant.ACTIVE))) {
                is1 = this.getClass().getClassLoader().getResourceAsStream(&quot;application-&quot; + properties.get(IocConstant.ACTIVE) + &quot;.properties&quot;);
                if (!Objects.isNull(is1)) {
                    InputStreamReader inputStreamReader = new InputStreamReader(is1, StandardCharsets.UTF_8);
                    properties.load(inputStreamReader);
                }
            }
            // å¦‚æœpropertiesä¸­å­˜åœ¨IocConstant.INCLUDE(&quot;spring.profiles.include&quot;)
            // éœ€è¦æ‰«æapplication-${spring.profiles.include}.propertiesé…ç½®
            if (properties.containsKey(IocConstant.INCLUDE) &amp;&amp; !Objects.isNull(properties.get(IocConstant.INCLUDE))) {
                is1 = this.getClass().getClassLoader().getResourceAsStream(&quot;application-&quot; + properties.get(IocConstant.INCLUDE) + &quot;.properties&quot;);
                if (!Objects.isNull(is1)) {
                    InputStreamReader inputStreamReader = new InputStreamReader(is1, StandardCharsets.UTF_8);
                    properties.load(inputStreamReader);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (is1 != null) {
                try {
                    is1.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        return properties;
    }

    /**
     * åŠ è½½æ‰€æœ‰çš„å€™é€‰èµ„æºä¿¡æ¯
     *
     * @param basePackage éœ€è¦æ‰«æçš„åŒ…çš„å€™é€‰èµ„æºä¿¡æ¯
     */
    private void loadClass(String basePackage) {
        URL url = this.getClass().getClassLoader().getResource(basePackage.replaceAll(&quot;\\.&quot;, &quot;/&quot;));
        File file = new File(Objects.requireNonNull(url).getFile());
        if (file.exists() &amp;&amp; file.isDirectory()) {
            File[] files = file.listFiles();
            for (File fileSon : Objects.requireNonNull(files)) {
                if (fileSon.isDirectory()) {
                    // é€’å½’æ‰«æ
                    loadClass(basePackage + &quot;/&quot; + fileSon.getName());
                } else {
                    // æ˜¯æ–‡ä»¶å¹¶ä¸”æ˜¯ä»¥ .classç»“å°¾
                    if (fileSon.getName().endsWith(&quot;.class&quot;)) {
                        String beanReferenceName = basePackage.replace(&quot;/&quot;, &quot;.&quot;) + &quot;.&quot; + fileSon.getName().replaceAll(&quot;.class&quot;, &quot;&quot;);
                        System.out.println(&quot;æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š &quot; + beanReferenceName);
                        BASE_PACKAGE_CLASS_NAME.add(beanReferenceName);
                    }
                }
            }
        } else {
            throw new RuntimeException(&quot;æ²¡æœ‰æ‰¾åˆ°éœ€è¦æ‰«æçš„æ–‡ä»¶ç›®å½•&quot;);
        }
    }

    /**
     * åˆ¤æ–­å½“å‰ç±»æ˜¯å¦åŒ…å«ç»„åˆæ³¨è§£: @MyComponent
     * æ³¨æ„: interface java.lang.annotation.Documentedç­‰å­˜åœ¨å¾ªç¯ï¼Œä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œæ‰€ä»¥éœ€è¦æ’é™¤javaçš„æºæ³¨è§£
     *
     * @param clazz ç±»å¯¹è±¡
     */
    private static Class&lt;?&gt; getAnnos(Class&lt;?&gt; clazz) {
        Annotation[] annotations = clazz.getAnnotations();
        for (Annotation annotation : annotations) {
            if (annotation.annotationType() != Deprecated.class &amp;&amp;
                    annotation.annotationType() != SuppressWarnings.class &amp;&amp;
                    annotation.annotationType() != Override.class &amp;&amp;
                    annotation.annotationType() != Target.class &amp;&amp;
                    annotation.annotationType() != Retention.class &amp;&amp;
                    annotation.annotationType() != Documented.class &amp;&amp;
                    annotation.annotationType() != Inherited.class &amp;&amp;
                    annotation.annotationType() != MyRequestMapping.class
            ) {
                if (annotation.annotationType() == MyComponent.class) {
                    return clazz;
                } else {
                    return getAnnos(annotation.annotationType());
                }
            }
        }
        return null;
    }
}</code></pre>
<p>ClassPathBeanDefinitionScannerçš„ä»£ç ä¹Ÿæ˜¯æ¯”è¾ƒå¤šå“ˆâ€¦æˆ‘ä»¬ä¸€ç‚¹ä¸€ç‚¹æ¥åˆ†æ</p>
<hr>
<h3 id="Scannerçš„åŠŸèƒ½"><a href="#Scannerçš„åŠŸèƒ½" class="headerlink" title="Scannerçš„åŠŸèƒ½"></a><strong>Scannerçš„åŠŸèƒ½</strong></h3><p>é¦–å…ˆå†è¯´ä¸€ä¸‹ClassPathBeanDefinitionScannerçš„åŠŸèƒ½:</p>
<ul>
<li>é¦–å…ˆæ‰«æå¹¶æ³¨å†Œé…ç½®æ–‡ä»¶(Springä¸­é»˜è®¤æ˜¯application.properties)</li>
<li>å…¶æ¬¡é€šè¿‡æ‰«æç»™å®šçš„basePackagesæ•°ç»„ç»™å‡ºçš„åŒ…è·¯å¾„, æ‰¾åˆ°è¢«æ³¨è§£çš„ç±»</li>
<li>ç„¶åé€šè¿‡æ„é€ å™¨ä¼ å…¥çš„beanRegistryå¯¹beançš„BeanDefinitionè¿›è¡Œæ³¨å†Œ</li>
</ul>
<hr>
<h3 id="Scannerçš„å±æ€§"><a href="#Scannerçš„å±æ€§" class="headerlink" title="Scannerçš„å±æ€§"></a><strong>Scannerçš„å±æ€§</strong></h3><p>ScanneråŒ…æ‹¬çš„å±æ€§æœ‰:</p>
<ul>
<li>BeanDefinitionRegistry registry: Beanæ³¨å†Œè¡¨</li>
<li>BASE_PACKAGE_CLASS_NAME: æ‰«æåŒ…ä¸‹æ‰€æœ‰çš„ç±»çš„å­—èŠ‚ç å¯¹è±¡(å€™é€‰èµ„æºå’Œéå€™é€‰èµ„æº)</li>
<li>BEAN_DEFINITION_NAMES: å­˜å‚¨æ‰€æœ‰çš„å€™é€‰èµ„æºçš„åç§°</li>
</ul>
<blockquote>
<br>

<p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯:</p>
<p><font color="#f00"><strong>registryå¹¶ä¸æ˜¯åœ¨Scannerä¸­åˆå§‹åŒ–çš„, è€Œæ˜¯Contextåˆå§‹åŒ–ä¹‹å, é€šè¿‡Scannerçš„æ„é€ å™¨ä¼ é€’ç»™Scannerçš„!</strong></font></p>
<p><font color="#f00"><strong>å³: æœ€ç»ˆScanneræ‰«æçš„BeanDefinitionä¼šç›´æ¥ä¼ å…¥Contextçš„registryä¸­!</strong></font></p>
</blockquote>
<hr>
<h3 id="doScan-æ–¹æ³•"><a href="#doScan-æ–¹æ³•" class="headerlink" title="doScan()æ–¹æ³•"></a><strong>doScan()æ–¹æ³•</strong></h3><p>scan()æ–¹æ³•è°ƒç”¨äº†doScan()æ–¹æ³•</p>
<p>è€ŒdoScan()æ˜¯Scannerçš„æ ¸å¿ƒæ–¹æ³•, contextæ­£æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•å®Œæˆäº†åŒ…çš„æ‰«æ</p>
<p>ä¸‹é¢æ˜¯doScan()æ–¹æ³•</p>
<pre><code class="java">/**
     * è·å–æ‰€æœ‰çš„å€™é€‰èµ„æºå…ƒæ•°æ®ä¿¡æ¯
     *
     * @param basePackages åŒ…çš„è·¯å¾„
     */
private void doScan(String[] basePackages) {
    Set&lt;BeanDefinition&gt; candidates = new HashSet&lt;&gt;();

    // æ‰«æå¹¶æ³¨å†Œé…ç½®æ–‡ä»¶
    Properties properties = findAllConfigurationFile();
    registry.registerProperties(properties);

    // æ‰«ææ‰€æœ‰çš„å€™é€‰èµ„æºåˆ—è¡¨
    findCandidateComponents(basePackages, candidates);

    // å°†æ‰«æå‡ºæ¥çš„å€™é€‰èµ„æºä¿¡æ¯æ·»åŠ åˆ°æ³¨å†Œè¡¨ä¸­
    candidates.forEach(beanDefinition -&gt; registry.registerBeanDefinition(beanDefinition.getBeanName(), beanDefinition));
}</code></pre>
<p>å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°, doScan()æ–¹æ³•æ­£æ˜¯ä¸€æ­¥ä¸€æ­¥å®ç°äº†ä¸Šè¿°æ‰€è¯´çš„Scannerçš„åŠŸèƒ½, åˆ†åˆ«é€šè¿‡ä»¥ä¸‹æ–¹æ³•:</p>
<ul>
<li>findAllConfigurationFile()</li>
<li>findCandidateComponents()</li>
<li>registry.registerBeanDefinition()</li>
</ul>
<p>ä¸‹é¢ä¸€ä¸€æ¥çœ‹:</p>
<p><strong>â‘  findAllConfigurationFile()</strong></p>
<p>æ­¤æ–¹æ³•å®Œæˆäº†ä»classpathä¸­è¯»å–å¹¶è½½å…¥é…ç½®æ–‡ä»¶</p>
<p>ç†Ÿæ‚‰Springçš„äººéƒ½çŸ¥é“, é»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯application.properties</p>
<p>ä¸‹é¢æ¥çœ‹è¿™ä¸ªæ–¹æ³•:</p>
<pre><code class="java">/**
     * æ‰«æé…ç½®æ–‡ä»¶
     * &lt;p&gt;
     * ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºä¼˜å…ˆçº§:
     * &lt;p&gt;
     * include &gt;&gt; active &gt;&gt; é»˜è®¤
     */
private Properties findAllConfigurationFile() {
    Properties properties = new Properties();
    InputStream is = null, is1 = null;
    try {
        // å¯»æ‰¾: &quot;application.properties&quot;æ–‡ä»¶
        is = this.getClass().getClassLoader().getResourceAsStream(&quot;application.properties&quot;);
        if (!Objects.isNull(is)) {
            InputStreamReader inputStreamReader = new InputStreamReader(is, StandardCharsets.UTF_8);
            properties.load(inputStreamReader);
        }
        // å¦‚æœpropertiesä¸­å­˜åœ¨IocConstant.ACTIVE(&quot;spring.profiles.active&quot;)
        // éœ€è¦æ‰«æapplication-${spring.profiles.active}.propertiesé…ç½®
        if (properties.containsKey(IocConstant.ACTIVE) &amp;&amp; !Objects.isNull(properties.get(IocConstant.ACTIVE))) {
            is1 = this.getClass().getClassLoader().getResourceAsStream(&quot;application-&quot; + properties.get(IocConstant.ACTIVE) + &quot;.properties&quot;);
            if (!Objects.isNull(is1)) {
                InputStreamReader inputStreamReader = new InputStreamReader(is1, StandardCharsets.UTF_8);
                properties.load(inputStreamReader);
            }
        }
        // å¦‚æœpropertiesä¸­å­˜åœ¨IocConstant.INCLUDE(&quot;spring.profiles.include&quot;)
        // éœ€è¦æ‰«æapplication-${spring.profiles.include}.propertiesé…ç½®
        if (properties.containsKey(IocConstant.INCLUDE) &amp;&amp; !Objects.isNull(properties.get(IocConstant.INCLUDE))) {
            is1 = this.getClass().getClassLoader().getResourceAsStream(&quot;application-&quot; + properties.get(IocConstant.INCLUDE) + &quot;.properties&quot;);
            if (!Objects.isNull(is1)) {
                InputStreamReader inputStreamReader = new InputStreamReader(is1, StandardCharsets.UTF_8);
                properties.load(inputStreamReader);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        if (is1 != null) {
            try {
                is1.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return properties;
}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p><strong>â‘ </strong> æ–¹æ³•é¦–å…ˆä¼šå¯»æ‰¾: â€œapplication.propertiesâ€æ–‡ä»¶, å¦‚æœæ‰¾åˆ°åˆ™ä¼šè§£æå…¶ä¸­é…ç½®(properties.load()æ–¹æ³•)</p>
<p><strong>â‘¡</strong> <strong>ä¹‹å,</strong> å¦‚æœpropertiesä¸­å­˜åœ¨IocConstant.ACTIVE(â€œspring.profiles.activeâ€), åˆ™ä¼šæ‰«æapplication-${spring.profiles.active}.propertiesé…ç½®</p>
<p><strong>â‘¢</strong> <strong>ä¹‹å,</strong> å¦‚æœpropertiesä¸­å­˜åœ¨IocConstant.INCLUDE(â€œspring.profiles.includeâ€), åˆ™ä¼šæ‰«æapplication-${spring.profiles.include}.propertiesé…ç½®</p>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯properties.load()æ–¹æ³•:</strong></p>
<p><font color="#f00"><strong>å¯¹äºåŒä¸€ä¸ªpropertieså¯¹è±¡, å¤šæ¬¡è°ƒç”¨load()æ–¹æ³•ä»…ä»…ä¼šè¦†ç›–æ‰keyç›¸åŒçš„å±æ€§, loadå¤šä¸ªä¸åŒçš„æµçš„ä¸åŒå±æ€§åˆ™ä¼šå åŠ å±æ€§(è€Œä¸æ˜¯è¦†ç›–!)</strong></font></p>
<p><font color="#f00"><strong>æ‰€ä»¥ä»è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºSpringçš„é…ç½®ä¼˜å…ˆçº§: <code>include &gt;&gt; active &gt;&gt; é»˜è®¤</code>, å› ä¸ºåé¢çš„å±æ€§å¯èƒ½è¦†ç›–å‰é¢çš„å±æ€§</strong></font></p>
</blockquote>
<hr>
<p><strong>â‘¡ findCandidateComponents()</strong></p>
<p>é€šè¿‡findAllConfigurationFile()æ–¹æ³•åŠ è½½è¿‡æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ä¹‹å, æ¥ä¸‹æ¥è¿›è¡ŒBeançš„æ‰«æ</p>
<p>findCandidateComponents()æ–¹æ³•:</p>
<pre><code class="java">/**
     * è·å–æ‰€æœ‰çš„å€™é€‰èµ„æºæºæ•°æ®ä¿¡æ¯
     *
     * @param basePackages éœ€è¦æ‰«æçš„åŒ…çš„å€™é€‰èµ„æºä¿¡æ¯
     */
private void findCandidateComponents(String[] basePackages, Set&lt;BeanDefinition&gt; candidates) {
    // åŠ è½½æ‰€æœ‰class
    for (String basePackage : basePackages) {
        loadClass(basePackage);
    }

    // è·å–åˆ°éœ€è¦æ‰«æçš„åŒ…è·¯å¾„ä¸‹æ‰€æœ‰çš„ç±»å
    // å¼€å§‹æŒ‘é€‰å‡ºéœ€è¦æ‰€æœ‰çš„å€™é€‰èµ„æºä¿¡æ¯: BeanDefinition
    BASE_PACKAGE_CLASS_NAME.forEach(packageClassName -&gt; {
        try {
            Class&lt;?&gt; packageClass = Class.forName(packageClassName);

            // åˆ¤æ–­æ˜¯å¦æ˜¯å€™é€‰èµ„æº(æºå¸¦æŒ‡å®šæ³¨è§£: @MyComponent, @MyService)
            Class&lt;?&gt; annos = getAnnos(packageClass);
            if (!Objects.isNull(annos)) {
                String beanName;
                // è¢«@MyComponentæ ‡æ³¨, å¹¶ä¸”@MyComponentçš„name(id)ä¸ä¸ºç©º
                // æŒ‰ç…§@MyComponentçš„nameæ¥æ³¨å†ŒbeanName;
                if (annos.getTypeName().equals(MyComponent.class.getTypeName()) &amp;&amp; StringUtils.isNotEmpty(packageClass.getAnnotation(MyComponent.class).name())) {
                    beanName = packageClass.getAnnotation(MyComponent.class).name();
                    // è¢«@MyServiceæ ‡æ³¨, å¹¶ä¸”@MyServiceçš„name(id)ä¸ä¸ºç©º
                    // æŒ‰ç…§@MyServiceçš„nameæ¥æ³¨å†ŒbeanName;
                } else if (annos.getTypeName().equals(MyService.class.getTypeName()) &amp;&amp; StringUtils.isNotEmpty(packageClass.getAnnotation(MyService.class).name())) {
                    beanName = packageClass.getAnnotation(MyService.class).name();
                } else {
                    // å¦åˆ™nameä¸ºç©º, æŒ‰ç…§ç±»åé¦–å­—æ¯å˜æˆå°å†™åˆ›å»ºBean
                    // (æ­¤å¤„æ³¨æ„: ç”±äºæ˜¯å•ä¾‹, è¿™æ ·åšä¸€å®šä¸ä¼šé‡å¤!!!)
                    beanName = toLowercaseIndex(packageClass.getSimpleName());
                }

                // å¦‚æœBEAN_DEFINITION_NAMESé›†åˆä¸­å­˜åœ¨äº†beanName
                // è¯´æ˜beanNameå£°æ˜é‡å¤!
                if (BEAN_DEFINITION_NAMES.contains(beanName)) {
                    throw new RuntimeException(&quot;beanNameå·²ç»å­˜åœ¨ï¼š&quot; + beanName);
                }

                // åˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ˜¯æŠ½è±¡çš„
                boolean isAbstract = false;
                if (Modifier.isAbstract(packageClass.getModifiers())) {
                    isAbstract = true;
                }

                // åˆ¤æ–­æ˜¯å¦æ˜¯æ‡’åŠ è½½çš„
                if (packageClass.isAnnotationPresent(MyLazy.class)) {
                    candidates.add(new BeanDefinition(beanName, packageClass, packageClassName, true, isAbstract));
                } else {
                    candidates.add(new BeanDefinition(beanName, packageClass, packageClassName, isAbstract));
                }

                // åŠ å…¥Bean
                BEAN_DEFINITION_NAMES.add(beanName);
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    });
}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p><strong>â‘  åŠ è½½æ‰€æœ‰Class</strong></p>
<p>findCandidateComponents()æ–¹æ³•é¦–å…ˆ<strong>é€šè¿‡loadClass()æ–¹æ³•é€’å½’åŠ è½½æ‰€æœ‰æŒ‡å®šçš„basePackagesä¸­çš„Classç±»:</strong></p>
<pre><code class="java">/**
    * åŠ è½½æ‰€æœ‰çš„å€™é€‰èµ„æºä¿¡æ¯
    *
    * @param basePackage éœ€è¦æ‰«æçš„åŒ…çš„å€™é€‰èµ„æºä¿¡æ¯
    */
private void loadClass(String basePackage) {
   URL url = this.getClass().getClassLoader().getResource(basePackage.replaceAll(&quot;\\.&quot;, &quot;/&quot;));
   File file = new File(Objects.requireNonNull(url).getFile());
   if (file.exists() &amp;&amp; file.isDirectory()) {
       File[] files = file.listFiles();
       for (File fileSon : Objects.requireNonNull(files)) {
           if (fileSon.isDirectory()) {
               // é€’å½’æ‰«æ
               loadClass(basePackage + &quot;/&quot; + fileSon.getName());
           } else {
               // æ˜¯æ–‡ä»¶å¹¶ä¸”æ˜¯ä»¥ .classç»“å°¾
               if (fileSon.getName().endsWith(&quot;.class&quot;)) {
                   String beanReferenceName = basePackage.replace(&quot;/&quot;, &quot;.&quot;) + &quot;.&quot; + fileSon.getName().replaceAll(&quot;.class&quot;, &quot;&quot;);
                   System.out.println(&quot;æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š &quot; + beanReferenceName);
                   BASE_PACKAGE_CLASS_NAME.add(beanReferenceName);
               }
           }
       }
   } else {
       throw new RuntimeException(&quot;æ²¡æœ‰æ‰¾åˆ°éœ€è¦æ‰«æçš„æ–‡ä»¶ç›®å½•&quot;);
   }
}</code></pre>
<p><strong>å°†æ‰«æåˆ°çš„æ‰€æœ‰ç±»åŠ å…¥BASE_PACKAGE_CLASS_NAMEé›†åˆä¸­!</strong></p>
<hr>
<p><strong>â‘¡ æŒ‘é€‰å‡ºéœ€è¦çš„å€™é€‰èµ„æºä¿¡æ¯</strong></p>
<p>éå†åˆšåˆšæ‰«æåˆ›å»ºçš„BASE_PACKAGE_CLASS_NAMEé›†åˆä¸­çš„Class, <strong>é€šè¿‡getAnnos()æ–¹æ³•åå°„è·å–æ³¨è§£ç„¶åæ£€æŸ¥æ˜¯å¦å«æœ‰ç‰¹å®šæ³¨è§£</strong></p>
<p>getAnnos()æ–¹æ³•:</p>
<pre><code class="java">/**
    * åˆ¤æ–­å½“å‰ç±»æ˜¯å¦åŒ…å«ç»„åˆæ³¨è§£: @MyComponent
    * æ³¨æ„: interface java.lang.annotation.Documentedç­‰å­˜åœ¨å¾ªç¯ï¼Œä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œæ‰€ä»¥éœ€è¦æ’é™¤javaçš„æºæ³¨è§£
    *
    * @param clazz ç±»å¯¹è±¡
    */
private static Class&lt;?&gt; getAnnos(Class&lt;?&gt; clazz) {
   Annotation[] annotations = clazz.getAnnotations();
   for (Annotation annotation : annotations) {
       if (annotation.annotationType() != Deprecated.class &amp;&amp;
           annotation.annotationType() != SuppressWarnings.class &amp;&amp;
           annotation.annotationType() != Override.class &amp;&amp;
           annotation.annotationType() != Target.class &amp;&amp;
           annotation.annotationType() != Retention.class &amp;&amp;
           annotation.annotationType() != Documented.class &amp;&amp;
           annotation.annotationType() != Inherited.class &amp;&amp;
           annotation.annotationType() != MyRequestMapping.class
          ) {
           if (annotation.annotationType() == MyComponent.class) {
               return clazz;
           } else {
               return getAnnos(annotation.annotationType());
           }
       }
   }
   return null;
}</code></pre>
<p>å¦‚æœå«æœ‰ç‰¹å®šæ³¨è§£, åˆ™è¿›è¡Œä»¥ä¸‹å‡ ä¸ªåˆ¤æ–­:</p>
<ol>
<li><strong>æ³¨è§£æ˜¯å¦å«æœ‰nameå±æ€§:</strong><ul>
<li>å¦‚æœå«æœ‰, åˆ™ä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„name(åå°„è·å–)åˆ›å»ºBean<strong>(ç¡®å®æ˜¯ä½¿ç”¨nameåˆ›å»ºBeanDefinition)</strong></li>
<li>å¦åˆ™æŒ‰ç…§ç±»åé¦–å­—æ¯å˜æˆå°å†™åˆ›å»ºBean<strong>(ç”±äºæ˜¯å•ä¾‹, è¿™æ ·åšnameä¸€å®šä¸ä¼šé‡å¤!!!)</strong></li>
</ul>
</li>
<li>ç»è¿‡äº†ä¸Šä¸€æ­¥ä¿è¯äº†ä¸€å®šè·å–äº†beanName, æ¥ä¸‹æ¥åˆ¤æ–­beanNameæ˜¯å¦é‡å¤:<ul>
<li><strong>å¦‚æœå·²ç»å­˜åœ¨beanName, ç›´æ¥æŠ¥é”™(ä¸èƒ½å­˜åœ¨ç›¸åŒbeanId)</strong></li>
</ul>
</li>
<li>åå°„åˆ¤æ–­å½“å‰Beanæ˜¯å¦æ˜¯æŠ½è±¡çš„(isAbstract)</li>
<li>é€šè¿‡æ³¨è§£åˆ¤æ–­æ˜¯å¦æ˜¯æ‡’åŠ è½½çš„</li>
</ol>
<p>å¯ä»¥çœ‹å‡ºä¸Šé¢çš„å‡ ä¸ªåˆ¤æ–­æ­£æ˜¯åˆ›å»ºä¸€ä¸ªBeanDefinitionçš„è¿‡ç¨‹, æ‰€ä»¥æœ€åå°†BeanåŠ å…¥BEAN_DEFINITION_NAMEå’Œcandidatesä¸­</p>
</blockquote>
<h3 id="è¿›è¡ŒBeanæ³¨å†Œ"><a href="#è¿›è¡ŒBeanæ³¨å†Œ" class="headerlink" title="è¿›è¡ŒBeanæ³¨å†Œ"></a><strong>è¿›è¡ŒBeanæ³¨å†Œ</strong></h3><p>åœ¨findCandidateComponents()æ–¹æ³•è¿”å›ä¹‹å, æ–¹æ³•è¿”å›åˆ°doScan()æ–¹æ³•ä¸­</p>
<p>è€Œç»è¿‡äº†ä¸Šè¿°å‡ ä¸ªæ­¥éª¤, æœ€ç»ˆåœ¨candidatesä¸­åŠ å…¥äº†æ‰€ä»¥ç¬¦åˆé¢„æœŸçš„BeanDefinition</p>
<p>æ‰€ä»¥åªéœ€è¦éå†candidatesé›†åˆ, å°†BeanDefinitionæ³¨å†Œåˆ°(ä¹Ÿæ˜¯contextä¸­çš„)registryå³å¯!</p>
<blockquote>
  <br>

<p>  è‡³æ­¤, Scannerå®Œæˆäº†ä»–çš„ä½¿å‘½!</p>
</blockquote>
<br>

<h2 id="å…­-Beançš„åˆ›å»ºå’Œæ³¨å…¥"><a href="#å…­-Beançš„åˆ›å»ºå’Œæ³¨å…¥" class="headerlink" title="å…­. Beançš„åˆ›å»ºå’Œæ³¨å…¥"></a>å…­. Beançš„åˆ›å»ºå’Œæ³¨å…¥</h2><p>åœ¨ä¸Šé¢çš„ä¸¤ä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†å®¹å™¨çš„åˆå§‹åŒ–ã€ç±»åŠ è½½ä»¥åŠBeanDefinitionåˆ›å»ºçš„æ­¥éª¤, ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è¿›è¡ŒBeançš„æ³¨å…¥å·¥ä½œäº†</p>
<p>å³è°ƒç”¨AnnotationConfigApplicationContextç±»ä¸­æœ‰å‚æ„é€ refresh()æ–¹æ³•<strong>(æ­¤æ—¶ï¼Œè°ƒç”¨çš„æ˜¯å…¶çˆ¶ç±»AbstractApplicationContextä¸­çš„refreshæ–¹æ³•)</strong></p>
<p><strong>åœ¨springæºç ä¸­ï¼Œrefresh()æ–¹æ³•ä¸€å…±æœ‰12ä¸ªæ­¥éª¤ï¼Œ</strong>åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸æ•´é‚£ä¹ˆå¤æ‚äº†, å°±ç›´æ¥å®Œæˆç¬¬11æ­¥æ“ä½œfinishBeanFactoryInitialization(beanFactory)å®ä¾‹åŒ–æ‰€æœ‰çš„å•ä¾‹Beanï¼›</p>
<h3 id="DefaultListableBeanFactoryä»£ç "><a href="#DefaultListableBeanFactoryä»£ç " class="headerlink" title="DefaultListableBeanFactoryä»£ç "></a>DefaultListableBeanFactoryä»£ç </h3><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è°ƒç”¨beanFactoryçš„preInstantiateSingletons()æ–¹æ³•ï¼Œä¸‹é¢æ˜¯å®Œæ•´çš„DefaultListableBeanFactoryç±»çš„ä»£ç :</p>
<p>DefaultListableBeanFactory.java</p>
<pre><code class="java">package top.jasonkayzk.ioc.core.factory;

import top.jasonkayzk.ioc.core.annotation.MyAutowired;
import top.jasonkayzk.ioc.core.entity.BeanDefinition;
import top.jasonkayzk.ioc.core.processor.BeanPostProcessor;

import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Objects;
import java.util.Properties;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;

import static top.jasonkayzk.ioc.core.scanner.ClassPathBeanDefinitionScanner.toLowercaseIndex;

/**
 * Springä¸­é»˜è®¤çš„Beançš„å·¥å‚ç±»
 *
 * @author zk
 */
public class DefaultListableBeanFactory implements BeanFactory {

    /**
     * ä¸€çº§ç¼“å­˜
     * ç”¨äºå­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„Beanï¼Œä»è¯¥ç¼“å­˜ä¸­æ‹¿å‡ºæ¥çš„Beanå¯ä»¥ç›´æ¥ä½¿ç”¨
     */
    private final Map&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;&gt;(256);

    /**
     * äºŒçº§ç¼“å­˜:
     * å­˜å‚¨çš„åŸå§‹çš„Bean(è¿˜æœªå®Œå…¨å¡«å……å±æ€§),
     * ç”¨äºè§£å†³Springä¸­çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œæ­¤æ—¶å·²ç»åˆ†é…äº†å†…å­˜åœ°å€
     * &lt;p&gt;
     * Cache of early singleton objects: bean name --&gt; bean instance
     */
    private final Map&lt;String, Object&gt; earlySingletonObjects = new HashMap&lt;&gt;(16);

    /**
     * ä¸‰çº§ç¼“å­˜:
     * å•ä¾‹å¯¹è±¡å·¥å‚çš„cacheï¼Œå­˜æ”¾beanå·¥å‚å¯¹è±¡ï¼Œç”¨äºè§£å†³å¾ªç¯ä¾èµ–
     * Cache of singleton factories: bean name --&gt; ObjectFactory
     */
    private final Map&lt;String, Object&gt; singletonFactories = new HashMap&lt;&gt;(16);

    /**
     * ä¿å­˜æ‰€æœ‰BeanPostProcessor
     */
    private Set&lt;BeanPostProcessor&gt; beanPostProcessorSet = new HashSet&lt;&gt;(16);

    /**
     * Beançš„æºæ•°æ®é›†åˆï¼Œå­˜å‚¨çš„æ˜¯æ‰«æå™¨æ‰«æçš„ç±»çš„æºæ•°æ®ä¿¡æ¯
     */
    public final Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new ConcurrentHashMap&lt;&gt;(128);

    /**
     * é…ç½®æ–‡ä»¶
     */
    private Properties properties = null;

    /**
     * åŠ¨æ€å‘å€™é€‰èµ„æºé›†åˆä¸­æ·»åŠ å€™é€‰æ•°æ®
     *
     * @param beanName       beanåç§°
     * @param beanDefinition beanå…ƒæ•°æ®å®ä¾‹
     */
    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {
        this.beanDefinitionMap.put(beanName, beanDefinition);
    }

    /**
     * æ³¨å†Œé…ç½®æ–‡ä»¶
     *
     * @param properties é…ç½®æ–‡ä»¶
     */
    public void registerProperties(Properties properties) {
        this.properties = properties;
    }

    @Override
    public Object getBean(String beanName) {
        return doGetBean(beanName);
    }

    @Override
    public Object doGetBean(String beanName) {
        // ä¸€çº§ç¼“å­˜å¯»æ‰¾, å­˜åœ¨åˆ™ç›´æ¥è¿”å›
        if (singletonObjects.containsKey(beanName)) {
            return this.singletonObjects.get(beanName);
        }
        // ä¸€çº§ç¼“å­˜ä¸å­˜åœ¨, åˆ›å»º
        return this.createBean(beanName);
    }

    @Override
    public Object createBean(String beanName) {
        return doCreateBean(beanName);
    }

    @Override
    public Object doCreateBean(String beanName) {
        synchronized (DefaultListableBeanFactory.class) {
            // å…ˆåˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦æ­£åœ¨è¢«åˆ›å»º
            // å› ä¸ºè¿™æ˜¯ä¸€ä¸ªsynchronizedæ–¹æ³•, å¦‚æœå­˜åœ¨å½“å‰å¯¹è±¡åˆ™è¯´æ˜å‡ºç°äº†å¾ªç¯ä¾èµ–
            // A -&gt; B -&gt; A
            // åŒ…æ‹¬ä¸¤ä¸ªåˆ¤æ–­: äºŒçº§ç¼“å­˜(åŸå§‹çš„Bean[è¿˜æœªå®Œå…¨å¡«å……å±æ€§])çš„åˆ›å»ºå’Œä¸‰çº§ç¼“å­˜Beançš„å·¥å‚ç±»çš„ç¼“å­˜
            if (earlySingletonObjects.containsKey(beanName) || singletonFactories.containsKey(beanName)) {
                throw new RuntimeException(&quot;IOCå®¹å™¨ä¸­å­˜åœ¨å¾ªç¯ä¾èµ–å¼‚å¸¸ beanName=&quot; + beanName);
            }

            // æ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œæ ‡è®°å½“å‰Beanæ­£å‡†å¤‡åˆ›å»º
            singletonFactories.put(beanName, &quot;&quot;);
            // Beançš„å®šä¹‰å…ƒæ•°æ®
            BeanDefinition beanDefinition = beanDefinitionMap.get(beanName);
            if (Objects.isNull(beanDefinition)) {
                // æ— Beançš„å®šä¹‰åˆ™ç›´æ¥è¿”å›
                return null;
            }

            // è·å–Bean
            Object beanObj = null;
            try {
                // é€šè¿‡beanDefinitionè·å–å¯¹åº”ç±»çš„Class, å¹¶é€šè¿‡åå°„ç”Ÿæˆå¯¹è±¡
                // æ­¤æ–¹æ³•åœ¨JDK 9è¿‡æ—¶:
                // beanObj = beanDefinition.getBeanClass().newInstance();
                // æ¨èä½¿ç”¨clazz.getDeclaredConstructor().newInstance()åˆ›å»º
                beanObj = beanDefinition.getBeanClass().getDeclaredConstructor().newInstance();

                // å¦‚æœBeanå®ç°äº†åç½®å¤„ç†å™¨, æ·»åŠ åˆ°beanPostProcessorSetä¸­(è¿›è¡Œåç½®å¤„ç†)
                if (beanObj instanceof BeanPostProcessor) {
                    beanPostProcessorSet.add((BeanPostProcessor) beanObj);
                }

                // æ·»åŠ åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œæ ‡è®°å½“å‰Beanæ­£åœ¨è¢«åˆ›å»ºï¼Œåªæ˜¯è¿˜æ²¡æœ‰å®Œå…¨å¡«å……å±æ€§
                earlySingletonObjects.put(beanName, beanObj);
                // ç”±äºæ˜¯å•ä¾‹, ç›´æ¥åˆ é™¤äº†è¿™ä¸ªBeançš„å·¥å‚ç±»å®ä¾‹(å› ä¸ºå·²ç»åˆ›å»ºäº†Bean)
                singletonFactories.remove(beanName);

                // è¿›è¡Œå±æ€§å¡«å……
                // å±æ€§å¡«å……åï¼Œæœ‰å¯èƒ½å¯¹è±¡è¢«åå°„ä¹‹ç±»çš„æˆ–è€…æ˜¯äº§ç”Ÿäº†ä»£ç†å¯¹è±¡!
                populateBean(beanObj);

                // è¿›è¡ŒBeançš„åç½®å¤„ç†å™¨å¤„ç†
                initializeBeanPostProcessor(beanName, beanObj);

                // å±æ€§å¡«å……å®Œæ¯•åï¼Œä¿å­˜å½“å‰å¯¹è±¡åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼Œè¡¨ç¤ºå½“å‰Beanå¯ä»¥ç›´æ¥æ‹¿å‡ºæ¥ä½¿ç”¨
                singletonObjects.put(beanName, beanObj);
                earlySingletonObjects.remove(beanName);
            } catch (InstantiationException | NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {
                e.printStackTrace();
            }
            return beanObj;
        }
    }

    /**
     * å®ä¾‹åŒ–æ‰€æœ‰å•ä¾‹éæ‡’åŠ è½½çš„bean
     * (åœ¨contextä¸­è¿›è¡Œ)
     */
    public void preInstantiateSingletons() {
        // è·å–æ‰€æœ‰çš„å€™é€‰èµ„æºBeançš„åç§°
        Set&lt;String&gt; beanNames = beanDefinitionMap.keySet();
        beanNames.forEach(beanName -&gt; {
            BeanDefinition bd = beanDefinitionMap.get(beanName);
            // å¦‚æœä¸æ˜¯æŠ½è±¡çš„ï¼Œå¹¶ä¸”æ˜¯å•ä¾‹çš„ï¼Œå¹¶ä¸”ä¸æ˜¯æ‡’åŠ è½½çš„Bean
            // æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿
            if (!Objects.isNull(bd) &amp;&amp; !bd.isAbstractFlag() &amp;&amp; !bd.isLazyInit()) {
                getBean(beanName);
            }
        });
    }

    /**
     * å®ŒæˆBeançš„åç½®å¤„ç†å™¨å·¥ä½œ
     *
     * @param beanName beanåç§°
     * @param beanObj  æ“ä½œçš„beanå¯¹è±¡
     */
    private void initializeBeanPostProcessor(String beanName, Object beanObj) {
        // éå†beanPostProcessorSet
        // å®Œæˆæ‰€æœ‰(Initå‰)Beançš„åç½®å¤„ç†å™¨å·¥ä½œ
        for (BeanPostProcessor beanPostProcessor : beanPostProcessorSet) {
            beanObj = beanPostProcessor.postProcessBeforeInitialization(beanObj, beanName);
        }

        // æ‰§è¡ŒBeançš„initæ–¹æ³•
        System.out.println(&quot;å‡è®¾æ­£åœ¨æ‰§è¡Œ&quot; + beanName + &quot;çš„initæ–¹æ³•.....&quot;);

        // éå†beanPostProcessorSet
        // å®Œæˆæ‰€æœ‰(Initå)Beançš„åç½®å¤„ç†å™¨å·¥ä½œ
        for (BeanPostProcessor beanPostProcessor : beanPostProcessorSet) {
            beanObj = beanPostProcessor.postProcessAfterInitialization(beanObj, beanName);
        }
    }

    /**
     * å¯¹å½“å‰Beanè¿›è¡Œä¾èµ–æ³¨å…¥
     *
     * @param beanObj æ­¤å¤„è¿”å›å½“å‰Beanï¼ŒåæœŸå¦‚æœæœ‰æ›´æ”¹ï¼Œå¯èƒ½è¿”å›æ˜¯ä¸€ä¸ªä»£ç†ç±»
     */
    private void populateBean(Object beanObj) throws IllegalAccessException {
        // åå°„è·å–Beançš„æ‰€æœ‰å±æ€§
        Field[] fields = beanObj.getClass().getDeclaredFields();

        // éå†å±æ€§å¹¶è¿›è¡Œä¾èµ–æ³¨å…¥
        for (Field field : fields) {
            // å°†accessæ”¹ä¸ºtrue(é˜²æ­¢privateå±æ€§)
            field.setAccessible(true);

            // åˆ¤æ–­å½“å‰å±æ€§æ˜¯å¦éœ€è¦è¿›è¡Œä¾èµ–æ³¨å…¥
            // æœ‰æ— @MyAutowiredæ³¨è§£
            if (field.isAnnotationPresent(MyAutowired.class)) {
                // ç±»åé¦–å­—æ¯è½¬å°å†™å­—ç¬¦ä¸²
                String simpleName = toLowercaseIndex(field.getType().getSimpleName());

                // å…ˆåˆ¤æ–­å½“å‰å±æ€§ç±»å‹åç§°å°å†™æ˜¯å¦åœ¨å€™é€‰èµ„æºä¸­
                Set&lt;String&gt; beanDefinitionNames = beanDefinitionMap.keySet();
                // å¦‚æœå€™é€‰èµ„æºä¸­ä¸å­˜åœ¨
                if (!beanDefinitionNames.contains(simpleName)) {
                    // é€šè¿‡å…¨åå¯»æ‰¾Beanå®ä¾‹
                    simpleName = toLowercaseIndex(field.getName());
                    if (!beanDefinitionNames.contains(simpleName)) {
                        // æ³¨å…¥çš„å±æ€§çš„ç±»å‹åç§°å°å†™å’Œå±æ€§åç§°éƒ½ä¸åœ¨å€™é€‰èµ„æºä¸­
                        throw new RuntimeException(&quot;å½“å‰ç±»&quot; + beanObj + &quot;æ‰¾ä¸åˆ°å±æ€§ç±»å‹&quot; + field.getType() + &quot;çš„Bean&quot;);
                    }
                }

                // å¦åˆ™å€™é€‰èµ„æºä¸­å­˜åœ¨
                // ä¸€çº§ç¼“å­˜æŸ¥æ‰¾: åˆ¤æ–­ä¾èµ–çš„Beanæ˜¯å¦å·²ç»è¢«åˆ›å»ºå¥½å¯ä»¥ç›´æ¥è¢«ä½¿ç”¨äº†
                if (singletonObjects.containsKey(simpleName)) {
                    field.set(beanObj, singletonObjects.get(simpleName));
                    // æŸ¥çœ‹äºŒçº§ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨
                } else if (earlySingletonObjects.containsKey(simpleName)) {
                    field.set(beanObj, earlySingletonObjects.get(simpleName));
                } else {
                    // ä¸Šé¢é€šè¿‡å…¨åå¯»æ‰¾çš„Beanå®ä¾‹(ä¸€çº§ç¼“å­˜)
                    field.set(beanObj, getBean(simpleName));
                }
            }
        }
    }
}</code></pre>
<p>å…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªBeançš„åç½®å¤„ç†å™¨æ¥å£BeanPostProcessor:</p>
<pre><code class="java">/**
 * Beançš„åç½®å¤„ç†å™¨
 *
 * @author zk
 */
public interface BeanPostProcessor {
    /**
     * Beançš„åˆå§‹åŒ–å‰ç½®å¤„ç†
     * @param bean JavaBean
     * @param beanName beanåç§°
     * @return åˆå§‹åŒ–å‰å¯¹beanè¿›è¡Œå¤„ç†
     */
    public Object postProcessBeforeInitialization(Object bean, String beanName);

    /**
     * Beançš„åˆå§‹åŒ–çš„åç½®å¤„ç†
     * @param bean JavaBean
     * @param beanName beanåç§°
     * @return åˆå§‹åŒ–åå¯¹beanè¿›è¡Œå¤„ç†
     */
    public Object postProcessAfterInitialization(Object bean, String beanName);
}</code></pre>
<p>BeanPostProcessorä¸»è¦å®ŒæˆBeanåœ¨åˆå§‹åŒ–å‰å’Œåˆå§‹åŒ–åçš„ä¸€äº›æ“ä½œ</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ç€é‡çœ‹ä¸€ä¸‹DefaultListableBeanFactory:</p>
<p><strong>â‘  DefaultListableBeanFactoryçš„å±æ€§</strong></p>
<p>å‰é¢å·²ç»æåˆ°è¿‡, åœ¨DefaultListableBeanFactoryä¸­æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„é›†åˆ:</p>
<table>
<thead>
<tr>
<th align="left"><strong>é›†åˆåç§°</strong></th>
<th align="center"><strong>ä½œç”¨</strong></th>
<th align="left"><strong>è¯¦ç»†è¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>singletonObjects</strong></td>
<td align="center"><strong>ä¸€çº§ç¼“å­˜</strong></td>
<td align="left">ç”¨äº<strong>å­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„Bean</strong>ï¼Œä»è¯¥ç¼“å­˜ä¸­æ‹¿å‡ºæ¥çš„Beanå¯ä»¥ç›´æ¥ä½¿ç”¨</td>
</tr>
<tr>
<td align="left"><strong>earlySingletonObjects</strong></td>
<td align="center"><strong>äºŒçº§ç¼“å­˜</strong></td>
<td align="left"><strong>å­˜å‚¨çš„åŸå§‹çš„Bean(è¿˜æœªå®Œå…¨å¡«å……å±æ€§)</strong><br><font color="#f00"><strong>ç”¨äºè§£å†³Springä¸­çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œæ­¤æ—¶å·²ç»åˆ†é…äº†å†…å­˜åœ°å€</strong></font></td>
</tr>
<tr>
<td align="left"><strong>singletonFactories</strong></td>
<td align="center"><strong>ä¸‰çº§ç¼“å­˜</strong></td>
<td align="left"><strong>å•ä¾‹å¯¹è±¡å·¥å‚çš„cacheï¼Œå­˜æ”¾beanå·¥å‚å¯¹è±¡</strong><br><strong>ç”¨äºè§£å†³å¾ªç¯ä¾èµ–</strong></td>
</tr>
<tr>
<td align="left"><strong>beanDefinitionMap</strong></td>
<td align="center"></td>
<td align="left">Beançš„æºæ•°æ®é›†åˆï¼Œå­˜å‚¨çš„æ˜¯æ‰«æå™¨æ‰«æçš„ç±»çš„æºæ•°æ®ä¿¡æ¯</td>
</tr>
<tr>
<td align="left"><strong>beanPostProcessorSet</strong></td>
<td align="center"></td>
<td align="left">ä¿å­˜æ‰€æœ‰BeanPostProcessor</td>
</tr>
</tbody></table>
<p>åˆ†åˆ«ç”¨äº: è®°å½•Beançš„åˆ›å»ºè¿‡ç¨‹å’Œæ‰€æœ‰çš„Beançš„å€™é€‰èµ„æºé›†åˆä»¥åŠæ‰€æœ‰çš„Beançš„åç½®å¤„ç†å™¨;</p>
<p>è€Œpropertiesæ˜¯é€šè¿‡å‰é¢Scanneråˆå§‹åŒ–çš„é…ç½®ä¿¡æ¯</p>
<hr>
<p><strong>â‘¡ å®ä¾‹åŒ–æ‰€æœ‰éæ‡’åŠ è½½çš„Bean</strong></p>
<p>å‰é¢è¯´åˆ°contextåˆå§‹åŒ–æœ€åä¸€ä¸ªæ–¹æ³•æ˜¯è°ƒç”¨refresh()æ–¹æ³•åˆ›å»ºå’Œæ³¨å…¥bean, è€Œrefreshæ–¹æ³•å†…éƒ¨æœ€ç»ˆå°±æ˜¯è°ƒç”¨çš„BeanFactoryçš„preInstantiateSingletons()æ–¹æ³•å®Œæˆbeançš„åˆå§‹åŒ–</p>
<p>preInstantiateSingletons()æ–¹æ³•:</p>
<pre><code class="java">/**
     * å®ä¾‹åŒ–æ‰€æœ‰å•ä¾‹éæ‡’åŠ è½½çš„bean
     * (åœ¨contextä¸­è¿›è¡Œ)
     */
public void preInstantiateSingletons() {
    // è·å–æ‰€æœ‰çš„å€™é€‰èµ„æºBeançš„åç§°
    Set&lt;String&gt; beanNames = beanDefinitionMap.keySet();
    beanNames.forEach(beanName -&gt; {
        BeanDefinition bd = beanDefinitionMap.get(beanName);
        // å¦‚æœä¸æ˜¯æŠ½è±¡çš„ï¼Œå¹¶ä¸”æ˜¯å•ä¾‹çš„ï¼Œå¹¶ä¸”ä¸æ˜¯æ‡’åŠ è½½çš„Bean
        // æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿
        if (!Objects.isNull(bd) &amp;&amp; !bd.isAbstractFlag() &amp;&amp; !bd.isLazyInit()) {
            getBean(beanName);
        }
    });
}</code></pre>
<p>å¯è§åœ¨preInstantiateSingletonsæ–¹æ³•ä¸­æ˜¯é€šè¿‡<strong>éå†BeanDefinitionMapé›†åˆ, åˆ¤æ–­: ä¸æ˜¯æŠ½è±¡çš„ï¼Œå¹¶ä¸”æ˜¯å•ä¾‹çš„ï¼Œå¹¶ä¸”ä¸æ˜¯æ‡’åŠ è½½çš„Bean, æ¥é€šè¿‡getBeanåˆ›å»º</strong></p>
<p>ä¸‹é¢æ¥çœ‹çœ‹getBean()æ–¹æ³•;</p>
<hr>
<p><strong>â‘¢ è·å–Bean</strong></p>
<p>è·å–beanä¸»è¦æ˜¯é€šè¿‡getBean()æ–¹æ³•, å…¶å†…éƒ¨æ˜¯é€šè¿‡doGetBean()æ–¹æ³•å®ç°:</p>
<pre><code class="java">@Override
public Object getBean(String beanName) {
    return doGetBean(beanName);
}

@Override
public Object doGetBean(String beanName) {
    // ä¸€çº§ç¼“å­˜å¯»æ‰¾, å­˜åœ¨åˆ™ç›´æ¥è¿”å›
    if (singletonObjects.containsKey(beanName)) {
        return this.singletonObjects.get(beanName);
    }
    // ä¸€çº§ç¼“å­˜ä¸å­˜åœ¨, åˆ›å»º
    return this.createBean(beanName);
}</code></pre>
<p>å¯ä»¥çœ‹åˆ°doGetBeançš„æ–¹æ³•éå¸¸ç®€å•: ä¸€çº§ç¼“å­˜å­˜åœ¨ç›´æ¥å–, ä¸€çº§ç¼“å­˜ä¸å­˜åœ¨åˆ™é€šè¿‡createBean()æ–¹æ³•åˆ›å»º;</p>
<hr>
<p><strong>â‘£ åˆ›å»ºBean</strong></p>
<p>åˆ›å»ºbeanä¸»è¦æ˜¯é€šè¿‡createBean()æ–¹æ³•, å…¶å†…éƒ¨æ˜¯é€šè¿‡doCreateBean()æ–¹æ³•å®ç°:</p>
<pre><code class="java">@Override
public Object createBean(String beanName) {
    return doCreateBean(beanName);
}

@Override
public Object doCreateBean(String beanName) {
    synchronized (DefaultListableBeanFactory.class) {
        // å…ˆåˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦æ­£åœ¨è¢«åˆ›å»º
        // å› ä¸ºè¿™æ˜¯ä¸€ä¸ªsynchronizedæ–¹æ³•, å¦‚æœå­˜åœ¨å½“å‰å¯¹è±¡åˆ™è¯´æ˜å‡ºç°äº†å¾ªç¯ä¾èµ–
        // A -&gt; B -&gt; A
        // åŒ…æ‹¬ä¸¤ä¸ªåˆ¤æ–­: äºŒçº§ç¼“å­˜(åŸå§‹çš„Bean[è¿˜æœªå®Œå…¨å¡«å……å±æ€§])çš„åˆ›å»ºå’Œä¸‰çº§ç¼“å­˜Beançš„å·¥å‚ç±»çš„ç¼“å­˜
        if (earlySingletonObjects.containsKey(beanName) || singletonFactories.containsKey(beanName)) {
            throw new RuntimeException(&quot;IOCå®¹å™¨ä¸­å­˜åœ¨å¾ªç¯ä¾èµ–å¼‚å¸¸ beanName=&quot; + beanName);
        }

        // æ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œæ ‡è®°å½“å‰Beanæ­£å‡†å¤‡åˆ›å»º
        singletonFactories.put(beanName, &quot;&quot;);
        // Beançš„å®šä¹‰å…ƒæ•°æ®
        BeanDefinition beanDefinition = beanDefinitionMap.get(beanName);
        if (Objects.isNull(beanDefinition)) {
            // æ— Beançš„å®šä¹‰åˆ™ç›´æ¥è¿”å›
            return null;
        }

        // è·å–Bean
        Object beanObj = null;
        try {
            // é€šè¿‡beanDefinitionè·å–å¯¹åº”ç±»çš„Class, å¹¶é€šè¿‡åå°„ç”Ÿæˆå¯¹è±¡
            // æ­¤æ–¹æ³•åœ¨JDK 9è¿‡æ—¶:
            // beanObj = beanDefinition.getBeanClass().newInstance();
            // æ¨èä½¿ç”¨clazz.getDeclaredConstructor().newInstance()åˆ›å»º
            beanObj = beanDefinition.getBeanClass().getDeclaredConstructor().newInstance();

            // å¦‚æœBeanå®ç°äº†åç½®å¤„ç†å™¨, æ·»åŠ åˆ°beanPostProcessorSetä¸­(è¿›è¡Œåç½®å¤„ç†)
            if (beanObj instanceof BeanPostProcessor) {
                beanPostProcessorSet.add((BeanPostProcessor) beanObj);
            }

            // æ·»åŠ åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œæ ‡è®°å½“å‰Beanæ­£åœ¨è¢«åˆ›å»ºï¼Œåªæ˜¯è¿˜æ²¡æœ‰å®Œå…¨å¡«å……å±æ€§
            earlySingletonObjects.put(beanName, beanObj);
            // ç”±äºæ˜¯å•ä¾‹, ç›´æ¥åˆ é™¤äº†è¿™ä¸ªBeançš„å·¥å‚ç±»å®ä¾‹(å› ä¸ºå·²ç»åˆ›å»ºäº†Bean)
            singletonFactories.remove(beanName);

            // è¿›è¡Œå±æ€§å¡«å……
            // å±æ€§å¡«å……åï¼Œæœ‰å¯èƒ½å¯¹è±¡è¢«åå°„ä¹‹ç±»çš„æˆ–è€…æ˜¯äº§ç”Ÿäº†ä»£ç†å¯¹è±¡!
            populateBean(beanObj);

            // è¿›è¡ŒBeançš„åç½®å¤„ç†å™¨å¤„ç†
            initializeBeanPostProcessor(beanName, beanObj);

            // å±æ€§å¡«å……å®Œæ¯•åï¼Œä¿å­˜å½“å‰å¯¹è±¡åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼Œè¡¨ç¤ºå½“å‰Beanå¯ä»¥ç›´æ¥æ‹¿å‡ºæ¥ä½¿ç”¨
            singletonObjects.put(beanName, beanObj);
            earlySingletonObjects.remove(beanName);
        } catch (InstantiationException | NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {
            e.printStackTrace();
        }
        return beanObj;
    }
}</code></pre>
<blockquote>
  <br>

<p>  <strong>doCreateBean()æ–¹æ³•åˆ†æ:</strong></p>
<p>  è¦å…ˆè¯´æ˜çš„æ˜¯doCreateBeanæ˜¯synchronizedæ–¹æ³•, è¿™æ ·ä¿è¯äº†å¹¶å‘æ—¶åˆ›å»ºBeançš„æ­£ç¡®æ€§</p>
<p>  <strong>â‘  åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦æ­£åœ¨è¢«åˆ›å»º</strong></p>
<p>  æ–¹æ³•é¦–å…ˆåˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦æ­£åœ¨è¢«åˆ›å»º:</p>
<p>  åŒ…æ‹¬ä¸¤ä¸ªåˆ¤æ–­: äºŒçº§ç¼“å­˜(åŸå§‹çš„Bean[è¿˜æœªå®Œå…¨å¡«å……å±æ€§])çš„åˆ›å»ºå’Œä¸‰çº§ç¼“å­˜Beançš„å·¥å‚ç±»çš„ç¼“å­˜<strong>(æ­£å‡†å¤‡åˆ›å»ºçš„Beanåœ¨äºŒçº§ç¼“å­˜æˆ–è€…ä¸‰çº§ç¼“å­˜ä¸­)</strong></p>
<p>  <font color="#f00"><strong>å¦‚æœå­˜åœ¨, åˆ™è¯´æ˜å½“å‰å¯¹è±¡å·²ç»å¤„äºæ­£åœ¨åˆ›å»ºçš„çŠ¶æ€! æ­¤æ—¶äº§ç”Ÿäº†å¾ªç¯ä¾èµ–(æ³¨æ„åˆ°æ­¤æ–¹æ³•æ˜¯synchronized!), è¿™æ—¶åº”å½“æŠ¥é”™!</strong></font></p>
<p>  å¦‚æœä¸å­˜åœ¨, åˆ™<strong>å°†beanNameæ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œæ ‡è®°å½“å‰Beanæ­£å‡†å¤‡åˆ›å»º</strong></p>
<hr>
<p>  <strong>â‘¡ åˆ¤æ–­BeanDefinitioné›†åˆä¸­æ˜¯å¦å­˜åœ¨å½“å‰Bean</strong></p>
<p>  å¦‚æœä¸å­˜åœ¨, åˆ™è¯´æ˜æ— æ­¤Beançš„å®šä¹‰, è¿™æ—¶æ— æ³•æ„é€ æ­¤Bean, ç›´æ¥è¿”å›null;</p>
<hr>
<p>  <strong>â‘¢ è·å–Bean</strong></p>
<p>  ç»è¿‡ç¬¬â‘¡æ­¥, ç¡®å®šäº†ä¸€å®šå­˜åœ¨BeanDefinitionè¿™ä¸ªç±», æ‰€ä»¥:</p>
<ol>
<li><strong>é€šè¿‡beanDefinitionè·å–å¯¹åº”ç±»çš„Class, å¹¶é€šè¿‡åå°„ç”Ÿæˆå¯¹è±¡</strong></li>
<li>åˆ¤æ–­å¦‚æœBeanå®ç°äº†åç½®å¤„ç†å™¨, æ·»åŠ åˆ°beanPostProcessorSetä¸­(åœ¨åé¢è¿›è¡Œåç½®å¤„ç†)</li>
<li>å°†beanNameæ·»åŠ åˆ°äºŒçº§ç¼“å­˜ä¸­<strong>(æ ‡è®°å½“å‰Beanæ­£åœ¨è¢«åˆ›å»ºï¼Œåªæ˜¯è¿˜æ²¡æœ‰å®Œå…¨å¡«å……å±æ€§)</strong></li>
<li>åˆ é™¤è¿™ä¸ªBeançš„å·¥å‚ç±»å®ä¾‹(å› ä¸ºå·²ç»åˆ›å»ºäº†Bean, è€Œåˆ›å»ºçš„æ˜¯å•ä¾‹)</li>
<li>è°ƒç”¨populateBean()æ–¹æ³•è¿›è¡Œå±æ€§å¡«å……(åé¢ä¼šè®²è¿™ä¸ªæ–¹æ³•)</li>
<li>è°ƒç”¨initializeBeanPostProcessor()æ–¹æ³•è¿›è¡ŒBeançš„åç½®å¤„ç†å™¨å¤„ç†(åé¢ä¼šè®²è¿™ä¸ªæ–¹æ³•)</li>
<li>å±æ€§å¡«å……å®Œå¹¶è¿›è¡ŒBeançš„åç½®å¤„ç†å™¨å¤„ç†åï¼Œä¿å­˜å½“å‰å¯¹è±¡åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼Œè¡¨ç¤ºå½“å‰Beanå¯ä»¥ç›´æ¥æ‹¿å‡ºæ¥ä½¿ç”¨</li>
<li>äºŒçº§ç¼“å­˜ä¸­åˆ é™¤åŸå§‹çš„Bean</li>
<li>è¿”å›ç”Ÿæˆçš„Bean</li>
</ol>
</blockquote>
<p>ä¸‹é¢åˆ†æä¸€ä¸‹populateBean()å’ŒinitializeBeanPostProcessor()æ–¹æ³•, è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«å®Œæˆäº†: å¯¹å½“å‰Beanè¿›è¡Œä¾èµ–æ³¨å…¥å’Œå®ŒæˆBeançš„åç½®å¤„ç†å™¨å·¥ä½œ</p>
<hr>
<p><strong>â‘¤ Beanä¾èµ–æ³¨å…¥æ–¹æ³•</strong></p>
<p>populateBean()æ–¹æ³•å®Œæˆäº†å¯¹å½“å‰beançš„ä¾èµ–æ³¨å…¥:</p>
<pre><code class="java">/**
     * å¯¹å½“å‰Beanè¿›è¡Œä¾èµ–æ³¨å…¥
     *
     * @param beanObj æ­¤å¤„è¿”å›å½“å‰Beanï¼ŒåæœŸå¦‚æœæœ‰æ›´æ”¹ï¼Œå¯èƒ½è¿”å›æ˜¯ä¸€ä¸ªä»£ç†ç±»
     */
private void populateBean(Object beanObj) throws IllegalAccessException {
    // åå°„è·å–Beançš„æ‰€æœ‰å±æ€§
    Field[] fields = beanObj.getClass().getDeclaredFields();

    // éå†å±æ€§å¹¶è¿›è¡Œä¾èµ–æ³¨å…¥
    for (Field field : fields) {
        // å°†accessæ”¹ä¸ºtrue(é˜²æ­¢privateå±æ€§)
        field.setAccessible(true);

        // åˆ¤æ–­å½“å‰å±æ€§æ˜¯å¦éœ€è¦è¿›è¡Œä¾èµ–æ³¨å…¥
        // æœ‰æ— @MyAutowiredæ³¨è§£
        if (field.isAnnotationPresent(MyAutowired.class)) {
            // ç±»åé¦–å­—æ¯è½¬å°å†™å­—ç¬¦ä¸²
            String simpleName = toLowercaseIndex(field.getType().getSimpleName());

            // å…ˆåˆ¤æ–­å½“å‰å±æ€§ç±»å‹åç§°å°å†™æ˜¯å¦åœ¨å€™é€‰èµ„æºä¸­
            Set&lt;String&gt; beanDefinitionNames = beanDefinitionMap.keySet();
            // å¦‚æœå€™é€‰èµ„æºä¸­ä¸å­˜åœ¨
            if (!beanDefinitionNames.contains(simpleName)) {
                // é€šè¿‡å…¨åå¯»æ‰¾Beanå®ä¾‹
                simpleName = toLowercaseIndex(field.getName());
                if (!beanDefinitionNames.contains(simpleName)) {
                    // æ³¨å…¥çš„å±æ€§çš„ç±»å‹åç§°å°å†™å’Œå±æ€§åç§°éƒ½ä¸åœ¨å€™é€‰èµ„æºä¸­
                    throw new RuntimeException(&quot;å½“å‰ç±»&quot; + beanObj + &quot;æ‰¾ä¸åˆ°å±æ€§ç±»å‹&quot; + field.getType() + &quot;çš„Bean&quot;);
                }
            }

            // å¦åˆ™å€™é€‰èµ„æºä¸­å­˜åœ¨
            // ä¸€çº§ç¼“å­˜æŸ¥æ‰¾: åˆ¤æ–­ä¾èµ–çš„Beanæ˜¯å¦å·²ç»è¢«åˆ›å»ºå¥½å¯ä»¥ç›´æ¥è¢«ä½¿ç”¨äº†
            if (singletonObjects.containsKey(simpleName)) {
                field.set(beanObj, singletonObjects.get(simpleName));
                // æŸ¥çœ‹äºŒçº§ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨
            } else if (earlySingletonObjects.containsKey(simpleName)) {
                field.set(beanObj, earlySingletonObjects.get(simpleName));
            } else {
                // ä¸Šé¢é€šè¿‡å…¨åå¯»æ‰¾çš„Beanå®ä¾‹(ä¸€çº§ç¼“å­˜)
                field.set(beanObj, getBean(simpleName));
            }
        }
    }
}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p>æ–¹æ³•é¦–å…ˆé€šè¿‡åå°„è·å–Beançš„æ‰€æœ‰å±æ€§fields;</p>
<p>ç„¶åé€šè¿‡éå†å±æ€§å¹¶è¿›è¡Œä¾èµ–æ³¨å…¥:</p>
<ol>
<li>å°†accessæ”¹ä¸ºtrue(é˜²æ­¢privateå±æ€§)</li>
<li>åˆ¤æ–­å½“å‰å±æ€§æ˜¯å¦éœ€è¦è¿›è¡Œä¾èµ–æ³¨å…¥(æœ‰æ— @MyAutowiredæ³¨è§£)</li>
<li>è·å–æ­¤beanå½“å‰å±æ€§ç±»å‹çš„BeanDefinition<ul>
<li>å¦‚æœä¸å­˜åœ¨, åˆ™é€šè¿‡å…¨åå¯»æ‰¾Beanå®ä¾‹<font color="#f00"><strong>(æ­¤å¤„è¿™æ ·è®¾è®¡çš„åŸå› æ˜¯æƒ³å®ç°é€šè¿‡ç±»çš„é¦–å­—æ¯å°å†™æ³¨å…¥å’Œå±æ€§çš„åç§°æ³¨å…¥ä¸¤ç§æ–¹å¼ï¼›)</strong></font></li>
<li>å¦‚æœä¹Ÿä¸å­˜åœ¨åˆ™æŠ¥é”™(å› ä¸ºä¸å­˜åœ¨å¯ä»¥@Autowiredçš„ç±»!)</li>
</ul>
</li>
<li>ç»è¿‡ä¸Šä¸€æ­¥, ä»¥åŠè·å–äº†å½“å‰å±æ€§çš„BeanDefinition, æ‰€ä»¥æ ¹æ®ç¼“å­˜æŸ¥æ‰¾:<ul>
<li>ä¸€çº§ç¼“å­˜æŸ¥æ‰¾: åˆ¤æ–­ä¾èµ–çš„Beanæ˜¯å¦å·²ç»è¢«åˆ›å»ºå¥½å¯ä»¥ç›´æ¥è¢«ä½¿ç”¨äº†</li>
<li>ä¸€çº§ç¼“å­˜ä¸å­˜åœ¨: æŸ¥çœ‹äºŒçº§ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨</li>
<li>äºŒçº§ç¼“å­˜ä¸å­˜åœ¨<strong>(æœ‰å¯èƒ½æ˜¯è¿˜æœªåˆ›å»ºè¯¥Bean!)</strong>: é€šè¿‡getBean()æ–¹æ³•åˆ›å»ºè¯¥Bean;</li>
</ul>
</li>
</ol>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯:</p>
<p><font color="#f00"><strong>åœ¨ç¬¬å››æ­¥äºŒçº§ç¼“å­˜ä¸å­˜åœ¨æ—¶, å°†ä¼šè°ƒç”¨å›getBean() -&gt; createBean() -&gt; doCreateBean()</strong></font></p>
<p><font color="#f00"><strong>å¦‚æœæ­¤æ—¶å‡ºç°å¾ªç¯ä¾èµ–, å°±ä¸€å®šä¼šåœ¨doCreateBeanæ–¹æ³•ä¸­å‡ºç°é‡å¤çš„å¾…åˆå§‹åŒ–çš„Beanä»è€Œå¯¼è‡´å¾ªç¯ä¾èµ–è¢«æ£€æµ‹å‡ºæ¥!</strong></font></p>
<p><font color="#f00"><strong>æ³¨æ„åˆ°doCreateBeanæ–¹æ³•æ˜¯åŒæ­¥çš„, ä¹Ÿå¯ä»¥çœ‹å‡ºsynchronizedæ˜¯å¯é‡å…¥çš„é”!</strong></font></p>
<p><strong>ä¸Šé¢å°±æ˜¯Springä¸­æ£€æµ‹Beanå¾ªç¯ä¾èµ–æ³¨å…¥çš„åŸç†!</strong></p>
</blockquote>
<hr>
<p><strong>â‘¥ åç½®å¤„ç†å™¨å·¥ä½œæ–¹æ³•</strong></p>
<p>initializeBeanPostProcessor()æ–¹æ³•å¯¹å·²ç»ç»è¿‡populateBeanæ–¹æ³•å¡«å……è¿‡å±æ€§çš„beanè¿›è¡Œåç½®å¤„ç†:</p>
<pre><code class="java">/**
     * å®ŒæˆBeançš„åç½®å¤„ç†å™¨å·¥ä½œ
     *
     * @param beanName beanåç§°
     * @param beanObj  æ“ä½œçš„beanå¯¹è±¡
     */
private void initializeBeanPostProcessor(String beanName, Object beanObj) {
    // éå†beanPostProcessorSet
    // å®Œæˆæ‰€æœ‰(Initå‰)Beançš„åç½®å¤„ç†å™¨å·¥ä½œ
    for (BeanPostProcessor beanPostProcessor : beanPostProcessorSet) {
        beanObj = beanPostProcessor.postProcessBeforeInitialization(beanObj, beanName);
    }

    // æ‰§è¡ŒBeançš„initæ–¹æ³•
    System.out.println(&quot;å‡è®¾æ­£åœ¨æ‰§è¡Œ&quot; + beanName + &quot;çš„initæ–¹æ³•.....&quot;);

    // éå†beanPostProcessorSet
    // å®Œæˆæ‰€æœ‰(Initå)Beançš„åç½®å¤„ç†å™¨å·¥ä½œ
    for (BeanPostProcessor beanPostProcessor : beanPostProcessorSet) {
        beanObj = beanPostProcessor.postProcessAfterInitialization(beanObj, beanName);
    }
}</code></pre>
<p>ä¸ºç®€å•èµ·è§, è¿™é‡Œä½¿ç”¨System.out.println()æ¨¡æ‹Ÿåˆå§‹åŒ–æ–¹æ³•, å®é™…åœ¨Stringä¸­æ˜¯é€šè¿‡åå°„è°ƒç”¨Beançš„Constructorå®ç°çš„åˆå§‹åŒ–!</p>
<p>è¿™ä¹Ÿè¯´æ˜äº†:</p>
<p><font color="#f00"><strong>postProcessBeforeInitialization() åœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•å‰è°ƒç”¨, è€ŒpostProcessAfterInitializationæ–¹æ³•åœ¨åˆå§‹åŒ–æ–¹æ³•åè°ƒç”¨</strong></font></p>
<p><font color="#f00"><strong>æ³¨: åœ¨è°ƒç”¨Constructoræ–¹æ³•ä¹‹å‰Beanå·²ç»é€šè¿‡åå°„åˆ›å»º, ä½†åªæ˜¯æ”¾åœ¨äºŒçº§ç¼“å­˜(æœªè¢«è¿›è¡Œå±æ€§æ³¨å…¥!)</strong></font></p>
<p><font color="#f00"><strong>ç»è¿‡æ­¤æ–¹æ³•è°ƒç”¨åç½®å¤„ç†å™¨å¤„ç†å, æ­¤æ–¹æ³•è¿”å›, å°†Beanä»äºŒçº§ç¼“å­˜åˆ é™¤, åŠ å…¥ä¸€çº§ç¼“å­˜!</strong></font></p>
<blockquote>
<br>

<p>è‡³æ­¤æˆ‘ä»¬çš„AnnotationConfigApplicationContextå®Œæˆåˆå§‹åŒ–!</p>
<p>å½“å‰IOCå®¹å™¨ä¸­ï¼Œæ¶‰åŠåˆ°çš„ç±»å’Œæ¶‰åŠåˆ°çš„æ–¹æ³•åœ¨springæºç ä¸­åŸºæœ¬éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œéƒ¨åˆ†å®ç°ä¸å¤ªä¸€æ ·ï¼Œå› ä¸ºspringæºç ä¸­å¤„ç†çš„é€»è¾‘å¤ªå¤šå¤ªå¤šäº†!</p>
</blockquote>
<br>

<p><strong>å½“ç„¶è¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜: @Lazyçš„Beanå‘¢?</strong></p>
<p>åº”è¯¥èƒ½æ³¨æ„åˆ°: preInstantiateSingletonsæ–¹æ³•åœ¨å®ä¾‹åŒ–æ‰€æœ‰å•ä¾‹éæ‡’åŠ è½½çš„beanæ—¶, è·³è¿‡äº†@Lazyçš„bean<strong>(é€šè¿‡BeanDefinitionçš„isLazyInitå±æ€§)</strong></p>
<p>è€Œåœ¨çœŸæ­£æ—¶å€™@Lazyçš„Beanæ—¶, æ˜¯é€šè¿‡getBean()è·å–çš„, è€ŒgetBean()ä¼šé€šè¿‡createBean()æ–¹æ³•è¿›è¡Œåˆ›å»º, è€Œæ­¤æ—¶æ‰ä¼šçœŸæ­£åˆ›å»ºæ­¤Bean!</p>
<h2 id="ä¸ƒ-ä»£ç æµ‹è¯•"><a href="#ä¸ƒ-ä»£ç æµ‹è¯•" class="headerlink" title="ä¸ƒ. ä»£ç æµ‹è¯•"></a>ä¸ƒ. ä»£ç æµ‹è¯•</h2><p>ç»è¿‡ä¸Šé¢çš„å¯¹IoCå®¹å™¨çš„æ„å»º, ä¸‹é¢é€šè¿‡ä¸€ä¸ªæµ‹è¯•æ¥éªŒè¯è¿™ä¸ªç»“æœ(ä¸ºäº†éªŒè¯çš„ç®€å•, è¿™é‡Œç®€åŒ–äº†ä»£ç )</p>
<h3 id="å®šä¹‰å‡ ä¸ªServiceæ–¹æ³•"><a href="#å®šä¹‰å‡ ä¸ªServiceæ–¹æ³•" class="headerlink" title="å®šä¹‰å‡ ä¸ªServiceæ–¹æ³•"></a>å®šä¹‰å‡ ä¸ªServiceæ–¹æ³•</h3><p>è¿™é‡Œä¸ºäº†ç®€å•èµ·è§, ç›´æ¥å®šä¹‰äº†XXXServiceä¸ºä¸šåŠ¡çš„å®ç°ç±»:</p>
<p>LazyService.java</p>
<pre><code class="java"> // LazyServiceæ‡’åŠ è½½æµ‹è¯•
@MyLazy
@MyComponent
public class LazyService {
    public LazyService() {
        System.out.println(&quot;æµ‹è¯•æ‡’åŠ è½½: LazyService çš„æ— å‚æ„é€ è¢«æ‰§è¡Œ&quot;);
    }
}</code></pre>
<p>LazyServiceç”¨äºæ‡’åŠ è½½æµ‹è¯•</p>
<hr>
<p>UserService.java</p>
<pre><code class="java"> // æä¾›myCustomerå®ä¾‹
@MyComponent
public class UserService {

    @MyAutowired
    private CustomerService myCustomer;

    public CustomerService getMyCustomer() {
        return myCustomer;
    }
}</code></pre>
<p>CustomerService.java</p>
<pre><code class="java">@MyService(name = &quot;myCustomer&quot;)
public class CustomerService {

    @MyAutowired
    private UserService userService;
}</code></pre>
<p>CustomerServiceæŒ‡å®šåˆ›å»ºçš„BeanName</p>
<p>åŒæ—¶UserServiceå’ŒCustomerServiceéªŒè¯å¯èƒ½å‡ºç°çš„å¾ªç¯ä¾èµ–é—®é¢˜</p>
<hr>
<h3 id="æ§åˆ¶å™¨ç±»"><a href="#æ§åˆ¶å™¨ç±»" class="headerlink" title="æ§åˆ¶å™¨ç±»"></a>æ§åˆ¶å™¨ç±»</h3><p>CustomerController.java</p>
<pre><code class="java">@MyController
public class CustomerController {

    @MyAutowired
    private UserService userService;
}</code></pre>
<hr>
<h3 id="åç½®å¤„ç†å™¨"><a href="#åç½®å¤„ç†å™¨" class="headerlink" title="åç½®å¤„ç†å™¨"></a>åç½®å¤„ç†å™¨</h3><pre><code class="java">@MyComponent
public class MyBeanPostProcessor implements BeanPostProcessor {
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) {
        System.out.println(&quot;æ­£åœ¨å¤„ç†&quot; + beanName + &quot;çš„åˆå§‹åŒ–å‰çš„æ“ä½œ&quot;);
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) {
        System.out.println(&quot;æ­£åœ¨å¤„ç†&quot; + beanName + &quot;çš„åˆå§‹åŒ–åçš„æ“ä½œ&quot;);
        return bean;
    }
}</code></pre>
<hr>
<h3 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h3><pre><code class="java">public class IocApplication {

    public static void main(String[] args) {
        // åœ¨æŒ‡å®šåŒ…ä¸‹æ‰«æ, å®ŒæˆBeanåˆ›å»º, æ³¨å…¥ç­‰
        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(&quot;top.jasonkayzk.ioc.app&quot;);
        System.out.println(&quot;---------------å®¹å™¨åˆ›å»ºå®Œæ¯•-------------------&quot;);

        // æµ‹è¯•ç±»å‹é¦–å­—æ¯å°å†™è·å–
        UserService userService = (UserService) context.getBean(&quot;userService&quot;);
        System.out.println(userService);

        // æµ‹è¯•è‡ªå®šä¹‰åç§°
        CustomerService customerService = (CustomerService) context.getBean(&quot;myCustomer&quot;);
        System.out.println(customerService);

        // æµ‹è¯•æ‡’åŠ è½½
        Object lazyService = context.getBean(&quot;lazyService&quot;);
        System.out.println(lazyService);

        // æµ‹è¯•å¾ªç¯ä¾èµ–
        System.out.println(&quot;æµ‹è¯•å¾ªç¯ä¾èµ–  &quot; + (customerService == userService.getMyCustomer()));
        System.out.println(&quot;--------------------------------------------------------&quot;);
        Set&lt;String&gt; beanDefinitionNames = context.getBeanDefinitionNames();
        beanDefinitionNames.forEach(System.out::println);
    }
}</code></pre>
<p>å…è®¸å¯åŠ¨ç±», æœ€ç»ˆè¾“å‡º:</p>
<pre><code>æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š top.jasonkayzk.ioc.app.service.LazyService
æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š top.jasonkayzk.ioc.app.service.CustomerService
æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š top.jasonkayzk.ioc.app.service.UserService
æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š top.jasonkayzk.ioc.app.IocApplication
æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š top.jasonkayzk.ioc.app.config.MyBeanPostProcessor
æ­£åœ¨è¯»å–classæ–‡ä»¶ï¼š top.jasonkayzk.ioc.app.controller.CustomerController
å‡è®¾æ­£åœ¨æ‰§è¡ŒmyCustomerçš„initæ–¹æ³•.....
å‡è®¾æ­£åœ¨æ‰§è¡ŒuserServiceçš„initæ–¹æ³•.....
å‡è®¾æ­£åœ¨æ‰§è¡ŒcustomerControllerçš„initæ–¹æ³•.....
æ­£åœ¨å¤„ç†myBeanPostProcessorçš„åˆå§‹åŒ–å‰çš„æ“ä½œ
å‡è®¾æ­£åœ¨æ‰§è¡ŒmyBeanPostProcessorçš„initæ–¹æ³•.....
æ­£åœ¨å¤„ç†myBeanPostProcessorçš„åˆå§‹åŒ–åçš„æ“ä½œ
---------------å®¹å™¨åˆ›å»ºå®Œæ¯•-------------------
top.jasonkayzk.ioc.app.service.UserService@5e5792a0
top.jasonkayzk.ioc.app.service.CustomerService@26653222
æµ‹è¯•æ‡’åŠ è½½: LazyService çš„æ— å‚æ„é€ è¢«æ‰§è¡Œ
æ­£åœ¨å¤„ç†lazyServiceçš„åˆå§‹åŒ–å‰çš„æ“ä½œ
å‡è®¾æ­£åœ¨æ‰§è¡ŒlazyServiceçš„initæ–¹æ³•.....
æ­£åœ¨å¤„ç†lazyServiceçš„åˆå§‹åŒ–åçš„æ“ä½œ
top.jasonkayzk.ioc.app.service.LazyService@3532ec19
æµ‹è¯•å¾ªç¯ä¾èµ–  true
--------------------------------------------------------
userService
myCustomer
lazyService
customerController
myBeanPostProcessor</code></pre><p>è¯´æ˜å…¨éƒ¨è¿è¡Œæ­£å¸¸!</p>
<blockquote>
<br>

<p>æ„Ÿè°¢æ‚¨è¾›è‹¦çœ‹åˆ°è¿™é‡Œâ¤</p>
<p>æ–‡ä¸­å…¨éƒ¨æºä»£ç : <a href="https://github.com/JasonkayZK/Java_Samples/tree/spring-ioc" target="_blank" rel="noopener">https://github.com/JasonkayZK/Java_Samples/tree/spring-ioc</a></p>
</blockquote>
<br>

<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>å¦‚æœè§‰å¾—æ–‡ç« å†™çš„ä¸é”™, å¯ä»¥å…³æ³¨å¾®ä¿¡å…¬ä¼—å·: Coderå¼ å°å‡¯</p>
<p>å†…å®¹å’Œåšå®¢åŒæ­¥æ›´æ–°~</p>
<p>æºä»£ç : </p>
<ul>
<li><a href="https://github.com/JasonkayZK/Java_Samples/tree/spring-ioc" target="_blank" rel="noopener">https://github.com/JasonkayZK/Java_Samples/tree/spring-ioc</a></li>
</ul>
<p>æ–‡ç« å‚è€ƒ:</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000015467044" target="_blank" rel="noopener">ä»é›¶å¼€å§‹å®ç°ä¸€ä¸ªç®€æ˜“çš„Java MVCæ¡†æ¶</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/95823916" target="_blank" rel="noopener">ä»¿spring-frameworkæºç å®ç°æ‰‹å†™ä¸€ä¸ªIOCå®¹å™¨</a></li>
</ul>
<p>é¡¹ç›®å‚è€ƒ:</p>
<ul>
<li><a href="https://gitlab.com/qingsongxi/spring-ioc" target="_blank" rel="noopener">spring-ioc</a></li>
</ul>
<br>
  </article>

  <div id="like-container" style="text-align: center">
    <div class="like-feed">
      <p>è§‰å¾—æœ¬æ–‡ä¸é”™å°±ç‚¹ä¸ª<span>â™¥</span>å†èµ°å§~</p>
      <div class="like-img">
        <div class="like-heart" id="like" rel="like"></div>
        <div class="like-count" id="like-count"></div>
      </div>
    </div>
  </div>

  <!-- æ–‡ç« åˆ†äº« -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
  <div class="social-share" data-mode="prepend" data-disabled="tencent,diandian"></div>
  <br>

  
  
<div class="nexmoe-post-copyright">
<i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
<strong>æœ¬æ–‡ä½œè€…ï¼š</strong>Jasonkay<br>
<strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://jasonkayzk.github.io/2020/03/02/å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨/" title="https://jasonkayzk.github.io/2020/03/02/å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨/" target="_blank" rel="noopener">https://jasonkayzk.github.io/2020/03/02/å®ç°ä¸€ä¸ªç®€å•çš„SpringIOCå®¹å™¨/</a><br>

  <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯

</div>


  

  <!-- å¢åŠ é¢è¯•ç‚¹å‡»æ ‡é¢˜æ‰æ˜¾ç¤ºç­”æ¡ˆç­‰æ•ˆæœ! -->
  <!-- <script type="text/javascript">
    $(".question").click(function () {
      var a = $(".answer").eq($(".question").index(this));
      a.is(".answer_shown") ? a.animate({ 'opacity': '1' }, 800).removeClass("answer_shown") : a.animate({ 'opacity': '0' }, 800).addClass("answer_shown");
    });
  </script> -->
  <!-- <style>
    .answer_shown {
      opacity: 0;
    }
  </style> -->

  <!-- åŠ è½½åšå®¢ç‚¹èµåŠŸèƒ½ -->
  <script>
    function ajax(options) {
      return new Promise(function (resolve, reject) {
        $.ajax(options).done(resolve).fail(reject);
      });
    }

    var docName = $('meta[property="og:title"]').attr('content');
    
    // è·³è¿‡localhost
    if (location.hostname !== 'localhost') {
      // åˆå§‹åŒ–
      ajax({
        url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
        type: 'post',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({
          "actionId": "get",
          "docName": docName
        })
      }).then(
        function fulfillHandler(data) {
          $('#like-count').text(data.likeNum);
        },
        function rejectHandler(jqXHR, textStatus, errorThrown) {
          $('#like-count').text(0);
          console.log(jqXHR, textStatus, errorThrown);
        }
      ).catch(function errorHandler(error) {
        $('#like-count').text(0);
        console.log(error);
      });

      $(document).ready(function () {
        $(".like-heart").on("click", function () {
          var heart = $(this);
          var likeCount = $("#like-count" + heart.attr("id").split("like")[1]);
          var intCount = parseInt(likeCount.html());
          var rel = heart.attr("rel");

          if (rel === "like") {
            likeCount.html(intCount + 1);
            heart.addClass("like-heartAnimation").attr("rel", "unlike");
            ajax({
              url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
              type: 'post',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({
                "actionId": "add",
                "docName": docName
              })
            }).catch(function errorHandler(error) {
              console.log(error);
            });
          } else {
            likeCount.html(intCount - 1);
            heart.removeClass("like-heartAnimation").attr("rel", "like");
            heart.css("background-position", "left");
            ajax({
              url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
              type: 'post',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({
                "actionId": "subtract",
                "docName": docName
              })
            }).catch(function errorHandler(error) {
              console.log(error);
            });
          }
        }).on("mouseleave", function () {
          $(this).css("background-position", "");
        });
      });
    }
  </script>
  <style>
    #like-container {
      margin: 0 auto;
      width: 100%;
    }

    .like-img {
      width: 200px;
      height: 100px;
      display: inline-block;
    }

    .like-heart {
      float: left;
      background: url(/images/web_heart_animation.png);
      background-position: left;
      background-repeat: no-repeat;
      height: 50px;
      width: 120px;
      left: -14px;
      background-size: 2900%;
    }

    .like-count {
      float: left;
      font-family: 'Georgia', Times, Times New Roman, serif;
      font-size: 35px;
      color: #999999;
      text-align: left;
      height: 50px;
      width: 50px;
      line-height: 44px;
    }

    .like-heart:hover,
    .like-heart:focus {
      background-position: right;
    }

    @-webkit-keyframes heartBlast {
      0% {
        background-position: left;
      }

      100% {
        background-position: right;
      }
    }

    @keyframes heartBlast {
      0% {
        background-position: left;
      }

      100% {
        background-position: right;
      }
    }

    .like-heartAnimation {
      display: inline-block;
      -webkit-animation-name: heartBlast;
      animation-name: heartBlast;
      -webkit-animation-duration: .8s;
      animation-duration: .8s;
      -webkit-animation-iteration-count: 1;
      animation-iteration-count: 1;
      -webkit-animation-timing-function: steps(28);
      animation-timing-function: steps(28);
      background-position: right;
    }

    .like-feed {
      height: 90px;
      margin-bottom: 20px;
      text-align: center
    }

    .like-feed p {
      font-family: 'microsoft yahei', 'Georgia';
      font-size: 25px;
    }

    .like-feed span {
      font-size: 30px;
      color: #D33115;
    }
  </style>

  <section class="nexmoe-comment">
    <div class="utterances"></div>
<style>
    .v .vwrap {
      border: 1px dashed #c4bfbf
    }
  
    .v .vwrap .vheader .vinput {
      border-bottom: 1px dashed #c4bfbf
    }
</style>
<script src="https://utteranc.es/client.js" repo="JasonkayZK/JasonkayZK.github.io" issue-term="title" label="commentâœ¨ğŸ’¬âœ¨" theme="github-light" crossorigin="anonymous" async>
</script>

</section>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/app.js?v=1770725349767"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>




  
    <!-- Google Analytics -->
<script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'G-1NWK4EEKDF', 'auto');
    ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>






    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5f5ec71a32c11ff54dff64d0341017b0";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<!-- 
<script type="text/javascript">
  !function (e, t, a) { function n() { c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), o(), r() } function r() { for (var e = 0; e < d.length; e++)d[e].alpha <= 0 ? (t.body.removeChild(d[e].el), d.splice(e, 1)) : (d[e].y--, d[e].scale += .004, d[e].alpha -= .013, d[e].el.style.cssText = "left:" + d[e].x + "px;top:" + d[e].y + "px;opacity:" + d[e].alpha + ";transform:scale(" + d[e].scale + "," + d[e].scale + ") rotate(45deg);background:" + d[e].color + ";z-index:99999"); requestAnimationFrame(r) } function o() { var t = "function" == typeof e.onclick && e.onclick; e.onclick = function (e) { t && t(), i(e) } } function i(e) { var a = t.createElement("div"); a.className = "heart", d.push({ el: a, x: e.clientX - 5, y: e.clientY - 5, scale: 1, alpha: 1, color: s() }), t.body.appendChild(a) } function c(e) { var a = t.createElement("style"); a.type = "text/css"; try { a.appendChild(t.createTextNode(e)) } catch (t) { a.styleSheet.cssText = e } t.getElementsByTagName("head")[0].appendChild(a) } function s() { return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")" } var d = []; e.requestAnimationFrame = function () { return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) { setTimeout(e, 1e3 / 60) } }(), n() }(window, document);
</script>
 -->
 
<script>
  // è¿›åº¦æ¡åŠ è½½: nprogress
  NProgress.start()
  NProgress.done()
</script>

<script type="text/javascript" defer>
  $(document).ready(function () {
    $.goup({
      trigger: 100,
      bottomOffset: 50,
      locationOffset: 50,
      title: '0%',
      titleAsText: true
    });
    $(".goup-container").css("background", "#64dcf0 none repeat scroll 0% 0%").css("opacity", 0.9);
    $(".goup-text").css("font-weight", 600).css("opacity", 0.9);
  });

  $(document).scroll(function () {
    var d_h = $(document).height();
    var c_h = $(window).height();
    var c_t_h = $(window).scrollTop();
    var schedule = c_t_h / (d_h - c_h - 0.5);
    var str = Number(schedule * 100).toFixed();
    str += "%";
    $(".goup-text").text(str);
  });
</script>

<!-- ç«™å†…é€šçŸ¥ -->
<script src="/js/notification.js"></script>
<script>
  'use strict';

  (function () {
    $(function () {
      $('.position').click(function (event) {
        var el = $(event.target);
        $('.position').removeClass('selected');
        el.addClass('selected');
        position = el.attr('data-position');
      });
    });
  });

  var position = 2;
  // å…³é—­ç™¾æ¯«ç§’æ•°
  var closeTime = 50;
  var notifyFunc = function () {
    // Notification.create(
    //   //Â Title
    //   "Tencentå†…æ¨ä¸­ğŸ“§",
    //   //Â Text
    //   "ç®€å†æŠ•é€’å¤„ï¼š<BR/><a href='/hiring/'>ç®€å†æŠ•é€’</a>",
    //   //Â Illustration
    //   "/images/avatar4.jpg",
    //   //Â Effect
    //   'fadeInRight',
    //   //Â PositionÂ 1, 2,Â 3,Â 4
    //   position,
    //   closeTime
    // );
    // setTimeout(() => {
    //   Notification.create(
    //     "èµ„æºä¸‹è½½âš¡",
    //     "ä¼ é€é—¨ï¼š<BR/><a href='/sharing/'>æ–‡ä»¶åˆ†äº«</a>",
    //     "/images/avatar4.jpg",
    //     'fadeInRight',
    //     position,
    //     closeTime
    //   )
    // }, 350);
    setTimeout(() => {
      Notification.create(
        "RSSè®¢é˜…ğŸ“¢",
        "ä¼ é€é—¨ï¼š<BR/><a href='/atom.xml'>RSSè®¢é˜…</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 0);
    setTimeout(() => {
        Notification.create(
        "åœ¨çº¿ç¾¤èŠğŸ’­",
        "ä¼ é€é—¨ï¼š<BR/><a href='/chat/'>ç•…æ‰€æ¬²è¨€</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 350);
    setTimeout(() => {
        Notification.create(
        // "è·‘æ­¥å¥èº«ğŸƒ",
        // "ä¼ é€é—¨ï¼š<BR/><a href='/running/'>è·‘æ­¥å¥èº«</a>",
        "æ‘„å½±åˆ†äº«ğŸ“·",
        "ä¼ é€é—¨ï¼š<BR/><a href='http://159.75.131.252:32352/'>æ‘„å½±åˆ†äº«</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 700);
  };

  (function once() {
    if (sessionStorage.getItem('load') == null) {
      notifyFunc();
      sessionStorage.setItem('load', false);
    } else {
      return;
    }
  })();
</script>
<script>
  $(document).on("click", ".dismiss", function (e) {
    Notification.hide(e.currentTarget.classList[1].split('-')[1]);
  })
</script>

</html>