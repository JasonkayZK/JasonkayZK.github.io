<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="/js/jquery.goup.min.js" defer></script>
  
  <title>Redisé¢è¯•ç›¸å…³é—®é¢˜ - å¼ å°å‡¯çš„åšå®¢</title>
  <meta charset="UTF-8">
  <meta name="description" content="è¬™è™šã¯äººã‚’é€²æ­©ã•ã›ã€ã”ã†ã¾ã‚“ã¯äººã‚’è½å¾Œã•ã›ã‚‹ã€‚ç¤¾ä¼šã®åˆå¿ƒè€…ã‹ã‚‰ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png">
  <meta name="description" content="æœ¬ç¯‡æ€»ç»“äº†Redisåœ¨é¢è¯•ä¸­ç»å¸¸ç¢°åˆ°çš„ä¸€äº›é—®é¢˜, ä»¥åŠåœ¨é¡¹ç›®å¼€å‘ä¸­Rediså¸¸è§çš„é—®é¢˜">
<meta name="keywords" content="Redis,Javaé¢è¯•">
<meta property="og:type" content="article">
<meta property="og:title" content="Redisé¢è¯•ç›¸å…³é—®é¢˜">
<meta property="og:url" content="https://jasonkayzk.github.io/2020/02/05/Redisé¢è¯•ç›¸å…³é—®é¢˜/index.html">
<meta property="og:site_name" content="å¼ å°å‡¯çš„åšå®¢">
<meta property="og:description" content="æœ¬ç¯‡æ€»ç»“äº†Redisåœ¨é¢è¯•ä¸­ç»å¸¸ç¢°åˆ°çš„ä¸€äº›é—®é¢˜, ä»¥åŠåœ¨é¡¹ç›®å¼€å‘ä¸­Rediså¸¸è§çš„é—®é¢˜">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13230160-6c08ae68fe9a796f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/815">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13230160-2046b77640392660.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/913">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13230160-34c1a3f8ec81a652.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/876">
<meta property="og:image" content="http://img1.tuicool.com/NjYjYvF.png!web?_=6182478">
<meta property="og:image" content="http://img2.tuicool.com/YrqaY3f.png!web?_=6182478">
<meta property="og:updated_time" content="2026-02-10T12:07:45.745Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redisé¢è¯•ç›¸å…³é—®é¢˜">
<meta name="twitter:description" content="æœ¬ç¯‡æ€»ç»“äº†Redisåœ¨é¢è¯•ä¸­ç»å¸¸ç¢°åˆ°çš„ä¸€äº›é—®é¢˜, ä»¥åŠåœ¨é¡¹ç›®å¼€å‘ä¸­Rediså¸¸è§çš„é—®é¢˜">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/13230160-6c08ae68fe9a796f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/815">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/atom-one-dark.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1770725351761">

  <!-- è¿›åº¦æ¡åŠ è½½: nprogress -->
  <link href="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6617852905105366" crossorigin="anonymous"></script>
  <!-- Cloudflare Web Analytics -->
   <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{"token": "73d46a730654451bac205cdc12bea918"}"></script>
  <!-- umami Web Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="23fadd4b-d559-4ae0-a4f6-f90680c3d4c0"></script>

  <!-- æœ¬åœ°æœç´¢js -->
  <script type="text/javascript" src="/js/search.js"></script>

  <!-- ç™¾åº¦ç«™ç‚¹ç®¡ç† -->
  <meta name="baidu-site-verification" content="code-SKIvb4A1Qx">

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1NWK4EEKDF');
  </script>

  <!-- ç«™å†…é€šçŸ¥ -->
  <link href="https://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="/css/default.css">
  <link rel="stylesheet" href="/css/animate.min.css">
  <link rel="stylesheet" href="/css/notification.css">
  <link rel="stylesheet" href="/css/index.css">
<link rel="alternate" href="/atom.xml" title="å¼ å°å‡¯çš„åšå®¢" type="application/atom+xml">
</head>

<!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡æ ·å¼ -->
<style>
  #content_progress {
      /* Positioning */
      position: fixed;
      left: 0;
      top: 0;
      z-index: 99999;
      width: 100%;
      height: 3px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border: none;
      background-color: transparent;
      color: #ffaa73;
}

#content_progress::-webkit-progress-bar {
      background-color: transparent;
}

#content_progress::-webkit-progress-value {
      background-color: #ffaa73;
}

#content_progress::-moz-progress-bar {
      background-color:#ffaa73;
}
</style>
<!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡JS -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      var winHeight = window.innerHeight,
            docHeight = document.documentElement.scrollHeight,
            progressBar = document.querySelector('#content_progress');
      progressBar.max = docHeight - winHeight;
      progressBar.value = window.scrollY;

      document.addEventListener('scroll', function () {
            progressBar.max = document.documentElement.scrollHeight - window.innerHeight;
            progressBar.value = window.scrollY;
      });
});
</script>

<body class="mdui-drawer-body-left">
  <!-- æ–‡ç« é˜…è¯»è¿›åº¦æ¡ -->
  <progress id="content_progress" value="0"></progress>

  <!-- éŸ³é¢‘æ’­æ”¾ -->
  <!-- <link rel="stylesheet" href="/dist/APlayer.min.css">
  <div id="aplayer"></div>
  <script type="text/javascript" src="/dist/APlayer.min.js"></script>
  <script type="text/javascript" src="/dist/music.js"></script> -->

  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(/images/bg.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <a href="/" title="Jasonkay" class="mdui-btn mdui-btn-icon"><img src="/images/avatar4.jpg"></a>
      </div>
    </div>
  </div>
  <div id="nexmoe-header">
    <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Jasonkay">
            <img src="/images/avatar4.jpg" alt="Jasonkay">
        </a>
    </div>

    <!-- é»‘ç™½åˆ‡æ¢css -->
    <!-- <style>
        .light-dark-checkbox {
            margin: 0 auto;
        }

        /* The switch - the box around the slider */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        /* Hide default HTML checkbox */
        .switch .theme-switcher {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* The slider */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "ğŸŒ";
            height: 0px;
            width: 0px;
            left: -10px;
            top: 16px;
            line-height: 0px;
            transition: 0.4s;
        }

        .theme-switcher:checked+.slider:before {
            left: 35px;
            content: "ğŸŒ‘";
        }

        .theme-switcher:checked+.slider:before {
            transform: translateX(45px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 40px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* æš—é»‘æ ·å¼ */
        body.night {
            background-color: #263238;
            color: #aaa;
        }
        body.night img {
            filter: brightness(30%);
        }
        article.night {
            background-color: black;
            color: white;
        }
    </style> -->

    <!-- é»‘ç™½å¼€å…³ -->
    <!-- <div class="nexmoe-list-item mdui-list-item">
        <div class="light-dark-checkbox">
            <div>
                é»‘ç™½æ¨¡å¼åˆ‡æ¢(Beta)
            </div>
            <label class="switch">
                <input id="light-dark-input" type="checkbox" onclick="switchTheme();" class="theme-switcher">
                <span class="slider round"></span>
            </label>
        </div>
    </div> -->

    <!-- é»‘ç™½åˆ‡æ¢js -->
    <!-- <script>
        // get hours of the day in 24Hr format (0-23)
        var hr = (new Date()).getHours();

        $(document).ready(function () {
            var theme = sessionStorage.getItem("theme");
            if (theme == "dark") {
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
            } else if (theme == "light") {
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
            } else {
                setDefaultTheme(hr);
            }
        });

        function switchTheme() {
            if (sessionStorage.getItem("theme") == "dark") {
                sessionStorage.setItem("theme", "light");
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
            } else if (sessionStorage.getItem("theme") == "light") {
                sessionStorage.setItem("theme", "dark");
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
            } else {
                setDefaultTheme(hr);
            }
        };

        function setDefaultTheme(curHr) {
            // 6:00-18:00 light
            if (curHr >= 6 && curHr <= 18) {
                document.body.classList.remove('night');
                console.log('å¤œé—´æ¨¡å¼å…³é—­');
                sessionStorage.setItem("theme", "light");
                $("#light-dark-input").attr("checked", false);
            } else {
                // 0:00-6:00 & 18:00-00:00 night
                sessionStorage.setItem("theme", "dark");
                document.body.classList.add('night');
                console.log('å¤œé—´æ¨¡å¼å¼€å¯');
                $("#light-dark-input").attr("checked", true);
            }
        }
    </script> -->

    <div class="nexmoe-count">
        <div><span>æ–‡ç« </span>522</div>
        <div><span>æ ‡ç­¾</span>277</div>
        <div><span>åˆ†ç±»</span>67</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                å›åˆ°é¦–é¡µ
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/jp/" title="æ—¥è¯­åˆ†ç«™">
            <i class="mdui-list-item-icon nexmoefont icon-calendar-fill"></i>
            <div class="mdui-list-item-content">
                æ—¥è¯­åˆ†ç«™
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about/" title="å…³äºåšå®¢">
            <i class="mdui-list-item-icon nexmoefont icon-eye-fill"></i>
            <div class="mdui-list-item-content">
                å…³äºåšå®¢
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archive" title="æ–‡ç« å½’æ¡£">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                æ–‡ç« å½’æ¡£
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/anki/" title="Ankiç¬”è®°">
            <i class="mdui-list-item-icon nexmoefont icon-tag-fill"></i>
            <div class="mdui-list-item-content">
                Ankiç¬”è®°
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/study/" title="å­¦ä¹ è¿›åº¦">
            <i class="mdui-list-item-icon nexmoefont icon-telegram"></i>
            <div class="mdui-list-item-content">
                å­¦ä¹ è¿›åº¦
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/running/" title="è·‘æ­¥å¥èº«">
            <i class="mdui-list-item-icon nexmoefont icon-dribbble"></i>
            <div class="mdui-list-item-content">
                è·‘æ­¥å¥èº«
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/interview/" title="é¢è¯•ç›¸å…³">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                é¢è¯•ç›¸å…³
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/algorithm/" title="ç®—æ³•æ€»ç»“">
            <i class="mdui-list-item-icon nexmoefont icon-areachart"></i>
            <div class="mdui-list-item-content">
                ç®—æ³•æ€»ç»“
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/installing/" title="è½¯ä»¶å®‰è£…">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                è½¯ä»¶å®‰è£…
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/board/" title="åˆ›æ„ç™½æ¿">
            <i class="mdui-list-item-icon nexmoefont icon-tag-fill"></i>
            <div class="mdui-list-item-content">
                åˆ›æ„ç™½æ¿
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="http://159.75.131.252:32352/" title="æ‘„å½±åˆ†äº«">
            <i class="mdui-list-item-icon nexmoefont icon-telegram"></i>
            <div class="mdui-list-item-content">
                æ‘„å½±åˆ†äº«
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/chat/" title="ç•…æ‰€æ¬²è¨€">
            <i class="mdui-list-item-icon nexmoefont icon-ellipsis"></i>
            <div class="mdui-list-item-content">
                ç•…æ‰€æ¬²è¨€
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/realtime/" title="å®æ—¶æ•°æ®ç»Ÿè®¡">
            <i class="mdui-list-item-icon nexmoefont icon-time-circle-fill"></i>
            <div class="mdui-list-item-content">
                å®æ—¶æ•°æ®ç»Ÿè®¡
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/py/" title="å‹æƒ…é“¾æ¥">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                å‹æƒ…é“¾æ¥
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç¤¾äº¤æŒ‰é’®</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/23364338" target="_blank" mdui-tooltip="{content: 'å“”å“©å“”å“©'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/jasonkayzk/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="https://steamcommunity.com/id/jasonkayzk/" target="_blank" mdui-tooltip="{content: 'Steam'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-steam"></i>
        </a><a class="mdui-ripple" href="https://twitter.com/Jasonkay_ZK/" target="_blank" mdui-tooltip="{content: 'Twitter'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-twitter"></i>
        </a><a class="mdui-ripple" href="mailto:jasonkayzk@gmail.com" target="_blank" mdui-tooltip="{content: 'Mail'}" style="color: rgb(29, 161, 242);background-color: rgba(29, 161, 242, .1);">
            <i class="nexmoefont icon-mail-fill"></i>
        </a>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">ç«™å†…æœç´¢</h3>
    <div class="nexmoe-widget nexmoe-search">
        <form class="site-search-form">
            <input type="text" id="local-search-input" class="st-search-input">
        </form>
        <div id="local-search-result" class="local-search-result-cls">
        </div>
    </div>
</div>

<!-- æ‰§è¡Œæœ¬åœ°æœç´¢è„šæœ¬ -->
<script type="text/javascript">
    var path = "https://cdn.jsdelivr.net/gh/jasonkayzk/JasonkayZK.github.io@master/search.xml";
    searchFunc(path, 'local-search-input', 'local-search-result');
</script>

<style type="text/css">
/* æœç´¢æ¡ */
.site-search-form {
    text-align: center;
}
#local-search-input {
    width: 100%;
}

/* æœç´¢ç»“æœå…³é—­ */
#local-search-close {
    font-size: 22.5px;
    cursor: pointer;
    color: #ff4e6a;
}

.search-result-list > li {
    line-height: 0.75;
    margin-top: -5px;
}

</style>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ ‡ç­¾äº‘</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud">
      <a href="/tags/2048/" style="font-size: 10px;">2048</a> <a href="/tags/ACM/" style="font-size: 10px;">ACM</a> <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/AUFS/" style="font-size: 10px;">AUFS</a> <a href="/tags/Android/" style="font-size: 10.91px;">Android</a> <a href="/tags/AppStore/" style="font-size: 10px;">AppStore</a> <a href="/tags/AppleScript/" style="font-size: 10px;">AppleScript</a> <a href="/tags/Aria2/" style="font-size: 10.91px;">Aria2</a> <a href="/tags/Async/" style="font-size: 10px;">Async</a> <a href="/tags/BFS/" style="font-size: 10.45px;">BFS</a> <a href="/tags/Bash/" style="font-size: 10.45px;">Bash</a> <a href="/tags/BitTorrent/" style="font-size: 10px;">BitTorrent</a> <a href="/tags/BloomFilter/" style="font-size: 10px;">BloomFilter</a> <a href="/tags/Bytebase/" style="font-size: 10px;">Bytebase</a> <a href="/tags/C/" style="font-size: 15.91px;">C++</a> <a href="/tags/CAP/" style="font-size: 10px;">CAP</a> <a href="/tags/CDN/" style="font-size: 10.45px;">CDN</a> <a href="/tags/CGLibåŠ¨æ€ä»£ç†/" style="font-size: 10px;">CGLibåŠ¨æ€ä»£ç†</a> <a href="/tags/CUDA/" style="font-size: 10px;">CUDA</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Caffeine/" style="font-size: 10px;">Caffeine</a> <a href="/tags/Cargo/" style="font-size: 11.82px;">Cargo</a> <a href="/tags/CentOS/" style="font-size: 12.27px;">CentOS</a> <a href="/tags/Cgroups/" style="font-size: 10px;">Cgroups</a> <a href="/tags/Chromeæ‰©å±•/" style="font-size: 10px;">Chromeæ‰©å±•</a> <a href="/tags/Cli/" style="font-size: 10.45px;">Cli</a> <a href="/tags/ClickHouse/" style="font-size: 10px;">ClickHouse</a> <a href="/tags/Cling/" style="font-size: 10px;">Cling</a> <a href="/tags/Clion/" style="font-size: 10px;">Clion</a> <a href="/tags/Colima/" style="font-size: 10px;">Colima</a> <a href="/tags/Container/" style="font-size: 10px;">Container</a> <a href="/tags/DFS/" style="font-size: 10.45px;">DFS</a> <a href="/tags/DLL/" style="font-size: 10.45px;">DLL</a> <a href="/tags/Debian/" style="font-size: 10px;">Debian</a> <a href="/tags/Docker/" style="font-size: 18.64px;">Docker</a> <a href="/tags/Docker-Compose/" style="font-size: 10.45px;">Docker-Compose</a> <a href="/tags/DockerHub/" style="font-size: 10px;">DockerHub</a> <a href="/tags/Dolt/" style="font-size: 10px;">Dolt</a> <a href="/tags/Dubbo/" style="font-size: 10.91px;">Dubbo</a> <a href="/tags/Easegress/" style="font-size: 10px;">Easegress</a> <a href="/tags/ElasticSearch/" style="font-size: 14.09px;">ElasticSearch</a> <a href="/tags/Electron/" style="font-size: 10.45px;">Electron</a> <a href="/tags/English/" style="font-size: 10px;">English</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/FFmpeg/" style="font-size: 10px;">FFmpeg</a> <a href="/tags/FTP/" style="font-size: 10.45px;">FTP</a> <a href="/tags/FaaS/" style="font-size: 10px;">FaaS</a> <a href="/tags/Future/" style="font-size: 10px;">Future</a> <a href="/tags/GC/" style="font-size: 10px;">GC</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/GRPC/" style="font-size: 10px;">GRPC</a> <a href="/tags/Gin/" style="font-size: 10px;">Gin</a> <a href="/tags/Git/" style="font-size: 13.64px;">Git</a> <a href="/tags/Gitee/" style="font-size: 10px;">Gitee</a> <a href="/tags/Github/" style="font-size: 14.55px;">Github</a> <a href="/tags/Github-Actions/" style="font-size: 10px;">Github-Actions</a> <a href="/tags/Golang/" style="font-size: 18.18px;">Golang</a> <a href="/tags/Gomod/" style="font-size: 10px;">Gomod</a> <a href="/tags/Goroutine/" style="font-size: 10.91px;">Goroutine</a> <a href="/tags/GraalVM/" style="font-size: 10px;">GraalVM</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/HAProxy/" style="font-size: 10px;">HAProxy</a> <a href="/tags/Hadoop/" style="font-size: 10px;">Hadoop</a> <a href="/tags/IDEAé…ç½®/" style="font-size: 10px;">IDEAé…ç½®</a> <a href="/tags/IDç”Ÿæˆå™¨/" style="font-size: 10.45px;">IDç”Ÿæˆå™¨</a> <a href="/tags/IOæ¨¡å‹/" style="font-size: 10px;">IOæ¨¡å‹</a> <a href="/tags/Ingress/" style="font-size: 10.45px;">Ingress</a> <a href="/tags/JDKåŠ¨æ€ä»£ç†/" style="font-size: 10.45px;">JDKåŠ¨æ€ä»£ç†</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 12.27px;">Java</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/JavaåŸºç¡€/" style="font-size: 16.82px;">JavaåŸºç¡€</a> <a href="/tags/Javaæ³¨è§£/" style="font-size: 10px;">Javaæ³¨è§£</a> <a href="/tags/Javaæºç /" style="font-size: 12.27px;">Javaæºç </a> <a href="/tags/Javaé¢è¯•/" style="font-size: 11.36px;">Javaé¢è¯•</a> <a href="/tags/JuiceFS/" style="font-size: 10px;">JuiceFS</a> <a href="/tags/JupyterLab/" style="font-size: 10px;">JupyterLab</a> <a href="/tags/Kafka/" style="font-size: 10.45px;">Kafka</a> <a href="/tags/Kubernetes/" style="font-size: 15.45px;">Kubernetes</a> <a href="/tags/LVS/" style="font-size: 10.91px;">LVS</a> <a href="/tags/Lambdaè¡¨è¾¾å¼/" style="font-size: 10.91px;">Lambdaè¡¨è¾¾å¼</a> <a href="/tags/LevelDB/" style="font-size: 10px;">LevelDB</a> <a href="/tags/Library/" style="font-size: 10.45px;">Library</a> <a href="/tags/Life/" style="font-size: 10px;">Life</a> <a href="/tags/Linux/" style="font-size: 16.36px;">Linux</a> <a href="/tags/LruCache/" style="font-size: 10px;">LruCache</a> <a href="/tags/MacOS/" style="font-size: 10.45px;">MacOS</a> <a href="/tags/Maven/" style="font-size: 12.27px;">Maven</a> <a href="/tags/MongoDB/" style="font-size: 11.82px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 13.64px;">MySQL</a> <a href="/tags/Mybatis/" style="font-size: 10.91px;">Mybatis</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/NIO/" style="font-size: 10.91px;">NIO</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Namespace/" style="font-size: 10px;">Namespace</a> <a href="/tags/Netty/" style="font-size: 10px;">Netty</a> <a href="/tags/Newman/" style="font-size: 10px;">Newman</a> <a href="/tags/Nginx/" style="font-size: 12.27px;">Nginx</a> <a href="/tags/Node-js/" style="font-size: 11.36px;">Node.js</a> <a href="/tags/Okular/" style="font-size: 10px;">Okular</a> <a href="/tags/P2P/" style="font-size: 10px;">P2P</a> <a href="/tags/POML/" style="font-size: 10px;">POML</a> <a href="/tags/Panic/" style="font-size: 10px;">Panic</a> <a href="/tags/PipelineDB/" style="font-size: 10px;">PipelineDB</a> <a href="/tags/PostgreSQL/" style="font-size: 10.45px;">PostgreSQL</a> <a href="/tags/Postman/" style="font-size: 10.45px;">Postman</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10.91px;">Protobuf</a> <a href="/tags/Python/" style="font-size: 11.36px;">Python</a> <a href="/tags/RAII/" style="font-size: 10px;">RAII</a> <a href="/tags/RPC/" style="font-size: 10px;">RPC</a> <a href="/tags/RSS/" style="font-size: 10.91px;">RSS</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redash/" style="font-size: 10px;">Redash</a> <a href="/tags/Redis/" style="font-size: 14.55px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Rust/" style="font-size: 18.64px;">Rust</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/SSE/" style="font-size: 10px;">SSE</a> <a href="/tags/SSH/" style="font-size: 10.45px;">SSH</a> <a href="/tags/Serverless/" style="font-size: 10px;">Serverless</a> <a href="/tags/Shadowsocks/" style="font-size: 10.91px;">Shadowsocks</a> <a href="/tags/Skiplist/" style="font-size: 10px;">Skiplist</a> <a href="/tags/Slice/" style="font-size: 10px;">Slice</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/Spring/" style="font-size: 11.82px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/tags/Springæºç /" style="font-size: 10px;">Springæºç </a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/TOML/" style="font-size: 10px;">TOML</a> <a href="/tags/Telegraf/" style="font-size: 10px;">Telegraf</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/Tomcat/" style="font-size: 10.45px;">Tomcat</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/UUID/" style="font-size: 10px;">UUID</a> <a href="/tags/UnionFS/" style="font-size: 10px;">UnionFS</a> <a href="/tags/VMWare/" style="font-size: 13.18px;">VMWare</a> <a href="/tags/VPN/" style="font-size: 10px;">VPN</a> <a href="/tags/WebAssembly/" style="font-size: 10.45px;">WebAssembly</a> <a href="/tags/Websocket/" style="font-size: 10px;">Websocket</a> <a href="/tags/XML/" style="font-size: 10.91px;">XML</a> <a href="/tags/YAML/" style="font-size: 10px;">YAML</a> <a href="/tags/Zookeeper/" style="font-size: 10.91px;">Zookeeper</a> <a href="/tags/apt/" style="font-size: 10px;">apt</a> <a href="/tags/autok3s/" style="font-size: 10px;">autok3s</a> <a href="/tags/cURL/" style="font-size: 10px;">cURL</a> <a href="/tags/chroot/" style="font-size: 10px;">chroot</a> <a href="/tags/cmder/" style="font-size: 10px;">cmder</a> <a href="/tags/grpc/" style="font-size: 10px;">grpc</a> <a href="/tags/hashå†²çª/" style="font-size: 10px;">hashå†²çª</a> <a href="/tags/inoreader/" style="font-size: 10px;">inoreader</a> <a href="/tags/k3s/" style="font-size: 10.45px;">k3s</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/keepalived/" style="font-size: 10px;">keepalived</a> <a href="/tags/libp2p/" style="font-size: 10px;">libp2p</a> <a href="/tags/minikube/" style="font-size: 10.45px;">minikube</a> <a href="/tags/ntfy/" style="font-size: 10px;">ntfy</a> <a href="/tags/picocli/" style="font-size: 10px;">picocli</a> <a href="/tags/telnet/" style="font-size: 10px;">telnet</a> <a href="/tags/uv/" style="font-size: 10px;">uv</a> <a href="/tags/vcpkg/" style="font-size: 10px;">vcpkg</a> <a href="/tags/xorm/" style="font-size: 10px;">xorm</a> <a href="/tags/äºŒåˆ†æ³•/" style="font-size: 10px;">äºŒåˆ†æ³•</a> <a href="/tags/äºŒå‰æ ‘/" style="font-size: 15.45px;">äºŒå‰æ ‘</a> <a href="/tags/äºŒç»´ç /" style="font-size: 10px;">äºŒç»´ç </a> <a href="/tags/äº¤å‰ç¼–è¯‘/" style="font-size: 10px;">äº¤å‰ç¼–è¯‘</a> <a href="/tags/äººå·¥æ™ºèƒ½/" style="font-size: 10.91px;">äººå·¥æ™ºèƒ½</a> <a href="/tags/äººç”Ÿæ—¥è®°/" style="font-size: 17.73px;">äººç”Ÿæ—¥è®°</a> <a href="/tags/ä»£ç†æ¨¡å¼/" style="font-size: 10px;">ä»£ç†æ¨¡å¼</a> <a href="/tags/ä½è¿ç®—/" style="font-size: 10.45px;">ä½è¿ç®—</a> <a href="/tags/ä¿¡å·/" style="font-size: 10px;">ä¿¡å·</a> <a href="/tags/ä¿¡æ¯èšåˆ/" style="font-size: 10px;">ä¿¡æ¯èšåˆ</a> <a href="/tags/å†…å­˜ç®¡ç†/" style="font-size: 10.45px;">å†…å­˜ç®¡ç†</a> <a href="/tags/å†…ç½‘ç©¿é€/" style="font-size: 10px;">å†…ç½‘ç©¿é€</a> <a href="/tags/å‡½æ•°å¼æ¥å£/" style="font-size: 10px;">å‡½æ•°å¼æ¥å£</a> <a href="/tags/åˆ†å¸ƒå¼/" style="font-size: 15.91px;">åˆ†å¸ƒå¼</a> <a href="/tags/åŠå…¬/" style="font-size: 10px;">åŠå…¬</a> <a href="/tags/åŠ¨æ€è§„åˆ’/" style="font-size: 11.36px;">åŠ¨æ€è§„åˆ’</a> <a href="/tags/åç¨‹æ± /" style="font-size: 10px;">åç¨‹æ± </a> <a href="/tags/åšå®¢ç®¡ç†/" style="font-size: 13.18px;">åšå®¢ç®¡ç†</a> <a href="/tags/åšå®¢ç¾åŒ–/" style="font-size: 11.82px;">åšå®¢ç¾åŒ–</a> <a href="/tags/åŒæŒ‡é’ˆ/" style="font-size: 10.45px;">åŒæŒ‡é’ˆ</a> <a href="/tags/åå°„/" style="font-size: 12.27px;">åå°„</a> <a href="/tags/å£æ‰/" style="font-size: 10px;">å£æ‰</a> <a href="/tags/å“ˆå¸Œè¡¨/" style="font-size: 10.45px;">å“ˆå¸Œè¡¨</a> <a href="/tags/å›æº¯/" style="font-size: 10.45px;">å›æº¯</a> <a href="/tags/å›æº¯æ³•/" style="font-size: 10px;">å›æº¯æ³•</a> <a href="/tags/å †/" style="font-size: 10.45px;">å †</a> <a href="/tags/å¤šçº¿ç¨‹ä¸‹è½½/" style="font-size: 10.45px;">å¤šçº¿ç¨‹ä¸‹è½½</a> <a href="/tags/å¤§æ•°æ®/" style="font-size: 10px;">å¤§æ•°æ®</a> <a href="/tags/å­—ç¬¦ä¸²/" style="font-size: 13.18px;">å­—ç¬¦ä¸²</a> <a href="/tags/å­—ç¬¦ä¸²å¤„ç†/" style="font-size: 10px;">å­—ç¬¦ä¸²å¤„ç†</a> <a href="/tags/å­¦ä¹ æ¡ˆä¾‹/" style="font-size: 10.45px;">å­¦ä¹ æ¡ˆä¾‹</a> <a href="/tags/å®¹å™¨/" style="font-size: 10px;">å®¹å™¨</a> <a href="/tags/å·¥å…·åˆ†äº«/" style="font-size: 19.09px;">å·¥å…·åˆ†äº«</a> <a href="/tags/å¹¶å‘ç¼–ç¨‹/" style="font-size: 15.45px;">å¹¶å‘ç¼–ç¨‹</a> <a href="/tags/å¹¶è¡Œè®¡ç®—/" style="font-size: 10px;">å¹¶è¡Œè®¡ç®—</a> <a href="/tags/åºåˆ—åŒ–/" style="font-size: 10px;">åºåˆ—åŒ–</a> <a href="/tags/å»ºç­‘/" style="font-size: 10px;">å»ºç­‘</a> <a href="/tags/å¼€å‘è§„èŒƒ/" style="font-size: 10.45px;">å¼€å‘è§„èŒƒ</a> <a href="/tags/å¼€æºåè®®/" style="font-size: 10px;">å¼€æºåè®®</a> <a href="/tags/æ€§èƒ½æŒ‡æ ‡/" style="font-size: 10px;">æ€§èƒ½æŒ‡æ ‡</a> <a href="/tags/æŠ€æœ¯æ‚è°ˆ/" style="font-size: 20px;">æŠ€æœ¯æ‚è°ˆ</a> <a href="/tags/æ’åº/" style="font-size: 11.82px;">æ’åº</a> <a href="/tags/æ¨é€/" style="font-size: 10px;">æ¨é€</a> <a href="/tags/æœç´¢/" style="font-size: 10px;">æœç´¢</a> <a href="/tags/æ“ä½œç³»ç»Ÿ/" style="font-size: 10.91px;">æ“ä½œç³»ç»Ÿ</a> <a href="/tags/æ•™å¸ˆ/" style="font-size: 10.45px;">æ•™å¸ˆ</a> <a href="/tags/æ•™æ¡ˆ/" style="font-size: 10.45px;">æ•™æ¡ˆ</a> <a href="/tags/æ•°å­¦/" style="font-size: 12.73px;">æ•°å­¦</a> <a href="/tags/æ•°æ®åº“/" style="font-size: 15px;">æ•°æ®åº“</a> <a href="/tags/æ•°ç»„/" style="font-size: 13.64px;">æ•°ç»„</a> <a href="/tags/æ–‡å­—éšè—/" style="font-size: 10px;">æ–‡å­—éšè—</a> <a href="/tags/æ–­ç‚¹ç»­ä¼ /" style="font-size: 10px;">æ–­ç‚¹ç»­ä¼ </a> <a href="/tags/æ–°æµªå¾®åš/" style="font-size: 10px;">æ–°æµªå¾®åš</a> <a href="/tags/æ—¥å¿—/" style="font-size: 10px;">æ—¥å¿—</a> <a href="/tags/æ—¥æœ¬èª/" style="font-size: 14.55px;">æ—¥æœ¬èª</a> <a href="/tags/æ—¥è¨˜/" style="font-size: 10.45px;">æ—¥è¨˜</a> <a href="/tags/æœåŠ¡è‡ªå»º/" style="font-size: 10.91px;">æœåŠ¡è‡ªå»º</a> <a href="/tags/æŸ¥æ‰¾/" style="font-size: 10.91px;">æŸ¥æ‰¾</a> <a href="/tags/æ ˆ/" style="font-size: 10.91px;">æ ˆ</a> <a href="/tags/æ­Œè©/" style="font-size: 10px;">æ­Œè©</a> <a href="/tags/æ­£åˆ™è¡¨è¾¾å¼/" style="font-size: 10.91px;">æ­£åˆ™è¡¨è¾¾å¼</a> <a href="/tags/æ±‡ç¼–è¯­è¨€/" style="font-size: 10px;">æ±‡ç¼–è¯­è¨€</a> <a href="/tags/æµ‹è¯•/" style="font-size: 10px;">æµ‹è¯•</a> <a href="/tags/æ»‘çª—/" style="font-size: 10px;">æ»‘çª—</a> <a href="/tags/ç‰ˆæœ¬æ§åˆ¶/" style="font-size: 10px;">ç‰ˆæœ¬æ§åˆ¶</a> <a href="/tags/ç”Ÿæ´»æ€»ç»“/" style="font-size: 10px;">ç”Ÿæ´»æ€»ç»“</a> <a href="/tags/ç¦åˆ©åˆ†äº«/" style="font-size: 10px;">ç¦åˆ©åˆ†äº«</a> <a href="/tags/ç®—æ³•/" style="font-size: 12.73px;">ç®—æ³•</a> <a href="/tags/ç®—æ³•é¢˜ç›®/" style="font-size: 19.55px;">ç®—æ³•é¢˜ç›®</a> <a href="/tags/ç±»åŠ è½½å™¨/" style="font-size: 10.45px;">ç±»åŠ è½½å™¨</a> <a href="/tags/ç´ æ•°/" style="font-size: 10px;">ç´ æ•°</a> <a href="/tags/çº¿æ€§æ¢æµ‹æ³•/" style="font-size: 10px;">çº¿æ€§æ¢æµ‹æ³•</a> <a href="/tags/çº¿ç¨‹æ± /" style="font-size: 10.91px;">çº¿ç¨‹æ± </a> <a href="/tags/ç¼–è¯‘ä¼˜åŒ–/" style="font-size: 10px;">ç¼–è¯‘ä¼˜åŒ–</a> <a href="/tags/ç¼–è¯‘å™¨/" style="font-size: 10px;">ç¼–è¯‘å™¨</a> <a href="/tags/ç½‘ç›˜/" style="font-size: 10px;">ç½‘ç›˜</a> <a href="/tags/ç½‘ç»œçº¿è·¯/" style="font-size: 10px;">ç½‘ç»œçº¿è·¯</a> <a href="/tags/ç¿»è¨³/" style="font-size: 10.45px;">ç¿»è¨³</a> <a href="/tags/è‡ªå¯åŠ¨/" style="font-size: 10px;">è‡ªå¯åŠ¨</a> <a href="/tags/è’™ç‰¹å¡ç½—æ–¹æ³•/" style="font-size: 10px;">è’™ç‰¹å¡ç½—æ–¹æ³•</a> <a href="/tags/è™šæ‹Ÿæœº/" style="font-size: 10.45px;">è™šæ‹Ÿæœº</a> <a href="/tags/è¡—æ™¯/" style="font-size: 10px;">è¡—æ™¯</a> <a href="/tags/è£…é¥°å™¨æ¨¡å¼/" style="font-size: 10px;">è£…é¥°å™¨æ¨¡å¼</a> <a href="/tags/è®¡ç®—æœºç½‘ç»œ/" style="font-size: 10px;">è®¡ç®—æœºç½‘ç»œ</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 10px;">è®¾è®¡æ¨¡å¼</a> <a href="/tags/è¯¾ç¨‹/" style="font-size: 10px;">è¯¾ç¨‹</a> <a href="/tags/è´Ÿè½½å‡è¡¡/" style="font-size: 12.27px;">è´Ÿè½½å‡è¡¡</a> <a href="/tags/è´ªå¿ƒ/" style="font-size: 10px;">è´ªå¿ƒ</a> <a href="/tags/è·³è·³è›™æ—¥è¯­è¯»åº“/" style="font-size: 10.45px;">è·³è·³è›™æ—¥è¯­è¯»åº“</a> <a href="/tags/è½¯ä»¶å®‰è£…ä¸é…ç½®/" style="font-size: 17.27px;">è½¯ä»¶å®‰è£…ä¸é…ç½®</a> <a href="/tags/è½¯ä»¶æ¨è/" style="font-size: 15px;">è½¯ä»¶æ¨è</a> <a href="/tags/è½¯ä»¶æµ‹è¯•/" style="font-size: 10.45px;">è½¯ä»¶æµ‹è¯•</a> <a href="/tags/è½¯è€ƒ/" style="font-size: 10px;">è½¯è€ƒ</a> <a href="/tags/è¿›åº¦æ¡/" style="font-size: 10.45px;">è¿›åº¦æ¡</a> <a href="/tags/è¿›ç¨‹é€šä¿¡/" style="font-size: 10px;">è¿›ç¨‹é€šä¿¡</a> <a href="/tags/é€†å‘å·¥ç¨‹/" style="font-size: 10px;">é€†å‘å·¥ç¨‹</a> <a href="/tags/é€’å½’/" style="font-size: 10.45px;">é€’å½’</a> <a href="/tags/é‡å®šå‘/" style="font-size: 10px;">é‡å®šå‘</a> <a href="/tags/é‡è£…ç³»ç»Ÿ/" style="font-size: 10px;">é‡è£…ç³»ç»Ÿ</a> <a href="/tags/é“¾è¡¨/" style="font-size: 13.64px;">é“¾è¡¨</a> <a href="/tags/é˜Ÿåˆ—/" style="font-size: 10px;">é˜Ÿåˆ—</a> <a href="/tags/éšæœºå›¾ç‰‡/" style="font-size: 10px;">éšæœºå›¾ç‰‡</a> <a href="/tags/é›†åˆ/" style="font-size: 14.09px;">é›†åˆ</a> <a href="/tags/é›¶å®½å­—ç¬¦/" style="font-size: 10px;">é›¶å®½å­—ç¬¦</a> <a href="/tags/é™æ€ä»£ç†/" style="font-size: 10px;">é™æ€ä»£ç†</a> <a href="/tags/é¢è¯•æ€»ç»“/" style="font-size: 15px;">é¢è¯•æ€»ç»“</a> <a href="/tags/é¡¹ç›®æ€»ç»“/" style="font-size: 10.91px;">é¡¹ç›®æ€»ç»“</a> <a href="/tags/é¡¹ç›®æ„å»º/" style="font-size: 10.91px;">é¡¹ç›®æ„å»º</a> <a href="/tags/é¡¹ç›®éƒ¨ç½²/" style="font-size: 11.36px;">é¡¹ç›®éƒ¨ç½²</a> <a href="/tags/é»‘è‹¹æœ/" style="font-size: 10px;">é»‘è‹¹æœ</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æ–‡ç« åˆ†ç±»</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ACM/">ACM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Android/">Android</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/C/">C++</a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/CUDA/">CUDA</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Chromeæ‰©å±•/">Chromeæ‰©å±•</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ClickHouse/">ClickHouse</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/">Docker</a>
          <span class="category-list-count">25</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Dolt/">Dolt</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Dubbo/">Dubbo</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Electron/">Electron</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Git/">Git</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Github/">Github</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Golang/">Golang</a>
          <span class="category-list-count">31</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/GraalVM/">GraalVM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/IOåŸºç¡€/">IOåŸºç¡€</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Java/">Java</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Javaæºç /">Javaæºç </a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JuiceFS/">JuiceFS</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a>
          <span class="category-list-count">12</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Life/">Life</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Linux/">Linux</a>
          <span class="category-list-count">16</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Maven/">Maven</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MongoDB/">MongoDB</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MySQL/">MySQL</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/">Mybatis</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/NPM/">NPM</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Netty/">Netty</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Nginx/">Nginx</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Node-js/">Node.js</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/PostgreSQL/">PostgreSQL</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Protobuf/">Protobuf</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Python/">Python</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redash/">Redash</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Docker/Redis/">Redis</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Ruby/">Ruby</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Rust/">Rust</a>
          <span class="category-list-count">35</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Spring/">Spring</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TOML/">TOML</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TypeScript/">TypeScript</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Websocket/">Websocket</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/äººå·¥æ™ºèƒ½/">äººå·¥æ™ºèƒ½</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/äººç”Ÿæ—¥è®°/">äººç”Ÿæ—¥è®°</a>
          <span class="category-list-count">27</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åˆ†å¸ƒå¼/">åˆ†å¸ƒå¼</a>
          <span class="category-list-count">10</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åŠå…¬/">åŠå…¬</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/åšå®¢ç®¡ç†/">åšå®¢ç®¡ç†</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/æŠ€æœ¯æ‚è°ˆ/å­¦ä¹ æ¡ˆä¾‹/">å­¦ä¹ æ¡ˆä¾‹</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/å·¥å…·åˆ†äº«/">å·¥å…·åˆ†äº«</a>
          <span class="category-list-count">41</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/å¹¶å‘ç¼–ç¨‹/">å¹¶å‘ç¼–ç¨‹</a>
          <span class="category-list-count">13</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Mybatis/æŠ€æœ¯æ‚è°ˆ/">æŠ€æœ¯æ‚è°ˆ</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ•™å¸ˆ/">æ•™å¸ˆ</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ•°æ®åº“/">æ•°æ®åº“</a>
          <span class="category-list-count">8</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ—¥æœ¬èª/">æ—¥æœ¬èª</a>
          <span class="category-list-count">11</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æœåŠ¡è‡ªå»º/">æœåŠ¡è‡ªå»º</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/æ±‡ç¼–è¯­è¨€/">æ±‡ç¼–è¯­è¨€</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ç®—æ³•/">ç®—æ³•</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/ç®—æ³•é¢˜ç›®/">ç®—æ³•é¢˜ç›®</a>
          <span class="category-list-count">60</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è¯¾ç¨‹/">è¯¾ç¨‹</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redis/è½¯ä»¶å®‰è£…ä¸é…ç½®/">è½¯ä»¶å®‰è£…ä¸é…ç½®</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è½¯ä»¶æµ‹è¯•/">è½¯ä»¶æµ‹è¯•</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/è½¯è€ƒ/">è½¯è€ƒ</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/é¢è¯•æ€»ç»“/">é¢è¯•æ€»ç»“</a>
          <span class="category-list-count">15</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/é¡¹ç›®æ€»ç»“/">é¡¹ç›®æ€»ç»“</a>
          <span class="category-list-count">3</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/2026/02/10/å†è§2025ï¼Œä½ å¥½2026ï¼/">å†è§2025ï¼Œä½ å¥½2026ï¼</a>
          </li>
        
          <li>
            <a href="/2025/08/20/ä¸‹ä¸€ä»£æç¤ºè¯å·¥ç¨‹è¯­è¨€POMLç®€æ˜æ•™ç¨‹/">ä¸‹ä¸€ä»£æç¤ºè¯å·¥ç¨‹è¯­è¨€POMLç®€æ˜æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2025/07/30/å¼€äº†ä¸€ä¸ªæ–°çš„ä¸“é—¨å­¦ä¹ æ—¥è¯­çš„åšå®¢/">å¼€äº†ä¸€ä¸ªæ–°çš„ä¸“é—¨å­¦ä¹ æ—¥è¯­çš„åšå®¢</a>
          </li>
        
          <li>
            <a href="/2025/07/29/ä¸€ã€å¹¶è¡Œç¼–ç¨‹å¯¼è®ºä¸CUDAå…¥é—¨/">ä¸€ã€å¹¶è¡Œç¼–ç¨‹å¯¼è®ºä¸CUDAå…¥é—¨</a>
          </li>
        
          <li>
            <a href="/2025/07/24/ä¸€äº›å…è´¹çš„GPUèµ„æº/">ä¸€äº›å…è´¹çš„GPUèµ„æº</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
    <div class="nexmoe-copyright">
        <span style="color:#707070;font-size: 14px;">
            æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ <br>
            æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡ <br>
        </span>
        <span id="showsectime" style="color:#707070;font-size: 14px;">
            æœ¬ç«™å·²è¿è¡Œ0å¤©0å°æ—¶0åˆ†0ç§’
        </span>
        <i class="fa fa-heart throb" style="color:#d43f57">â¤</i><br>

        &copy; 2026 Jasonkay
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>

    <div id="footer-info">

    </div>

    <script type="text/javascript">
        function NewDate(str) {
            str = str.split('-');
            var date = new Date();
            date.setUTCFullYear(str[0], str[1] - 1, str[2]);
            date.setUTCHours(0, 0, 0, 0);
            return date;
        }
        function showsectime() {
            var birthDay = NewDate("2019-09-01");
            var today = new Date();
            var timeold = today.getTime() - birthDay.getTime();
            var sectimeold = timeold / 1000
            var secondsold = Math.floor(sectimeold);
            var msPerDay = 24 * 60 * 60 * 1000; var e_daysold = timeold / msPerDay;
            var daysold = Math.floor(e_daysold);
            var e_hrsold = (daysold - e_daysold) * -24;
            var hrsold = Math.floor(e_hrsold);
            var e_minsold = (hrsold - e_hrsold) * -60;
            var minsold = Math.floor((hrsold - e_hrsold) * -60); var seconds = Math.floor((minsold - e_minsold) * -60).toString();
            document.getElementById("showsectime").innerHTML = "æœ¬ç«™å·²è¿è¡Œ" + daysold + "å¤©" + hrsold + "å°æ—¶" + minsold + "åˆ†" + seconds + "ç§’";
            setTimeout(showsectime, 1000);
        }
        showsectime();
    </script>

</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
      <div class="nexmoe-post">
  <div class="nexmoe-post-cover">
    
    <img src="https://img.paulzzh.com/touhou/random?3">
    
    <h1>Redisé¢è¯•ç›¸å…³é—®é¢˜</h1>
  </div>
  <div class="nexmoe-post-meta">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020å¹´02æœˆ05æ—¥</a>
    <a><i class="nexmoefont icon-areachart"></i>15.8k å­—</a>
    <a><i class="nexmoefont icon-areachart"></i><span class="archive-article-date">é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>
      </span></a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 72 åˆ†é’Ÿ</a>

    
    <a class="nexmoefont icon-appstore-fill -link" href="/categories/Redis/">Redis</a>
    
    
    <a class="nexmoefont icon-tag-fill -link" href="/tags/Javaé¢è¯•/">Javaé¢è¯•</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/Redis/">Redis</a>
    
  </div>
  <article>
    
    <div id="toc" class="toc-article">
      <ul class="markdownIt-TOC">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#RedisåŠŸèƒ½-ä½¿ç”¨åœºæ™¯"><span class="toc-text">RedisåŠŸèƒ½, ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisæ“ä½œ"><span class="toc-text">Redisæ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisæ•°æ®ç»“æ„"><span class="toc-text">Redisæ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„"><span class="toc-text">Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisè®¾è®¡"><span class="toc-text">Redisè®¾è®¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisçš„hotkey"><span class="toc-text">Redisçš„hotkey</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisäº‹åŠ¡"><span class="toc-text">Redisäº‹åŠ¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisè®¢é˜…å‘å¸ƒ"><span class="toc-text">Redisè®¢é˜…å‘å¸ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rediså®ç°åˆ†å¸ƒå¼é”"><span class="toc-text">Rediså®ç°åˆ†å¸ƒå¼é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rediså®ç°åˆ†å¸ƒå¼Session"><span class="toc-text">Rediså®ç°åˆ†å¸ƒå¼Session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rediså®ç°SSO"><span class="toc-text">Rediså®ç°SSO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RedisæŒä¹…åŒ–"><span class="toc-text">RedisæŒä¹…åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisæ¶æ„æ¨¡å¼"><span class="toc-text">Redisæ¶æ„æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redisé›†ç¾¤-å¦‚ä½•ä¿è¯åŒæ­¥â€¦"><span class="toc-text">Redisé›†ç¾¤(å¦‚ä½•ä¿è¯åŒæ­¥â€¦)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¼“å­˜ç®—æ³•-LRUç­‰"><span class="toc-text">ç¼“å­˜ç®—æ³•(LRUç­‰)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ"><span class="toc-text">ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…"><span class="toc-text">ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é™„å½•"><span class="toc-text">é™„å½•</span></a></li></ol>
      </ul>
    </div>
    
    <p>æœ¬ç¯‡æ€»ç»“äº†Redisåœ¨é¢è¯•ä¸­ç»å¸¸ç¢°åˆ°çš„ä¸€äº›é—®é¢˜, ä»¥åŠåœ¨é¡¹ç›®å¼€å‘ä¸­Rediså¸¸è§çš„é—®é¢˜, ä¸»è¦åŒ…æ‹¬:</p>
<ul>
<li>RedisåŠŸèƒ½, ä½¿ç”¨åœºæ™¯(ç¼“å­˜, åˆ†å¸ƒå¼äº‹åŠ¡â€¦)</li>
<li>Redisæ“ä½œ</li>
<li>Redisæ•°æ®ç»“æ„</li>
<li>Redisè®¾è®¡(å‰ç¼€, åç§°ç­‰)</li>
<li>Redisçš„hotkey</li>
<li>Redisäº‹åŠ¡</li>
<li>Rediså®ç°åˆ†å¸ƒå¼é”</li>
<li>RedisæŒä¹…åŒ–</li>
<li>Redisæ¶æ„æ¨¡å¼(ä¸€ä¸»ä¸€ä»[Master-Slave], Redisé›†ç¾¤[Redis-Cluster], å“¨å…µæ¨¡å¼[Redis-Sentinel])</li>
<li>Redisé›†ç¾¤(å¦‚ä½•ä¿è¯åŒæ­¥â€¦)</li>
<li>ç¼“å­˜ç®—æ³•(LRUç­‰)</li>
<li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…?</li>
<li>â€¦â€¦</li>
</ul>
<br>

<a id="more"></a>

<h3 id="RedisåŠŸèƒ½-ä½¿ç”¨åœºæ™¯"><a href="#RedisåŠŸèƒ½-ä½¿ç”¨åœºæ™¯" class="headerlink" title="RedisåŠŸèƒ½, ä½¿ç”¨åœºæ™¯"></a>RedisåŠŸèƒ½, ä½¿ç”¨åœºæ™¯</h3><p><strong>â‘  è¯´æ˜</strong></p>
<p>keyâ€”valueå‹æ•°æ®åº“ï¼Œæ”¯æŒ:</p>
<ul>
<li>string</li>
<li>list</li>
<li>set</li>
<li>zset</li>
<li>hash</li>
</ul>
<p>å¯¹è¿™äº›æ•°æ®çš„<strong>æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼ŒRedisä¸ºäº†ä¿è¯æ•ˆç‡ä¼šå®šæœŸæŒä¹…åŒ–æ•°æ®</strong></p>
<p>ç«¯å£ï¼š6379</p>
<p><strong>é»˜è®¤16ä¸ªæ•°æ®åº“ï¼Œä¸‹æ ‡ä»0å¼€å§‹</strong></p>
<p><strong>å•çº¿ç¨‹ï¼šredisæ˜¯å•çº¿ç¨‹+ioå¤šè·¯å¤ç”¨ï¼šæ£€æŸ¥æ–‡ä»¶æè¿°çš„å°±ç»ªçŠ¶æ€</strong></p>
<p><strong>â‘¡ RedisåŠŸèƒ½</strong></p>
<ul>
<li>è§£å†³åº”ç”¨æœåŠ¡å™¨çš„cpuå’Œå†…å­˜å‹åŠ›</li>
<li>å‡å°‘ioçš„è¯»æ“ä½œï¼Œå‡è½»ioçš„å‹åŠ›</li>
<li>å…³ç³»å‹æ•°æ®åº“çš„æ‰©å±•æ€§ä¸å¼ºï¼Œéš¾ä»¥æ”¹å˜è¡¨ç»“æ„</li>
</ul>
<p><strong>â‘¢ ä½¿ç”¨åœºæ™¯</strong></p>
<ul>
<li><strong>æ•°æ®é«˜å¹¶å‘çš„è¯»å†™</strong></li>
<li><strong>æµ·é‡æ•°æ®çš„è¯»å†™</strong></li>
<li><strong>å¯¹æ‰©å±•æ€§è¦æ±‚é«˜çš„æ•°æ®</strong></li>
</ul>
<blockquote>
<br>

<p><strong>ä¾‹å¦‚:</strong></p>
<ul>
<li>ç¼“å­˜ä¼šè¯ï¼ˆå•ç‚¹ç™»å½•ï¼‰</li>
<li>åˆ†å¸ƒå¼é”ï¼Œæ¯”å¦‚ï¼šä½¿ç”¨setnx</li>
<li>å„ç§æ’è¡Œæ¦œæˆ–è®¡æ•°å™¨</li>
<li>å•†å“åˆ—è¡¨æˆ–ç”¨æˆ·åŸºç¡€æ•°æ®åˆ—è¡¨ç­‰</li>
<li>ä½¿ç”¨listä½œä¸ºæ¶ˆæ¯å¯¹åˆ—</li>
<li>ç§’æ€ï¼Œåº“å­˜æ‰£å‡ç­‰</li>
</ul>
<p><strong>å„æ•°æ®ç»“æ„çš„åº”ç”¨åœºæ™¯:</strong></p>
<ul>
<li><p><strong>String:</strong> </p>
<p>ä¾‹å¦‚: </p>
<ul>
<li>å¯ä»¥ç›´æ¥ç”¨ä½œè®¡æ•°å™¨</li>
<li>ç»Ÿè®¡åœ¨çº¿äººæ•°</li>
<li>å¦å¤–<strong>Stringç±»å‹æ˜¯äºŒè¿›åˆ¶å­˜å‚¨å®‰å…¨çš„</strong>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥å­˜å‚¨å›¾ç‰‡ï¼Œç”šè‡³æ˜¯è§†é¢‘ç­‰</li>
</ul>
</li>
<li><p><strong>Hash:</strong></p>
<p>å­˜æ”¾é”®å€¼å¯¹</p>
<ul>
<li><p>ä¸€èˆ¬å¯ä»¥ç”¨æ¥å­˜æŸä¸ªå¯¹è±¡çš„åŸºæœ¬å±æ€§ä¿¡æ¯: ä¾‹å¦‚ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œå•†å“ä¿¡æ¯ç­‰;</p>
</li>
<li><p>å¦å¤–ï¼Œç”±äºhashçš„å¤§å°åœ¨å°äºé…ç½®çš„å¤§å°çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ziplistç»“æ„ï¼Œæ¯”è¾ƒèŠ‚çº¦å†…å­˜ï¼Œæ‰€ä»¥é’ˆå¯¹å¤§é‡çš„æ•°æ®å­˜å‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨hashæ¥åˆ†æ®µå­˜å‚¨æ¥è¾¾åˆ°å‹ç¼©æ•°æ®é‡ï¼ŒèŠ‚çº¦å†…å­˜çš„ç›®çš„; ä¾‹å¦‚ï¼Œå¯¹äºå¤§æ‰¹é‡çš„å•†å“å¯¹åº”çš„å›¾ç‰‡åœ°å€åç§°: </p>
<p>æ¯”å¦‚ï¼šå•†å“ç¼–ç å›ºå®šæ˜¯10ä½ï¼Œå¯ä»¥é€‰å–å‰7ä½åšä¸ºhashçš„key,åä¸‰ä½ä½œä¸ºfieldï¼Œå›¾ç‰‡åœ°å€ä½œä¸ºvalueã€‚è¿™æ ·æ¯ä¸ªhashè¡¨éƒ½ä¸è¶…è¿‡999ä¸ªï¼Œåªè¦æŠŠredis.confä¸­çš„hash-max-ziplist-entriesæ”¹ä¸º1024å³å¯</p>
</li>
</ul>
</li>
<li><p><strong>List:</strong></p>
<p>åˆ—è¡¨ç±»å‹</p>
<ul>
<li>å¯ä»¥ç”¨äºå®ç°æ¶ˆæ¯é˜Ÿåˆ—;</li>
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæä¾›çš„rangeå‘½ä»¤ï¼Œåšåˆ†é¡µæŸ¥è¯¢åŠŸèƒ½</li>
</ul>
</li>
<li><p><strong>Set:</strong></p>
<p>é›†åˆï¼Œæ•´æ•°çš„æœ‰åºåˆ—è¡¨å¯ä»¥ç›´æ¥ä½¿ç”¨set</p>
<ul>
<li>å¯ä»¥ç”¨ä½œæŸäº›å»é‡åŠŸèƒ½ï¼Œä¾‹å¦‚ç”¨æˆ·åä¸èƒ½é‡å¤ç­‰</li>
<li>è¿˜å¯ä»¥å¯¹é›†åˆè¿›è¡Œäº¤é›†ï¼Œå¹¶é›†æ“ä½œï¼Œæ¥æŸ¥æ‰¾æŸäº›å…ƒç´ çš„å…±åŒç‚¹</li>
</ul>
</li>
<li><p><strong>ZSet:</strong></p>
<p>æœ‰åºé›†åˆ</p>
<ul>
<li>ä½¿ç”¨èŒƒå›´æŸ¥æ‰¾</li>
<li>æ’è¡Œæ¦œåŠŸèƒ½</li>
<li>topNåŠŸèƒ½</li>
</ul>
</li>
</ul>
</blockquote>
<p><strong>â‘£ ä¸é€‚åœºæ™¯</strong></p>
<ul>
<li>éœ€è¦äº‹åŠ¡æ”¯æŒï¼ˆéå…³ç³»å‹æ•°æ®åº“ï¼‰[Redisä¹Ÿæ”¯æŒäº‹åŠ¡â€¦]</li>
<li>ç»“æ„åŒ–æŸ¥è¯¢å‚¨å­˜ï¼Œå…³ç³»å¤æ‚</li>
</ul>
<br>

<h3 id="Redisæ“ä½œ"><a href="#Redisæ“ä½œ" class="headerlink" title="Redisæ“ä½œ"></a>Redisæ“ä½œ</h3><p><strong>Redisæä¾›çš„å‘½ä»¤</strong></p>
<ul>
<li>redis-benchmarkï¼šæ€§èƒ½æµ‹è¯•å·¥å…·</li>
<li>redis-serverï¼šå¯åŠ¨redisæœåŠ¡å™¨</li>
<li>redis-cliï¼šå¯åŠ¨rediså®¢æˆ·ç«¯ï¼Œæ“ä½œå…¥å£</li>
</ul>
<p><strong>å‘½ä»¤</strong></p>
<p><strong>â‘  Keyæ“ä½œ</strong></p>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>keys *</code></td>
<td>æŸ¥çœ‹å½“å‰åº“æ‰€æœ‰çš„é”®</td>
<td>ä¸æ¨è<br><br>åœ¨æ•°æ®é‡å·¨å¤§æ—¶ä¼šå¯¼è‡´å¡æ­»</td>
</tr>
<tr>
<td><code>exists &lt;key&gt;</code></td>
<td>åˆ¤æ–­æ˜¯å¦å­˜åœ¨key</td>
<td></td>
</tr>
<tr>
<td><code>del &lt;key&gt;</code></td>
<td>åˆ é™¤æŸä¸ªé”®</td>
<td></td>
</tr>
<tr>
<td><code>expire &lt;key&gt; &lt;second&gt;</code></td>
<td>è®¾ç½®é”®è¿‡æœŸæ—¶é—´ å•ä½æ˜¯sç§’</td>
<td></td>
</tr>
<tr>
<td><code>ttl &lt;key&gt;</code></td>
<td>æŸ¥çœ‹è¿˜æœ‰å¤šå°‘ç§’è¿‡æœŸ<br><br>-1è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ<br><br>-2è¡¨ç¤ºå·²ç»è¿‡æœŸ</td>
<td></td>
</tr>
<tr>
<td><code>move &lt;key&gt; &lt;db&gt;</code></td>
<td>æŠŠé”®ç§»åˆ°å¦ä¸€ä¸ªåº“ä¸‹</td>
<td></td>
</tr>
<tr>
<td><code>dbsize</code></td>
<td>æŸ¥çœ‹æ•°æ®åº“keyçš„æ•°é‡</td>
<td></td>
</tr>
<tr>
<td><code>flushdb</code></td>
<td>æ¸…ç©ºå½“å‰åº“</td>
<td></td>
</tr>
<tr>
<td><code>flushall</code></td>
<td>é€šæ€æ‰€æœ‰åº“</td>
<td></td>
</tr>
</tbody></table>
<p><strong>â‘¡ Stringç±»å‹</strong></p>
<p>Stringæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œå¯ä»¥åŒ…å«ä»»ä½•æ•°æ®æºï¼Œæœ€å¤§512Mb</p>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>get &lt;key&gt;</code></td>
<td>æŸ¥çœ‹å¯¹åº”çš„é”®å€¼</td>
<td></td>
</tr>
<tr>
<td><code>set &lt;key&gt; &lt;value&gt;</code></td>
<td>æ·»åŠ é”®å€¼å¯¹</td>
<td></td>
</tr>
<tr>
<td><code>append &lt;key&gt; &lt;value&gt;</code></td>
<td>å°†ç»™å®šçš„valueè¿½åŠ åˆ°åŸå€¼çš„æœ«å°¾</td>
<td></td>
</tr>
<tr>
<td><code>strlen &lt; key &gt;</code></td>
<td>è·å–å€¼å¾—é•¿åº¦</td>
<td></td>
</tr>
<tr>
<td><code>setnx &lt;key&gt; &lt;value&gt;</code></td>
<td>å½“keyä¸å­˜åœ¨çš„æ—¶å€™è®¾ç½®keyå€¼</td>
<td></td>
</tr>
<tr>
<td><code>incr &lt;key&gt;</code></td>
<td>å°†keyä¸­å‚¨å­˜çš„æ•°å­—åŠ 1ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™å€¼ä¸º1</td>
<td></td>
</tr>
<tr>
<td><code>decr &lt;key&gt;</code></td>
<td>å°†keyä¸­å‚¨å­˜çš„æ•°å­—å‡1ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™å€¼ä¸º-1</td>
<td></td>
</tr>
<tr>
<td><code>incrby/decrby &lt;key&gt; &lt;step&gt;</code></td>
<td>å°†keyä¸­çš„æ•°å­—å¢å‡step</td>
<td></td>
</tr>
</tbody></table>
<p><strong>Stringæ‰¹é‡å¤„ç†:</strong></p>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>mset &lt;key1&gt; &lt;value1&gt; &lt;key2&gt; &lt;value2&gt;</code></td>
<td>åŒæ—¶è®¾ç½®å¤šä¸ªé”®å€¼å¯¹</td>
<td></td>
</tr>
<tr>
<td><code>mget &lt;key1&gt; &lt;key 2&gt;</code></td>
<td>åŒæ—¶è·å¾—å¤šä¸ªå€¼</td>
<td></td>
</tr>
<tr>
<td><code>msetnx &lt;key1&gt; &lt;value1&gt; &lt;key2&gt; &lt;value2&gt;</code></td>
<td>å½“ç»™å®šçš„keyéƒ½ä¸å­˜åœ¨æ—¶è®¾ç½®</td>
<td></td>
</tr>
<tr>
<td><code>getrange &lt;key&gt; &lt;start&gt; &lt;stop&gt;</code></td>
<td>ç±»ä¼¼substring</td>
<td></td>
</tr>
<tr>
<td><code>setrange &lt;key&gt; &lt;start&gt; &lt;stop&gt;</code></td>
<td>ç±»ä¼¼substringè¦†ç›–åŸå§‹å€¼</td>
<td></td>
</tr>
<tr>
<td><code>setex &lt;key&gt; &lt;è¿‡æœŸæ—¶é—´&gt; &lt;value&gt;</code></td>
<td>è®¾ç½®é”®å€¼çš„åŒæ—¶ï¼Œç»™å®šè¿‡æœŸæ—¶é—´</td>
<td></td>
</tr>
<tr>
<td><code>getset &lt;key&gt; &lt;value&gt;</code></td>
<td>ä»¥æ—§æ¢æ–°ï¼Œè®¾ç½®äº†æ–°çš„å€¼åŒæ—¶å¾—åˆ°æ—§å€¼</td>
<td></td>
</tr>
</tbody></table>
<p><strong>â‘¡ Listé“¾è¡¨</strong></p>
<ul>
<li>ç‰¹ç‚¹:<ul>
<li><strong>å•é”®å¤šå€¼</strong></li>
<li>Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œä»å·¦æˆ–è€…ä»å³æ’å…¥</li>
<li><strong>åº•å±‚æ˜¯åŒå‘é“¾è¡¨ï¼Œå¯¹ä¸¤ç«¯çš„æ“ä½œæ€§èƒ½å¾ˆé«˜ï¼Œé€šè¿‡ä¸‹æ ‡æŸ¥è¯¢æ€§èƒ½å¾ˆä½</strong></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>lpush/rpush &lt;key&gt; &lt;value1&gt; &lt;value2&gt; â€¦</code></td>
<td>ä»å·¦æˆ–ä»å³æ’å…¥å¤šä¸ªå€¼</td>
<td></td>
</tr>
<tr>
<td><code>lpop/rpop &lt;key&gt;</code></td>
<td>ä»å·¦è¾¹æˆ–å³è¾¹åå‡ºä¸€ä¸ªå€¼ï¼Œ<strong>å€¼å…‰é”®äº¡</strong></td>
<td></td>
</tr>
<tr>
<td><code>rpoplpush &lt;key1&gt; &lt;key2&gt;</code></td>
<td>ä»key1 å³è¾¹åå‡ºä¸€ä¸ªå€¼åˆ°key2çš„å·¦è¾¹</td>
<td></td>
</tr>
<tr>
<td><code>lrange &lt;key&gt; &lt;index&gt;</code></td>
<td>æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å–å…ƒç´  ä»å·¦åˆ°å³</td>
<td></td>
</tr>
<tr>
<td><code>lindex &lt;key&gt; &lt;index&gt;</code></td>
<td>æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å–å…ƒç´  ä»å·¦åˆ°å³</td>
<td></td>
</tr>
<tr>
<td><code>llen &lt;key&gt;</code></td>
<td>è·å–åˆ—è¡¨é•¿åº¦</td>
<td></td>
</tr>
<tr>
<td>`linsert <key> before</key></td>
<td>after <value> <newvalue>`</newvalue></value></td>
<td>åœ¨keyä¸­valueå‰/åæ’å…¥newvalue</td>
</tr>
</tbody></table>
<p><strong>â‘¢ Set</strong></p>
<p>ç±»ä¼¼listçš„æ— åºé›†åˆï¼Œä¿è¯åˆ—è¡¨ä¸­ä¸ä¼šæœ‰é‡å¤æ•°æ®ï¼Œ<strong>åº•å±‚æ˜¯ä¸€ä¸ªvalueä¸ºnullçš„hashè¡¨</strong></p>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>sadd &lt;key&gt; &lt;value1&gt; &lt;value2&gt;</code></td>
<td>å°†å¤šä¸ªå…ƒç´ åŠ å…¥åˆ°keyä¸­ï¼Œé‡å¤å€¼å¿½ç•¥</td>
<td></td>
</tr>
<tr>
<td><code>smembers &lt;key&gt;</code></td>
<td>å–å‡ºè¯¥é›†åˆçš„æ‰€æœ‰å€¼</td>
<td></td>
</tr>
<tr>
<td><code>sismember &lt;key&gt; &lt;value&gt;</code></td>
<td>åˆ¤æ–­é›†åˆkeyä¸­æ˜¯å¦æœ‰è¯¥valueå€¼</td>
<td>æœ‰å°±1 æ²¡æœ‰0</td>
</tr>
<tr>
<td><code>scard &lt;key&gt;</code></td>
<td>è¿”å›è¯¥é›†åˆçš„å…ƒç´ ä¸ªæ•°</td>
<td></td>
</tr>
<tr>
<td><code>srem &lt;key&gt; &lt;value1&gt; &lt;value2&gt;</code></td>
<td>åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ </td>
<td></td>
</tr>
<tr>
<td><code>spop &lt;key&gt;</code></td>
<td>éšæœºåå‡ºè¯¥é›†åˆä¸€ä¸ªå€¼</td>
<td></td>
</tr>
<tr>
<td><code>srandmember &lt;key&gt; &lt;n&gt;</code></td>
<td>éšæœºä»é›†åˆä¸­å–å‡ºnä¸ªå€¼ï¼Œä¸ä¼šä»é›†åˆä¸­åˆ é™¤</td>
<td></td>
</tr>
<tr>
<td><code>smove &lt;key1&gt; &lt;key2&gt; &lt;value&gt;</code></td>
<td>å°†key1ä¸­çš„value ç§»åŠ¨åˆ°key2 ä¸­</td>
<td></td>
</tr>
<tr>
<td><code>sinter &lt;key1&gt; &lt;key2&gt;</code></td>
<td>è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†å…ƒç´ </td>
<td></td>
</tr>
<tr>
<td><code>sunion &lt;key1&gt; &lt;key2&gt;</code></td>
<td>è¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</td>
<td></td>
</tr>
</tbody></table>
<p><strong>â‘£ Hash</strong></p>
<p>é”®å€¼å¯¹é›†åˆï¼Œç±»ä¼¼map &lt;String, Object&gt;</p>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>hset &lt;key&gt; &lt;filed&gt; &lt;value&gt;</code></td>
<td>ç»™keyé›†åˆä¸­çš„fieldé”®èµ‹å€¼value</td>
<td></td>
</tr>
<tr>
<td><code>hget &lt;key1&gt; &lt;field&gt;</code></td>
<td>ä»key1é›†åˆfieldé”®ä¸­å–å‡ºvalue</td>
<td></td>
</tr>
<tr>
<td><code>hmset &lt;key1&gt; &lt;field1&gt; &lt;value1&gt; &lt;field2&gt; &lt;value2&gt;</code></td>
<td>æ‰¹é‡è®¾ç½®hashçš„å€¼</td>
<td></td>
</tr>
<tr>
<td><code>hexists &lt;key&gt; &lt;field&gt;</code></td>
<td>æŸ¥çœ‹keyä¸­çš„field æ˜¯å¦å­˜åœ¨</td>
<td></td>
</tr>
<tr>
<td><code>hkeys &lt;key&gt;</code></td>
<td>åˆ—å‡ºkeyä¸­æ‰€æœ‰çš„filed</td>
<td></td>
</tr>
<tr>
<td><code>hvals &lt;key&gt;</code></td>
<td>åˆ—å‡ºè¯¥hashé›†åˆä¸­æ‰€æœ‰çš„value</td>
<td></td>
</tr>
</tbody></table>
<p><strong>â‘¤ zset</strong></p>
<p>ä¸seté›†åˆéå¸¸ç›¸ä¼¼ï¼Œ<strong>ä½†æ˜¯æ¯ä¸ªæˆå‘˜éƒ½å…³è”äº†scoreï¼Œå¯ä»¥ç”¨æ¥æ’åº</strong></p>
<table>
<thead>
<tr>
<th><strong>å‘½ä»¤</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>zadd&lt;key&gt;&lt;score1&gt;&lt;member1&gt;&lt;score2&gt;&lt;member2&gt;</code></td>
<td>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ä»¥åŠscoreåŠ å…¥zset</td>
<td></td>
</tr>
<tr>
<td><code>zrange&lt;key&gt;&lt;start&gt;&lt;stop&gt; withscore</code></td>
<td>è¿”å›ä¸‹æ ‡åœ¨åŒºé—´å†…çš„é›†åˆï¼Œå¸¦æœ‰score</td>
<td></td>
</tr>
<tr>
<td><code>zrangebylex &lt;key&gt; &lt;min&gt; &lt;max&gt; [limit offset count]</code></td>
<td>é€šè¿‡å­—å…¸åŒºé—´è¿”å›æœ‰åºé›†åˆçš„æˆå‘˜</td>
<td></td>
</tr>
<tr>
<td><code>zrangebyscore &lt;key&gt; &lt;min&gt; &lt;max&gt;[withscore] [limit offset count]</code></td>
<td>è¿”å›keyä¸­ scoreä»‹äºminå’Œmaxä¸­çš„æˆå‘˜ï¼Œå‡åºæ’åˆ—</td>
<td></td>
</tr>
<tr>
<td><code>zrevrangerbyscore &lt;key&gt; &lt;min&gt; &lt;max&gt; [withscore] [limit offset count]</code></td>
<td>é™åº</td>
<td></td>
</tr>
<tr>
<td><code>zincrby &lt;key&gt; &lt;increment&gt; &lt;member&gt;</code></td>
<td>åœ¨keyé›†åˆä¸­çš„valueä¸Šå¢åŠ increment</td>
<td></td>
</tr>
<tr>
<td><code>zrem &lt;key&gt; &lt;member&gt;</code></td>
<td>åˆ é™¤keyé›†åˆä¸‹çš„æŒ‡å®šå…ƒç´ </td>
<td></td>
</tr>
<tr>
<td><code>zcount &lt;key&gt; &lt;min&gt;&lt;member&gt;</code></td>
<td>è®¡ç®—åœ¨æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´åˆ†æ•°çš„æˆå‘˜æ•°</td>
<td></td>
</tr>
<tr>
<td><code>zcord &lt;key&gt;</code></td>
<td>è·å–é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°</td>
<td></td>
</tr>
<tr>
<td><code>zrank &lt;key&gt;&lt;member&gt;</code></td>
<td>æŸ¥è¯¢valueåœ¨keyä¸­çš„æ’åï¼Œä»0å¼€å§‹</td>
<td></td>
</tr>
<tr>
<td><code>zlexcount &lt;key&gt; &lt;min&gt; &lt;max&gt;</code></td>
<td>è®¡ç®—æœ‰åºé›†åˆä¸­æŒ‡å®šå­—å…¸åŒºé—´å†…æˆå‘˜æ•°é‡</td>
<td></td>
</tr>
</tbody></table>
<br>

<h3 id="Redisæ•°æ®ç»“æ„"><a href="#Redisæ•°æ®ç»“æ„" class="headerlink" title="Redisæ•°æ®ç»“æ„"></a>Redisæ•°æ®ç»“æ„</h3><p><strong>â‘  å­—ç¬¦ä¸²</strong></p>
<p>redisè®¾è®¡äº†ä¸€ç§ç®€å•åŠ¨æ€å­—ç¬¦ä¸²(SDS[Simple Dynamic String])ä½œä¸ºåº•å±‚å®ç°:</p>
<blockquote>
<br>

<p><strong>è¯´æ˜: redisæ˜¯ä½¿ç”¨Cè¯­è¨€å¼€å‘ï¼Œä½†Cä¸­å¹¶æ²¡æœ‰å­—ç¬¦ä¸²ç±»å‹ï¼Œåªèƒ½ä½¿ç”¨æŒ‡é’ˆæˆ–ç¬¦æ•°ç»„çš„å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²</strong></p>
</blockquote>
<p>å®šä¹‰SDSå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸­åŒ…å«ä¸‰ä¸ªå±æ€§ï¼š</p>
<ul>
<li>len: bufä¸­å·²ç»å æœ‰çš„é•¿åº¦(è¡¨ç¤ºæ­¤å­—ç¬¦ä¸²çš„å®é™…é•¿åº¦)</li>
<li>free: bufä¸­æœªä½¿ç”¨çš„ç¼“å†²åŒºé•¿åº¦</li>
<li>buf[]: å®é™…ä¿å­˜å­—ç¬¦ä¸²æ•°æ®çš„åœ°æ–¹</li>
</ul>
<blockquote>
<br>

<p><strong>è¯´æ˜:</strong></p>
<ul>
<li><strong>å–å­—ç¬¦ä¸²çš„é•¿åº¦çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</strong></li>
<li>buf[]ä¸­ä¾ç„¶é‡‡ç”¨äº†Cè¯­è¨€çš„ä»¥\0ç»“å°¾, æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨Cè¯­è¨€çš„éƒ¨åˆ†æ ‡å‡†Cå­—ç¬¦ä¸²åº“å‡½æ•°</li>
</ul>
<p><strong>ç©ºé—´åˆ†é…åŸåˆ™:</strong> </p>
<p><font color="#f00"><strong>å½“lenå°äº1MBï¼ˆ1024*1024ï¼‰æ—¶å¢åŠ å­—ç¬¦ä¸²åˆ†é…ç©ºé—´å¤§å°ä¸ºåŸæ¥çš„2å€ï¼Œå½“lenå¤§äºç­‰äº1Mæ—¶æ¯æ¬¡åˆ†é… é¢å¤–å¤šåˆ†é…1Mçš„ç©ºé—´</strong></font></p>
</blockquote>
<p>ç”±æ­¤å¯ä»¥å¾—å‡ºä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>Redisä¸ºå­—ç¬¦åˆ†é…ç©ºé—´çš„æ¬¡æ•°æ˜¯å°äºç­‰äºå­—ç¬¦ä¸²çš„é•¿åº¦Nï¼Œè€ŒåŸCè¯­è¨€ä¸­çš„åˆ†é…åŸåˆ™å¿…ä¸ºN, é™ä½äº†åˆ†é…æ¬¡æ•°æé«˜äº†è¿½åŠ é€Ÿåº¦ï¼Œä»£ä»·å°±æ˜¯å¤šå ç”¨ä¸€äº›å†…å­˜ç©ºé—´ï¼Œä¸”è¿™äº›ç©ºé—´ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾</li>
<li><strong>äºŒè¿›åˆ¶å®‰å…¨</strong></li>
<li><strong>é«˜æ•ˆçš„è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦(æ—¶é—´å¤æ‚åº¦ä¸ºO(1))</strong></li>
<li><strong>é«˜æ•ˆçš„è¿½åŠ å­—ç¬¦ä¸²æ“ä½œ</strong></li>
</ul>
<blockquote>
<br>

<p><strong>è¡¥å……: äºŒè¿›åˆ¶å®‰å…¨</strong></p>
<p><font color="#f00"><strong>ä¸€ä¸ªäºŒè¿›åˆ¶å®‰å…¨å‡½æ•°ï¼Œå…¶æœ¬è´¨ä¸Šå°†æ“ä½œè¾“å…¥ä½œä¸ºåŸå§‹çš„ã€æ— ä»»ä½•ç‰¹æ®Šæ ¼å¼æ„ä¹‰çš„æ•°æ®æµã€‚å¯¹äºæ¯ä¸ªå­—ç¬¦éƒ½å…¬å¹³å¯¹å¾…ï¼Œä¸ç‰¹æ®Šå¤„ç†æŸä¸€ä¸ªå­—ç¬¦</strong></font></p>
<p>å¤§å¤šæ•°çš„å‡½æ•°å½“å…¶ä½¿ç”¨ä»»ä½•ç‰¹åˆ«çš„æˆ–æ ‡è®°å­—ç¬¦ï¼Œå¦‚è½¬ä¹‰ç ï¼Œé‚£äº›æœŸæœ› null ç»“å°¾çš„å­—ç¬¦ä¸²ï¼ˆå¦‚Cè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²ï¼‰ï¼Œä¸æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ã€‚ä¸€ä¸ªå¯èƒ½çš„ä¾‹å¤–æ˜¯è¯¥å‡½æ•°çš„æ˜ç¡®çš„ç›®çš„æ˜¯åœ¨æŸäºŒè¿›åˆ¶å­—ç¬¦ä¸²æœç´¢æŸç‰¹å®šå­—ç¬¦</p>
<p>è€Œåœ¨å¤„ç†æœªçŸ¥æ ¼å¼çš„æ•°æ®ï¼ˆå°½ç®¡æ­¤æ ¼å¼æ— éœ€ä¿å­˜ï¼‰ï¼Œä¾‹å¦‚éšæ„çš„æ–‡ä»¶ã€åŠ å¯†æ•°æ®åŠç±»ä¼¼æƒ…å†µæ—¶ï¼ŒäºŒè¿›åˆ¶å®‰å…¨åŠŸèƒ½æ˜¯å¿…é¡»çš„ã€‚å‡½æ•°å¿…é¡»çŸ¥é“æ•°æ®é•¿åº¦ï¼Œä»¥ä¾¿å‡½æ•°æ“ä½œæ•´ä½“æ•°æ®</p>
<p><strong>ä¾‹å¦‚:</strong></p>
<p>Cè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ˜¯æ ¹æ®ç‰¹æ®Šå­—ç¬¦<code>\0</code>æ¥åˆ¤æ–­è¯¥å­—ç¬¦ä¸²æ˜¯å¦ç»“æŸï¼Œå¯¹äºå­—ç¬¦ä¸²str=â€0123456789\0123456789â€æ¥è¯´ï¼Œåœ¨Cè¯­è¨€é‡Œé¢strçš„é•¿åº¦å°±æ˜¯10ï¼ˆstrlen(str)=10ï¼‰ï¼Œæ‰€ä»¥strlen()å‡½æ•°ä¸æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„</p>
<p>è€Œåœ¨Redisä¸­ï¼Œstrlen strçš„ç»“æœæ˜¯21ï¼Œæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼ˆRedisåº•å±‚æ‰€ä½¿ç”¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ˜¯SDSï¼‰ï¼Œå®ƒåªå…³å¿ƒäºŒè¿›åˆ¶åŒ–çš„å­—ç¬¦ä¸²ï¼Œä¸å…³å¿ƒå­—ç¬¦ä¸²çš„å…·ä½“æ ¼å¼ï¼Œé‡Œé¢æœ‰å•¥å­—ç¬¦ï¼Œåªä¼šä¸¥æ ¼çš„æŒ‰ç…§äºŒè¿›åˆ¶çš„æ•°æ®å­˜å–ï¼Œä¸ä¼šä»¥æŸç§ç‰¹æ®Šæ ¼å¼è§£æå­—ç¬¦ä¸²</p>
</blockquote>
<p><strong>â‘¡ åˆ—è¡¨(List)</strong></p>
<p>ä¸€ä¸ªåˆ—è¡¨ç»“æ„å¯ä»¥æœ‰åºåœ°å­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²ï¼Œæ‹¥æœ‰ä¾‹å¦‚ï¼šlpush lpop rpush rpopç­‰ç­‰æ“ä½œå‘½ä»¤</p>
<p>åœ¨3.2ç‰ˆæœ¬ä¹‹å‰ï¼Œåˆ—è¡¨æ˜¯<strong>ä½¿ç”¨<code>ziplist</code>å’Œ<code>linkedlist</code>å®ç°çš„</strong>ï¼Œåœ¨è¿™äº›è€ç‰ˆæœ¬ä¸­ï¼Œå½“åˆ—è¡¨å¯¹è±¡åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œåˆ—è¡¨å¯¹è±¡ä½¿ç”¨ziplistç¼–ç ï¼š</p>
<ul>
<li>åˆ—è¡¨å¯¹è±¡ä¿å­˜çš„æ‰€æœ‰å­—ç¬¦ä¸²å…ƒç´ çš„é•¿åº¦éƒ½å°äº64å­—èŠ‚</li>
<li>åˆ—è¡¨å¯¹è±¡ä¿å­˜çš„å…ƒç´ æ•°é‡å°äº512ä¸ª</li>
</ul>
<p>å½“æœ‰ä»»ä¸€æ¡ä»¶ä¸æ»¡è¶³æ—¶å°†ä¼šè¿›è¡Œä¸€æ¬¡è½¬ç ï¼Œä½¿ç”¨linkedlist</p>
<p>è€Œåœ¨3.2ç‰ˆæœ¬ä¹‹åï¼Œé‡æ–°<strong>å¼•å…¥äº†ä¸€ä¸ª<code>quicklist</code>çš„æ•°æ®ç»“æ„ï¼Œåˆ—è¡¨çš„åº•å±‚éƒ½æ˜¯ç”±quicklistå®ç°çš„ï¼Œå®ƒç»“åˆäº†ziplistå’Œlinkedlistçš„ä¼˜ç‚¹</strong></p>
<p>æŒ‰ç…§åŸæ–‡çš„è§£é‡Šè¿™ç§æ•°æ®ç»“æ„æ˜¯<code>A doubly linked list of ziplists</code>, å³ä¸€ä¸ªç”±ziplistç»„æˆçš„åŒå‘é“¾è¡¨</p>
<p><strong>ziplistçš„ç»“æ„</strong></p>
<p>ç”±è¡¨å¤´å’ŒNä¸ªentryèŠ‚ç‚¹å’Œå‹ç¼©åˆ—è¡¨å°¾éƒ¨æ ‡è¯†ç¬¦zlendç»„æˆçš„ä¸€ä¸ªè¿ç»­çš„å†…å­˜å—, ç„¶åé€šè¿‡ä¸€ç³»åˆ—çš„ç¼–ç è§„åˆ™ï¼Œæé«˜å†…å­˜çš„åˆ©ç”¨ç‡ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ•´æ•°å’Œæ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²</p>
<p>å¯ä»¥çœ‹å‡ºåœ¨æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¯¹å†…å­˜è¿›è¡Œä¸€æ¬¡æ‰©å±•æˆ–ç¼©å‡ï¼Œè¿˜è¦è¿›è¡Œéƒ¨åˆ†æ•°æ®çš„ç§»åŠ¨æ“ä½œï¼Œè¿™æ ·ä¼šé€ æˆæ›´æ–°æ•ˆç‡ä½ä¸‹çš„æƒ…å†µ</p>
<p>è¿™ç¯‡æ–‡ç« å¯¹ziplistçš„ç»“æ„è®²çš„è¿˜æ˜¯æ¯”è¾ƒè¯¦ç»†çš„ï¼š</p>
<p><a href="https://blog.csdn.net/yellowriver007/article/details/79021049" target="_blank" rel="noopener">https://blog.csdn.net/yellowriver007/article/details/79021049</a></p>
<hr>
<p><strong>linkedlistçš„ç»“æ„</strong></p>
<p>ä¸ºä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå’Œæ™®é€šçš„é“¾è¡¨å®šä¹‰ç›¸åŒï¼Œæ¯ä¸ªentryåŒ…å«å‘å‰å‘åçš„æŒ‡é’ˆï¼Œå½“æ’å…¥æˆ–åˆ é™¤å…ƒç´ çš„æ—¶å€™ï¼Œåªéœ€è¦å¯¹æ­¤å…ƒç´ å‰åæŒ‡é’ˆæ“ä½œå³å¯, æ‰€ä»¥æ’å…¥å’Œåˆ é™¤æ•ˆç‡å¾ˆé«˜, ä½†æŸ¥è¯¢çš„æ•ˆç‡å´æ˜¯O(n)[nä¸ºå…ƒç´ çš„ä¸ªæ•°]</p>
<hr>
<p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸Šé¢è¯´çš„ziplistç»„æˆçš„åŒå‘é“¾è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å®é™…ä¸Šï¼Œå®ƒæ•´ä½“å®è§‚ä¸Šå°±æ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œåªä¸è¿‡<strong>æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä»¥å‹ç¼©åˆ—è¡¨ziplistçš„ç»“æ„ä¿å­˜ç€æ•°æ®ï¼Œè€Œæ¯ä¸ªzipliståˆå¯ä»¥åŒ…å«å¤šä¸ªentry</strong>, ä¹Ÿå¯ä»¥è¯´ä¸€ä¸ªquicklistèŠ‚ç‚¹ä¿å­˜çš„æ˜¯ä¸€ç‰‡æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°æ®</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>æ•´ä½“ä¸Šquicklistå°±æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ç»“æ„ï¼Œå’Œæ™®é€šçš„é“¾è¡¨æ“ä½œä¸€æ ·ï¼Œæ’å…¥åˆ é™¤æ•ˆç‡å¾ˆé«˜ï¼Œä½†æŸ¥è¯¢çš„æ•ˆç‡å´æ˜¯O(n), ä¸è¿‡ï¼Œè¿™æ ·çš„é“¾è¡¨è®¿é—®ä¸¤ç«¯çš„å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦å´æ˜¯O(1), æ‰€ä»¥ï¼Œå¯¹listçš„æ“ä½œå¤šæ•°éƒ½æ˜¯pollå’Œpush</li>
<li>æ¯ä¸ªquicklistèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªziplistï¼Œå…·å¤‡å‹ç¼©åˆ—è¡¨çš„ç‰¹æ€§</li>
</ul>
<p>åœ¨redis.confé…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°å¯ä»¥ä¼˜åŒ–åˆ—è¡¨ï¼š</p>
<ul>
<li>list-max-ziplist-size: è¡¨ç¤ºæ¯ä¸ªquicklistNodeçš„å­—èŠ‚å¤§å°, é»˜è®¤ä¸º-2 è¡¨ç¤º8KB</li>
<li>list-compress-depth: è¡¨ç¤ºquicklistNodeèŠ‚ç‚¹æ˜¯å¦è¦å‹ç¼©, é»˜è®¤æ˜¯0 è¡¨ç¤ºä¸å‹ç¼©</li>
</ul>
<p><strong>â‘¢ å“ˆå¸Œ(hash)</strong></p>
<p>Redisçš„æ•£åˆ—å¯ä»¥å­˜å‚¨å¤šä¸ªk-vå¯¹ä¹‹é—´çš„æ˜ å°„ï¼Œæ•£åˆ—å­˜å‚¨çš„å€¼æ—¢å¯ä»¥æ˜¯å­—ç¬¦ä¸²åˆå¯ä»¥æ˜¯æ•°å­—å€¼ï¼Œå¹¶ä¸”ç”¨æˆ·åŒæ ·å¯ä»¥å¯¹æ•£åˆ—å­˜å‚¨çš„æ•°å­—å€¼æ‰§è¡Œè‡ªå¢æ“ä½œæˆ–è€…è‡ªå‡æ“ä½œ</p>
<p>æ•£åˆ—å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ–‡æ¡£æˆ–å…³ç³»æ•°æ®åº“é‡Œçš„ä¸€è¡Œ, Hashåº•å±‚çš„æ•°æ®ç»“æ„å®ç°æœ‰ä¸¤ç§:</p>
<ul>
<li>ä¸€ç§æ˜¯ziplistï¼Œä¸Šé¢å·²ç»æåˆ°è¿‡;</li>
<li>å¦ä¸€ç§å°±æ˜¯HashTable, è¿™ç§ç»“æ„çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—æ¯”è¾ƒå¤šçš„å†…å­˜ç©ºé—´;</li>
</ul>
<p>å½“å­˜å‚¨çš„æ•°æ®è¶…è¿‡é…ç½®çš„é˜€å€¼æ—¶è½¬ç”¨HashTableçš„ç»“æ„: è¿™ç§è½¬æ¢æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ï¼Œæ‰€ä»¥åº”è¯¥å°½é‡é¿å…è¿™ç§è½¬æ¢æ“ä½œã€‚åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ—¶æ‰ä¼šä½¿ç”¨è¿™ç§ç»“æ„:</p>
<ul>
<li><strong>å½“é”®çš„ä¸ªæ•°å°äºhash-max-ziplist-entriesï¼ˆé»˜è®¤512ï¼‰</strong></li>
<li><strong>å½“æ‰€æœ‰å€¼éƒ½å°äºhash-max-ziplist-valueï¼ˆé»˜è®¤64ï¼‰</strong></li>
</ul>
<hr>
<p><strong>â‘£ é›†åˆ(Set)</strong></p>
<p>Redisçš„é›†åˆå’Œåˆ—è¡¨éƒ½å¯ä»¥å­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒä»¬ä¹‹é—´çš„ä¸åŒåœ¨äº: <strong>åˆ—è¡¨å¯ä»¥å­˜å‚¨å¤šä¸ªç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œè€Œé›†åˆåˆ™é€šè¿‡ä½¿ç”¨æ•£åˆ—è¡¨ï¼ˆHashTableï¼‰æ¥ä¿è¯è‡ªå·²å­˜å‚¨çš„æ¯ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯å„ä¸ç›¸åŒçš„(è¿™äº›æ•£åˆ—è¡¨åªæœ‰é”®ï¼Œä½†æ²¡æœ‰ä¸é”®ç›¸å…³è”çš„å€¼)ï¼Œredisä¸­çš„é›†åˆæ˜¯æ— åºçš„</strong></p>
<p>è¿˜å­˜åœ¨å¦ä¸€ç§é›†åˆï¼Œé‚£å°±æ˜¯IntSetï¼Œå®ƒæ˜¯ç”¨äºå­˜å‚¨æ•´æ•°çš„æœ‰åºé›†åˆï¼Œé‡Œé¢å­˜æ”¾åŒä¸€ç±»å‹çš„æ•´æ•°, å…±æœ‰ä¸‰ç§æ•´æ•°:</p>
<ul>
<li>int16_t</li>
<li>int32_t</li>
<li>int64_t</li>
</ul>
<p>æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ï¼Œä½†æ˜¯æ’å…¥çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šæ¶‰åŠåˆ°å‡çº§ï¼ˆæ¯”å¦‚ï¼šåŸæ¥æ˜¯int16_tçš„é›†åˆï¼Œå½“æ’å…¥int32_tçš„æ•´æ•°çš„æ—¶å€™å°±ä¼šä¸ºæ¯ä¸ªå…ƒç´ å‡çº§ä¸ºint32_tï¼‰<strong>è¿™æ—¶å€™ä¼šå¯¹å†…å­˜é‡æ–°åˆ†é…ï¼Œæ‰€ä»¥æ­¤æ—¶çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(N)çº§åˆ«çš„äº†</strong></p>
<p><strong>æ³¨æ„ï¼šintsetåªæ”¯æŒå‡çº§ä¸æ”¯æŒé™çº§æ“ä½œ</strong></p>
<p>IntSetåœ¨redis.confä¸­ä¹Ÿæœ‰ä¸€ä¸ªé…ç½®å‚æ•°:</p>
<ul>
<li>set-max-intset-entries: é»˜è®¤å€¼ä¸º512, è¡¨ç¤ºå¦‚æœentryçš„ä¸ªæ•°å°äºæ­¤å€¼ï¼Œåˆ™å¯ä»¥ç¼–ç æˆREDIS_ENCODING_INTSETç±»å‹å­˜å‚¨ï¼ŒèŠ‚çº¦å†…å­˜, å¦åˆ™é‡‡ç”¨dictçš„å½¢å¼å­˜å‚¨</li>
</ul>
<hr>
<p><strong>â‘¤ æœ‰åºé›†åˆ(zset)</strong></p>
<p>æœ‰åºé›†åˆå’Œæ•£åˆ—ä¸€æ ·ï¼Œéƒ½ç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼š<strong>æœ‰åºé›†åˆçš„é”®è¢«ç§°ä¸ºæˆå‘˜ï¼ˆmember), æ¯ä¸ªæˆå‘˜éƒ½æ˜¯å„ä¸ç›¸åŒçš„</strong></p>
<p>æœ‰åºé›†åˆçš„å€¼åˆ™è¢«ç§°ä¸º<strong>åˆ†å€¼ï¼ˆscoreï¼‰ï¼Œåˆ†å€¼å¿…é¡»ä¸ºæµ®ç‚¹æ•°</strong></p>
<p>æœ‰åºé›†åˆæ˜¯redisé‡Œé¢å”¯ä¸€ä¸€ä¸ª<strong>æ—¢å¯ä»¥æ ¹æ®æˆå‘˜è®¿é—®å…ƒç´ (è¿™ä¸€ç‚¹å’Œæ•£åˆ—ä¸€æ ·),åˆå¯ä»¥æ ¹æ®åˆ†å€¼ä»¥åŠåˆ†å€¼çš„æ’åˆ—é¡ºåºè®¿é—®å…ƒç´ çš„ç»“æ„</strong></p>
<p>å®ƒçš„å­˜å‚¨æ–¹å¼ä¹Ÿæœ‰ä¸¤ç§:</p>
<p><strong>ziplistç»“æ„</strong></p>
<p>ä¸ä¸Šé¢çš„hashä¸­çš„ziplistç±»ä¼¼ï¼Œmemberå’Œscore<strong>é¡ºåºå­˜æ”¾å¹¶æŒ‰scoreçš„é¡ºåºæ’åˆ—</strong></p>
<p><strong>skiplistä¸dictçš„ç»“åˆ</strong></p>
<p>skiplistæ˜¯ä¸€ç§è·³è·ƒè¡¨ç»“æ„ï¼Œç”¨äºæœ‰åºé›†åˆä¸­å¿«é€ŸæŸ¥æ‰¾ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å®ƒçš„æ•ˆç‡ä¸å¹³è¡¡æ ‘å·®ä¸å¤šï¼Œä½†æ¯”å¹³è¡¡æ ‘å®ç°ç®€å•</p>
<p>rediså¯¹æ™®é€šçš„è·³è·ƒè¡¨è¿›è¡Œäº†ä¿®æ”¹ï¼ŒåŒ…æ‹¬æ·»åŠ span\tail\backwardæŒ‡é’ˆã€scoreçš„å€¼å¯é‡å¤è¿™äº›è®¾è®¡ï¼Œä»è€Œå®ç°æ’åºåŠŸèƒ½å’Œåå‘éå†çš„åŠŸèƒ½</p>
<blockquote>
<br>

<p><strong>ä¸€èˆ¬è·³è·ƒè¡¨</strong></p>
<p><strong>â‘  å®ç°</strong></p>
<p>ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>è¡¨å¤´ï¼ˆheadï¼‰ï¼š</strong>æŒ‡å‘å¤´èŠ‚ç‚¹</li>
<li><strong>è¡¨å°¾ï¼ˆtailï¼‰ï¼š</strong>æŒ‡å‘å°¾èŠ‚ç‚¹</li>
<li><strong>èŠ‚ç‚¹ï¼ˆnodeï¼‰ï¼š</strong>å®é™…ä¿å­˜çš„å…ƒç´ èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šå±‚ï¼Œå±‚æ•°æ˜¯åœ¨åˆ›å»ºæ­¤èŠ‚ç‚¹çš„æ—¶å€™éšæœºç”Ÿæˆçš„ä¸€ä¸ªæ•°å€¼ï¼Œè€Œä¸”æ¯ä¸€å±‚éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘åé¢æŸä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</li>
<li><strong>å±‚ï¼ˆlevelï¼‰ï¼š</strong>ç›®å‰è¡¨å†…èŠ‚ç‚¹çš„æœ€å¤§å±‚æ•°</li>
<li><strong>é•¿åº¦ï¼ˆlengthï¼‰ï¼š</strong>èŠ‚ç‚¹çš„æ•°é‡</li>
</ul>
<p><strong>â‘¡ éå†</strong></p>
<p>è·³è·ƒè¡¨çš„éå†æ€»æ˜¯ä»é«˜å±‚å¼€å§‹ï¼Œç„¶åéšç€å…ƒç´ å€¼èŒƒå›´çš„ç¼©å°ï¼Œæ…¢æ…¢é™ä½åˆ°ä½å±‚</p>
<br>

<p>è·³è·ƒè¡¨çš„å®ç°åŸç†å¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/Acceptedxukai/article/details/17333673" target="_blank" rel="noopener">https://blog.csdn.net/Acceptedxukai/article/details/17333673</a></p>
</blockquote>
<p>å‰é¢ä¹Ÿè¯´äº†ï¼Œæœ‰åºåˆ—è¡¨æ˜¯ä½¿ç”¨skiplistå’Œdictç»“åˆå®ç°çš„:</p>
<ul>
<li>skiplistç”¨æ¥ä¿éšœæœ‰åºæ€§å’Œè®¿é—®æŸ¥æ‰¾æ€§èƒ½</li>
<li>dictå°±ç”¨æ¥å­˜å‚¨å…ƒç´ ä¿¡æ¯ï¼Œå¹¶ä¸”dictçš„è®¿é—®æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</li>
</ul>
<br>

<h3 id="Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„"><a href="#Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„" class="headerlink" title="Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„"></a>Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„</h3><p>é™¤äº†Stringï¼ŒHashï¼ŒListï¼ŒSetï¼ŒZSetï¼ŒRedisè¿˜æœ‰3ä¸ªé«˜çº§æ•°æ®ç»“æ„:</p>
<ul>
<li>Bitmaps</li>
<li>Hyperloglogs</li>
<li>GEO</li>
</ul>
<p><strong>â‘  BitMaps</strong></p>
<p><font color="#f00"><strong>bitmapsä¸æ˜¯ä¸€ä¸ªçœŸå®çš„æ•°æ®ç»“æ„, è€Œæ˜¯Stringç±»å‹ä¸Šçš„ä¸€ç»„é¢å‘bitæ“ä½œçš„é›†åˆ</strong></font></p>
<p>ç”±äºstringæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„blobï¼Œå¹¶ä¸”å®ƒä»¬çš„æœ€å¤§é•¿åº¦æ˜¯512Mbï¼Œæ‰€ä»¥bitmapsèƒ½æœ€å¤§è®¾ç½®2^32ä¸ªä¸åŒçš„bit</p>
<p>bitæ“ä½œè¢«åˆ†ä¸ºä¸¤ç»„:</p>
<ul>
<li>æ’å®šçš„å•ä¸ªbitæ“ä½œï¼Œä¾‹å¦‚æŠŠæŸä¸ªbitè®¾ç½®ä¸º0æˆ–è€…1, æˆ–è€…è·å–æŸbitçš„å€¼</li>
<li>å¯¹ä¸€ç»„bitçš„æ“ä½œã€‚ä¾‹å¦‚ç»™å®šèŒƒå›´å†…bitç»Ÿè®¡ï¼ˆä¾‹å¦‚äººå£ç»Ÿè®¡ï¼‰</li>
</ul>
<p>Bitmapsçš„æœ€å¤§ä¼˜ç‚¹å°±æ˜¯å­˜å‚¨ä¿¡æ¯æ—¶å¯ä»¥èŠ‚çœå¤§é‡çš„ç©ºé—´, ä¾‹å¦‚:</p>
<p>åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œä¸åŒçš„ç”¨æˆ·è¢«ä¸€ä¸ªå¢é•¿çš„ç”¨æˆ·IDè¡¨ç¤º, 40äº¿ï¼ˆ2^32=4 * 1024 *1024 * 1024 â‰ˆ 40äº¿ï¼‰ç”¨æˆ·åªéœ€è¦512Må†…å­˜å°±èƒ½è®°ä½æŸç§ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·æ˜¯å¦ç™»å½•è¿‡</p>
<p>Bitsè®¾ç½®å’Œè·å–é€šè¿‡SETBIT å’ŒGETBIT å‘½ä»¤ï¼Œç”¨æ³•å¦‚ä¸‹:</p>
<pre><code class="mysql">SETBIT key offset value
GETBIT key offset</code></pre>
<p>ä½¿ç”¨å®ä¾‹ï¼š</p>
<pre><code class="mysql">127.0.0.1:6380&gt; setbit dupcheck 10 1
(integer) 0
127.0.0.1:6380&gt; getbit dupcheck 10 
(integer) 1</code></pre>
<ul>
<li>SETBITå‘½ä»¤: ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ç¼–å·ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿™ä¸ªä½çš„å€¼ï¼Œåªèƒ½æ˜¯0æˆ–è€…1, å¦‚æœbitåœ°å€è¶…è¿‡å½“å‰stringé•¿åº¦ï¼Œä¼šè‡ªåŠ¨å¢å¤§string</li>
</ul>
<blockquote>
<br>

<p><strong>è¡¥å……: Bitmapsç¤ºæ„å›¾</strong></p>
<p>åˆå§‹åŒ–ä¸€ä¸ªBitMaps, é•¿åº¦ä¸º6</p>
<table>
<thead>
<tr>
<th><strong>bit</strong></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody><tr>
<td><strong>value</strong></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody></table>
<p>å¯¹offsetä¸º2å’Œ4çš„ä½ç½®è®¾ç½®ä¸º1</p>
<table>
<thead>
<tr>
<th><strong>bit</strong></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody><tr>
<td><strong>value</strong></td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
</tbody></table>
<p>å¯¹offsetä¸º10çš„ä½ç½®è®¾ä¸º1<strong>(éœ€è¦æ‰©å®¹[è‡ªåŠ¨])</strong></p>
<table>
<thead>
<tr>
<th><strong>bit</strong></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>
<tbody><tr>
<td><strong>value</strong></td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>
</blockquote>
<ul>
<li>GETBITå‘½ä»¤: æŒ‡ç¤ºè¿”å›æŒ‡å®šä½ç½®bitçš„å€¼, <strong>è¶…è¿‡èŒƒå›´ï¼ˆå¯»å€åœ°å€åœ¨ç›®æ ‡keyçš„stringé•¿åº¦ä»¥å¤–çš„ä½ï¼‰çš„GETBITæ€»æ˜¯è¿”å›0</strong></li>
</ul>
<br>

<p>ä¸‰ä¸ªæ“ä½œbitsç»„çš„å‘½ä»¤å¦‚ä¸‹:</p>
<ul>
<li><strong>BITOP:</strong> æ‰§è¡Œä¸¤ä¸ªä¸åŒstringçš„ä½æ“ä½œï¼ŒåŒ…æ‹¬ANDï¼ŒORï¼ŒXORå’ŒNOT</li>
<li><strong>BITCOUNT:</strong> ç»Ÿè®¡ä½çš„å€¼ä¸º1çš„æ•°é‡</li>
<li><strong>BITPOS:</strong> å¯»å€ç¬¬ä¸€ä¸ªä¸º0æˆ–è€…1çš„bitçš„ä½ç½®<ul>
<li>å¯»å€ç¬¬ä¸€ä¸ªä¸º1çš„bitçš„ä½ç½®ï¼šbitpos dupcheck 1</li>
<li>å¯»å€ç¬¬ä¸€ä¸ªä¸º0çš„bitçš„ä½ç½®ï¼šbitpos dupcheck 0</li>
</ul>
</li>
</ul>
<br>

<p>bitmapsä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å„ç§å®æ—¶åˆ†æ</li>
<li>å­˜å‚¨ä¸å¯¹è±¡IDå…³è”çš„èŠ‚çœç©ºé—´å¹¶ä¸”é«˜æ€§èƒ½çš„å¸ƒå°”ä¿¡æ¯</li>
</ul>
<blockquote>
<br>

<p><strong>ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹:</strong></p>
<p>ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹ä½ æƒ³çŸ¥é“è®¿é—®ä½ çš„ç½‘ç«™çš„ç”¨æˆ·çš„æœ€é•¿è¿ç»­æ—¶é—´</p>
<p>ä½ å¼€å§‹è®¡ç®—ä»0å¼€å§‹çš„å¤©æ•°ï¼Œå°±æ˜¯ä½ çš„ç½‘ç«™å…¬å¼€çš„é‚£å¤©ï¼Œæ¯æ¬¡ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶é€šè¿‡SETBITå‘½ä»¤è®¾ç½®bitä¸º1ï¼Œå¯ä»¥ç®€å•çš„ç”¨å½“å‰æ—¶é—´å‡å»åˆå§‹æ—¶é—´å¹¶é™¤ä»¥3600*24ï¼ˆç»“æœå°±æ˜¯ä½ çš„ç½‘ç«™å…¬å¼€çš„ç¬¬å‡ å¤©ï¼‰å½“åšè¿™ä¸ªbitçš„ä½ç½®</p>
<p>è¿™ç§æ–¹æ³•å¯¹äºæ¯ä¸ªç”¨æˆ·ï¼Œéƒ½æœ‰å­˜å‚¨æ¯å¤©çš„è®¿é—®ä¿¡æ¯çš„ä¸€ä¸ªå¾ˆå°çš„stringå­—ç¬¦ä¸², é€šè¿‡BITCOUNå°±èƒ½è½»æ˜“ç»Ÿè®¡æŸä¸ªç”¨æˆ·è¿ç»­è®¿é—®ç½‘ç«™çš„å¤©æ•°</p>
<p>å¦å¤–é€šè¿‡è°ƒç”¨BITPOSå‘½ä»¤ï¼Œæˆ–è€…å®¢æˆ·ç«¯è·å–å¹¶åˆ†æè¿™ä¸ªbitmapï¼Œå°±èƒ½è®¡ç®—å‡ºæœ€é•¿åœç•™æ—¶é—´</p>
<p><strong>æ¯”å¦‚Githubä¸Šé¢æ¯æ¬¡æäº¤å°±å‡ºç°ä¸€ä¸ªcontributionsçš„ç»Ÿè®¡å°æ–¹å—(ä¸ç¡®å®šæ˜¯å¦ä½¿ç”¨Rediså®ç°, ä½†æ˜¯å¯ä»¥ä½¿ç”¨)</strong></p>
</blockquote>
<hr>
<p><strong>â‘¡ HyperLogLogs</strong></p>
<p>HyperLogLogæ˜¯<strong>ç”¨äºè®¡ç®—å”¯ä¸€äº‹ç‰©çš„æ¦‚ç‡æ•°æ®ç»“æ„ï¼ˆè¢«ç§°ä¸ºä¼°è®¡é›†åˆçš„åŸºæ•°ï¼‰</strong></p>
<p>å¦‚æœç»Ÿè®¡å”¯ä¸€é¡¹ï¼Œé¡¹ç›®è¶Šå¤šï¼Œéœ€è¦çš„å†…å­˜å°±è¶Šå¤š, å› ä¸ºéœ€è¦è®°ä½è¿‡å»å·²ç»çœ‹è¿‡çš„é¡¹ï¼Œä»è€Œé¿å…å¤šæ¬¡ç»Ÿè®¡è¿™äº›é¡¹; ç„¶è€Œï¼Œæœ‰ä¸€ç»„ç®—æ³•å¯ä»¥äº¤æ¢å†…å­˜ä»¥è·å¾—ç²¾ç¡®åº¦ï¼šåœ¨redisçš„å®ç°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†é”™è¯¯å°äº1ï¼…çš„ä¼°è®¡åº¦é‡ç»“æŸ</p>
<p>è¿™ä¸ªç®—æ³•çš„ç¥å¥‡åœ¨äº: <strong>ä¸å†éœ€è¦ä¸éœ€è¦ç»Ÿè®¡çš„é¡¹ç›¸å¯¹åº”çš„å†…å­˜ï¼Œå–è€Œä»£ä¹‹ï¼Œä½¿ç”¨çš„å†…å­˜ä¸€ç›´æ’å®šä¸å˜</strong>, æœ€åçš„æƒ…å†µä¸‹åªéœ€è¦12kï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘2^64ä¸ªä¸åŒå…ƒç´ çš„åŸºæ•°; å¦‚æœHyperLogLogï¼ˆç®€ç§°ä¸ºHLLï¼‰å·²ç»çœ‹åˆ°çš„å…ƒç´ éå¸¸å°‘ï¼Œåˆ™éœ€è¦çš„å†…å­˜è¦è¦å°‘å¾—å¤š</p>
<p>åœ¨redisä¸­HLLæ˜¯ä¸€ä¸ªä¸åŒçš„æ•°æ®ç»“æ„ï¼Œå®ƒè¢«<strong>ç¼–ç æˆRediså­—ç¬¦ä¸²</strong>, å› æ­¤å¯ä»¥é€šè¿‡è°ƒç”¨GETå‘½ä»¤åºåˆ—åŒ–ä¸€ä¸ªHLLï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨SETå‘½ä»¤å°†å…¶ååºåˆ—åŒ–åˆ°redisæœåŠ¡å™¨</p>
<p>HLLçš„APIç±»ä¼¼ä½¿ç”¨SETæ•°æ®ç»“æ„åšç›¸åŒçš„ä»»åŠ¡ï¼Œé€šè¿‡SADDå‘½ä»¤æŠŠæ¯ä¸€ä¸ªè§‚å¯Ÿçš„å…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªSETé›†åˆï¼Œç”¨SCARDå‘½ä»¤æ£€æŸ¥SETé›†åˆä¸­å…ƒç´ çš„æ•°é‡ï¼Œé›†åˆé‡Œçš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå·²ç»å­˜åœ¨çš„å…ƒç´ ä¸ä¼šè¢«é‡å¤æ·»åŠ </p>
<p>è€Œä½¿ç”¨HLLæ—¶å¹¶ä¸æ˜¯çœŸæ­£æ·»åŠ é¡¹åˆ°HLLä¸­ï¼ˆè¿™ä¸€ç‚¹å’ŒSETç»“æ„å·®å¼‚å¾ˆå¤§ï¼‰ï¼Œå› ä¸ºHLLçš„æ•°æ®ç»“æ„åªåŒ…å«ä¸€ä¸ªä¸åŒ…å«å®é™…å…ƒç´ çš„çŠ¶æ€ï¼ŒAPIæ˜¯ä¸€æ ·çš„ï¼š</p>
<ul>
<li>PFADD: ç”¨äºæ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ åˆ°ç»Ÿè®¡ä¸­</li>
<li>PFCOUNT: ç”¨äºè·å–åˆ°ç›®å‰ä¸ºæ­¢é€šè¿‡PFADDå‘½ä»¤æ·»åŠ çš„<strong>å”¯ä¸€å…ƒç´ ä¸ªæ•°è¿‘ä¼¼å€¼</strong></li>
<li>PFMERGE: æ‰§è¡Œ<strong>å¤šä¸ªHLLä¹‹é—´çš„è”åˆæ“ä½œ</strong></li>
</ul>
<pre><code class="mysql">127.0.0.1:6380&gt; PFADD hll a b c d d c
(integer) 1
127.0.0.1:6380&gt; PFCOUNT hll
(integer) 4
127.0.0.1:6380&gt; PFADD hll e
(integer) 1
127.0.0.1:6380&gt; PFCOUNT hll
(integer) 5</code></pre>
<blockquote>
<br>

<p><strong>è¡¥å……: PFMERGEå‘½ä»¤è¯´æ˜</strong></p>
<p><code>PFMERGE destkey sourcekey [sourcekey ...]</code>: å°†Nä¸ªä¸åŒçš„HyperLogLogsåˆå¹¶ä¸ºä¸€ä¸ª</p>
<p>ç”¨æ³•ï¼ˆæŠŠhll1å’Œhll2åˆå¹¶åˆ°hllsä¸­ï¼‰ï¼š</p>
<pre><code class="mysql">127.0.0.1:6380&gt; PFADD hll1 1 2 3
(integer) 1
127.0.0.1:6380&gt; PFADD hll2 3 4 5
(integer) 1
127.0.0.1:6380&gt; PFMERGE hlls hll1 hll2
OK
127.0.0.1:6380&gt; PFCOUNT hlls</code></pre>
</blockquote>
<p>HLLæ•°æ®ç»“æ„çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯å°±æ˜¯:</p>
<p>è®¡ç®—ç”¨æˆ·æ¯å¤©åœ¨æœç´¢æ¡†ä¸­æ‰§è¡Œçš„å”¯ä¸€æŸ¥è¯¢ï¼Œå³<strong>æœç´¢é¡µé¢UVç»Ÿè®¡</strong></p>
<p><strong>è€ŒBitmapsåˆ™ç”¨äºåˆ¤æ–­æŸä¸ªç”¨æˆ·æ˜¯å¦è®¿é—®è¿‡æœç´¢é¡µé¢, è¿™æ˜¯å®ƒä»¬ç”¨æ³•çš„ä¸åŒ</strong></p>
<hr>
<p><strong>â‘¢ GEO</strong></p>
<p>Redisçš„GEOç‰¹æ€§åœ¨ Redis3.2ç‰ˆæœ¬ä¸­æ¨å‡ºï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥å°†<strong>ç”¨æˆ·ç»™å®šçš„åœ°ç†ä½ç½®ï¼ˆç»åº¦å’Œçº¬åº¦ï¼‰ä¿¡æ¯å‚¨å­˜èµ·æ¥ï¼Œå¹¶å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œæ“ä½œ</strong></p>
<p>GEOç›¸å…³å‘½ä»¤åªæœ‰6ä¸ª:</p>
<ul>
<li><p><strong>GEOADDï¼š</strong>GEOADD key longitude latitude member [longitude latitude member â€¦]</p>
<p>å°†æŒ‡å®šçš„åœ°ç†ç©ºé—´ä½ç½®ï¼ˆçº¬åº¦ã€ç»åº¦ã€åç§°ï¼‰æ·»åŠ åˆ°æŒ‡å®šçš„keyä¸­</p>
<p>ä¾‹å¦‚ï¼šGEOADD city 113.501389 22.405556 shenzhenï¼›</p>
<blockquote>
<br>

<p><strong>æ³¨æ„: å–å€¼èŒƒå›´</strong></p>
<p>ç»çº¬åº¦å…·ä½“çš„é™åˆ¶ï¼Œç”±EPSG:900913/EPSG:3785/OSGEO:41001è§„å®šå¦‚ä¸‹ï¼š</p>
<ul>
<li>æœ‰æ•ˆçš„ç»åº¦ä»-180åº¦åˆ°180åº¦</li>
<li>æœ‰æ•ˆçš„çº¬åº¦ä»-85.05112878åº¦åˆ°85.05112878åº¦</li>
</ul>
<p>å½“åæ ‡ä½ç½®è¶…å‡ºä¸Šè¿°æŒ‡å®šèŒƒå›´æ—¶ï¼Œè¯¥å‘½ä»¤å°†ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯</p>
</blockquote>
</li>
<li><p><strong>GEOHASHï¼š</strong>GEOHASH key member [member â€¦]</p>
<p>è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„æ ‡å‡†Geohashå€¼ï¼Œå®ƒå¯ä»¥åœ¨<a href="http://geohash.org/ä½¿ç”¨" target="_blank" rel="noopener">http://geohash.org/ä½¿ç”¨</a></p>
<p>ä¾‹å­ï¼š<a href="http://geohash.org/sqdtr74hyu0" target="_blank" rel="noopener">http://geohash.org/sqdtr74hyu0</a></p>
<p>å¯ä»¥é€šè¿‡è°·æ­Œäº†è§£GeohashåŸç†ï¼Œæˆ–è€…GeohashåŸºæœ¬åŸç†ï¼š<a href="https://www.cnblogs.com/tgzhu/p/6204173.html" target="_blank" rel="noopener">https://www.cnblogs.com/tgzhu/p/6204173.html</a></p>
</li>
<li><p><strong>GEOPOSï¼š</strong>GEOPOS key member [member â€¦]</p>
<p>ä»keyé‡Œè¿”å›æ‰€æœ‰ç»™å®šä½ç½®å…ƒç´ çš„ä½ç½®ï¼ˆç»åº¦å’Œçº¬åº¦ï¼‰</p>
</li>
<li><p><strong>GEODISTï¼š</strong>GEODIST key member1 member2 [unit]</p>
<p>è¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»</p>
<p>GEODISTå‘½ä»¤åœ¨è®¡ç®—è·ç¦»æ—¶ä¼š<strong>å‡è®¾åœ°çƒä¸ºå®Œç¾çš„çƒå½¢</strong>ã€‚åœ¨æé™æƒ…å†µä¸‹ï¼Œè¿™ä¸€å‡è®¾æœ€å¤§ä¼šé€ æˆ0.5%çš„è¯¯å·®</p>
<p>æŒ‡å®šå•ä½çš„å‚æ•°unitå¿…é¡»æ˜¯ä»¥ä¸‹å•ä½çš„å…¶ä¸­ä¸€ä¸ªï¼š</p>
<ul>
<li>m è¡¨ç¤ºå•ä½ä¸ºç±³ï¼ˆé»˜è®¤ï¼‰</li>
<li>km è¡¨ç¤ºå•ä½ä¸ºåƒç±³</li>
<li>mi è¡¨ç¤ºå•ä½ä¸ºè‹±é‡Œ</li>
<li>ft è¡¨ç¤ºå•ä½ä¸ºè‹±å°º</li>
</ul>
</li>
<li><p><strong>GEORADIUSï¼š</strong>GEORADIUS key longitude latitude radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count]</p>
<p>ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ è¿”å›é”®åŒ…å«çš„ä½ç½®å…ƒç´ å½“ä¸­ï¼Œ ä¸ä¸­å¿ƒçš„è·ç¦»ä¸è¶…è¿‡ç»™å®šæœ€å¤§è·ç¦»çš„æ‰€æœ‰ä½ç½®å…ƒç´ </p>
<p>è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥è¯¢æŸåŸå¸‚çš„å‘¨è¾¹åŸå¸‚ç¾¤</p>
</li>
<li><p><strong>GEORADIUSBYMEMBERï¼š</strong>GEORADIUSBYMEMBER key member radius m|km|ft|mi [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count]</p>
<p>è¿™ä¸ªå‘½ä»¤å’ŒGEORADIUSå‘½ä»¤ä¸€æ ·ï¼Œéƒ½å¯ä»¥æ‰¾å‡ºä½äºæŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ï¼Œä½†æ˜¯GEORADIUSBYMEMBERçš„ä¸­å¿ƒç‚¹æ˜¯ç”±ç»™å®šçš„ä½ç½®å…ƒç´ å†³å®šçš„ï¼Œè€Œä¸æ˜¯åƒ GEORADIUSé‚£æ ·ï¼Œä½¿ç”¨è¾“å…¥çš„ç»åº¦å’Œçº¬åº¦æ¥å†³å®šä¸­å¿ƒç‚¹</p>
<p>æŒ‡å®šæˆå‘˜çš„ä½ç½®è¢«ç”¨ä½œæŸ¥è¯¢çš„ä¸­å¿ƒ</p>
</li>
</ul>
<br>

<p>GEOçš„6ä¸ªå‘½ä»¤ç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="mysql">redis&gt; GEOADD Sicily 13.361389 38.115556 &quot;Palermo&quot; 15.087269 37.502669 &quot;Catania&quot;
(integer) 2

redis&gt; GEOHASH Sicily Palermo Catania
1) &quot;sqc8b49rny0&quot;
2) &quot;sqdtr74hyu0&quot;

redis&gt; GEOPOS Sicily Palermo Catania NonExisting
1) 1) &quot;13.361389338970184&quot;
   2) &quot;38.115556395496299&quot;
2) 1) &quot;15.087267458438873&quot;
   2) &quot;37.50266842333162&quot;
3) (nil)

redis&gt; GEODIST Sicily Palermo Catania
&quot;166274.15156960039&quot;

redis&gt; GEORADIUS Sicily 15 37 100 km
1) &quot;Catania&quot;
redis&gt; GEORADIUS Sicily 15 37 200 km
1) &quot;Palermo&quot;
2) &quot;Catania&quot;

redis&gt; GEORADIUSBYMEMBER Sicily Agrigento 100 km
1) &quot;Agrigento&quot;
2) &quot;Palermo&quot;</code></pre>
<br>

<h3 id="Redisè®¾è®¡"><a href="#Redisè®¾è®¡" class="headerlink" title="Redisè®¾è®¡"></a>Redisè®¾è®¡</h3><p>è§: <a href="https://jasonkayzk.github.io/2019/12/30/é˜¿é‡Œäº‘Rediså¼€å‘è§„èŒƒ/">é˜¿é‡Œäº‘Rediså¼€å‘è§„èŒƒ</a></p>
<br>

<h3 id="Redisçš„hotkey"><a href="#Redisçš„hotkey" class="headerlink" title="Redisçš„hotkey"></a>Redisçš„hotkey</h3><p>å½“ä½¿ç”¨redisé›†ç¾¤æ¥ä½œä¸ºç¼“å­˜çš„æ—¶å€™ï¼Œå¦‚æœåœ¨ä¸šåŠ¡ä¸Šç¢°åˆ°å¤§ä¿ƒï¼Œæˆ–è€…æ­£å¥½æœ‰ä¸€ä¸ªéå¸¸çƒ­çš„å¸–å­çš„æ—¶å€™ï¼Œå¯¹åº”çš„ç¼“å­˜ä¼šè¢«é¢‘ç¹è®¿é—®</p>
<p>è€Œè¿™ä¸ªç¼“å­˜ä¼šè½åœ¨redisé›†ç¾¤çš„åŒä¸€å°é›†ç¾¤ä¸Šï¼Œå¯¼è‡´æ•°æ®é¢‘ç¹çš„è®¿é—®åŒä¸€å°æœºå™¨ï¼Œé€ æˆé›†ç¾¤æ€§èƒ½çš„ä¸å‡è¡¡, è¿™ä¸ªå°±æ˜¯æ‰€è°“çš„hot keyçš„é—®é¢˜</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å¦‚æœè¦é¢‘ç¹çš„è®¿é—®åŒä¸€ä¸ªkeyï¼Œä½†æ˜¯åˆä¸æƒ³è®©è¿™ä¸ªkeyä¸€ç›´è½åˆ°åŒä¸€å°æœºå™¨ä¸Šï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨å…¶ä»–æœºå™¨ä¸Šå¤åˆ¶è¿™ä¸ªkeyçš„å¤‡ä»½ï¼Œè®©è¯·æ±‚è¿›æ¥çš„æ—¶å€™ï¼Œä¼šå»éšæœºçš„åˆ°å„å°æœºå™¨ä¸Šè®¿é—®ç¼“å­˜, æ‰€ä»¥å‰©ä¸‹çš„é—®é¢˜å°±æ˜¯å¦‚ä½•åšåˆ°è®©è¯·æ±‚å¹³å‡çš„åˆ†å¸ƒåˆ°å„å°æœºå™¨ä¸Š; ç®€å•çš„ï¼Œå‡è®¾æœ‰Nå°æœºå™¨ï¼Œå½“è¯·æ±‚åˆ°æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éšæœºä»1åˆ°Nä¹‹é—´éšæœºé€‰æ‹©ä¸€å°æœºå™¨è¿›è¡Œè®¿é—®</p>
<p>å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿå› ä¸ºredisé›†ç¾¤ä¸­å…¶å®æ˜¯æ ¹æ®keyæ¥åšå¯¹åº”çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥äº§ç”Ÿä¸€ä¸ªéšæœºå€¼ä½œä¸ºkeyçš„åç¼€ï¼Œç”±keyå˜æˆkey_suffix</p>
<p>åŒæ—¶ï¼Œä¸ºäº†é˜²æ­¢æœ‰ç›¸åŒçš„åç¼€åœ¨åšäº†æ˜ å°„ä¹‹åä»æ—§ä¼šé›†ä¸­åœ¨æŸäº›æœºå™¨ä¸Šï¼Œä¸€èˆ¬éœ€è¦æŠŠéšæœºå€¼çš„ä¸Šé™æ”¾å¤§ï¼Œæ¯”å¦‚å–é›†ç¾¤æ•°é‡Nçš„2å€</p>
<p>å› æ­¤æœ‰äº†æœ€ç®€å•çš„ç‰ˆæœ¬ï¼š</p>
<pre><code class="java">int M = N * 2 // Nä¸ºéšæœºæ•°ä¸Šé™
Random random = new Random(0, M) // éšæœº 0 ~ 2*N
String bakHotKey = hotKey + â€œ_â€ + random // å¢åŠ æ˜ å°„åç¼€ä¸ºéšæœºæ•°
// ç¼“å­˜ä¸­è·å–(ç”±äºæ˜¯éšæœºè®¿é—®, ä¸ä¸€å®šå¯ä»¥å‘½ä¸­, ä½†æ˜¯åŸºæœ¬ä¿è¯äº†é›†ç¾¤ä¸­éƒ½èƒ½ç¼“å­˜æ•°æ®)
data = redis.GET(bakHotKey) 
if (data == NULL) { // ç¼“å­˜æœªå‘½ä¸­, æ•°æ®åº“è·å–
    data = GetFromDB()
    redis.SET(bakHotKey, expireTime)
}</code></pre>
<p><strong>è§£å†³è¿‡æœŸå¸¦æ¥çš„æ»šé›ªçƒæ•ˆåº”</strong></p>
<p>æ—¢ç„¶æ˜¯hot keyï¼ŒçŸ­æ—¶é—´å†…å¿…ç„¶æœ‰å¤§é‡çš„è®¿é—®è¯·æ±‚ï¼Œ ä¸Šè¾¹çš„ä»£ç è®¾ç½®äº†redisé›†ç¾¤ä¸­çš„å„å°æœºå™¨éƒ½æœ‰ç›¸åŒçš„è¿‡æœŸæ—¶é—´,  <strong>å¦‚æœredisé›†ç¾¤ä¸­çš„ç¼“å­˜é›†ä¸­è¿‡æœŸï¼Œå¿…ç„¶éƒ½ä¼šæŠŠå‹åŠ›è½¬ç§»åˆ°DBä¸Š</strong></p>
<p>ä¸ºäº†é˜²æ­¢è¿™ç§é›ªå´©æ•ˆåº”ï¼Œéœ€è¦å°†å„å°æœºå™¨çš„è¿‡æœŸæ—¶é—´éƒ½å°½é‡è®¾ç½®çš„ä¸ä¸€æ ·ã€‚æ‰€ä»¥å¯ä»¥åœ¨è¿‡æœŸæ—¶é—´ä¸Šå†åŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œæœ‰äº†ç¬¬äºŒä¸ªç‰ˆæœ¬</p>
<pre><code class="java">int M = N * 2 // Nä¸ºéšæœºæ•°ä¸Šé™
Random random = new Random(0, M) // éšæœº 0 ~ 2*N
String bakHotKey = hotKey + â€œ_â€ + random // å¢åŠ æ˜ å°„åç¼€ä¸ºéšæœºæ•°
// ç¼“å­˜ä¸­è·å–(ç”±äºæ˜¯éšæœºè®¿é—®, ä¸ä¸€å®šå¯ä»¥å‘½ä¸­, ä½†æ˜¯åŸºæœ¬ä¿è¯äº†é›†ç¾¤ä¸­éƒ½èƒ½ç¼“å­˜æ•°æ®)
data = redis.GET(bakHotKey) 
if (data == NULL) { // ç¼“å­˜æœªå‘½ä¸­, æ•°æ®åº“è·å–
    data = GetFromDB()
    redis.SET(bakHotKey, expireTime + new Random().nextInt(0 ,5));
}</code></pre>
<p>ä¸ºäº†è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œæ—¢ç„¶é›†ç¾¤ä¸­çš„æœºå™¨éƒ½æœ‰è¿™ä¸ªkeyçš„å¤‡ä»½ï¼Œä¸ºä»€ä¹ˆæ¯å°æœºå™¨ä¸ŠbakHotKeyä¸å­˜åœ¨çš„æ—¶å€™éƒ½è¦å»è®¿é—®DBå‘¢ï¼Œ å®Œå…¨å¯ä»¥<strong>åœ¨redisè‡ªå·±å†…éƒ¨è§£å†³</strong></p>
<p>å› æ­¤ä»æ—§å¯ä»¥ä¿å­˜ä¸€ä»½åŸæ¥çš„hotKeyåœ¨ç¼“å­˜ä¸­ï¼Œæ‰€æœ‰çš„bakHotKeyå¤±æ•ˆçš„æ—¶å€™ï¼Œ<strong>éƒ½ä»hotKeyå»åŒæ­¥æ•°æ®; åªæœ‰å½“hotKeyä¹Ÿå¤±æ•ˆçš„æ—¶å€™ï¼Œæ‰å»DBä¸­è®¿é—®æ•°æ®</strong>, è¿™æ ·å³ä½¿å…ˆåæœ‰å¥½å‡ å°æœºå™¨é‡Œè¾¹çš„ç¼“å­˜å¤±æ•ˆäº†ï¼Œåªæœ‰ä¸€å°æœºå™¨çœŸæ­£çš„å»DBè®¿é—®äº†æ•°æ®ï¼Œå…¶ä»–çš„rediséƒ½ä»ä¹‹åçš„hotKeyçš„ç¼“å­˜ä¸­å¤‡ä»½ä¸€ä»½æ•°æ®å‡ºæ¥</p>
<pre><code class="java">int M = N * 2 // Nä¸ºéšæœºæ•°ä¸Šé™
Random random = new Random(0, M) // éšæœº 0 ~ 2*N
String bakHotKey = hotKey + â€œ_â€ + random // å¢åŠ æ˜ å°„åç¼€ä¸ºéšæœºæ•°
// æ‹‰å–å¤‡ä»½çš„bakHotKey
var data = redis.GET(bakHotKey)
if (data == NULL) {
    // bakHotKeyå¤±æ•ˆï¼Œå°è¯•æ‹‰å–hotKey
    data = redis.GET(hotKey)
    if (data == NULL) {
        // hotKeyä¹Ÿå¤±æ•ˆï¼Œä»DBæ‹‰å–
        data = GetFromDB()
        // å†™å…¥ä¸»æ•°æ®
        redis.SET(hotKey, data, expireTime + longerTime)
        // å†™å…¥å¤‡ä»½æ•°æ®
        redis.SET(bakHotKey, data, expireTime + new Random().nextInt(0 ,5))
    } else {
        // å¦åˆ™åªéœ€è¦ç›´æ¥å†™å…¥bakHotKeyï¼Œæ— éœ€è®¿é—®DB
         redis.SET(bakHotKey, data, expireTime + new Random().nextInt(0 ,5))
    }
}</code></pre>
<hr>
<p><strong>hotkeyæ£€æµ‹</strong></p>
<p>Redis 4.0æ–°å¢äº†ä¸€ç±»å†…å­˜é€å‡ºç­–ç•¥ï¼š<strong>LFUï¼ˆLeast Frequently Usedï¼‰</strong></p>
<p>LFUè¡¨ç¤ºæœ€ä¸ç»å¸¸ä½¿ç”¨, ç›¸æ¯”LRUï¼ŒLRUå¯¹äºä¸æ€ä¹ˆä½¿ç”¨çš„keyï¼Œå¦‚æœå¶ç„¶ç”¨äº†ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯ç±»ä¼¼æ¿€æ´»äº†ä¸€ä¸‹è¿™ä¸ªkeyï¼Œä¸ä¼šçŸ­æ—¶é—´å†…åˆ é™¤ï¼›ä½†æ˜¯LFUæ˜¯ç»Ÿè®¡keyçš„æ€»ä½“çš„ä½¿ç”¨é¢‘ç‡ï¼Œåˆ é™¤ä½¿ç”¨é¢‘ç‡æœ€å°çš„key</p>
<p>redis 4.0.3æä¾›äº†redis-cliçš„çƒ­ç‚¹keyå‘ç°åŠŸèƒ½ï¼Œæ‰§è¡Œredis-cliæ—¶åŠ ä¸Šâ€“hotkeysé€‰é¡¹å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="bash">$./redis-cli --hotkeys

# Scanning the entire keyspace to find hot keys as well as
# average sizes per key type.  You can use -i 0.1 to sleep 0.1 sec
# per 100 SCAN commands (not usually needed).

[00.00%] Hot key &#39;counter:000000000002&#39; found so far with counter 87
[00.00%] Hot key &#39;key:000000000001&#39; found so far with counter 254
[00.00%] Hot key &#39;mylist&#39; found so far with counter 107
[00.00%] Hot key &#39;key:000000000000&#39; found so far with counter 254
[45.45%] Hot key &#39;counter:000000000001&#39; found so far with counter 87
[45.45%] Hot key &#39;key:000000000002&#39; found so far with counter 254
[45.45%] Hot key &#39;myset&#39; found so far with counter 64
[45.45%] Hot key &#39;counter:000000000000&#39; found so far with counter 93

-------- summary -------

Sampled 22 keys in the keyspace!
hot key found with counter: 254    keyname: key:000000000001
hot key found with counter: 254    keyname: key:000000000000
hot key found with counter: 254    keyname: key:000000000002
hot key found with counter: 107    keyname: mylist
hot key found with counter: 93    keyname: counter:000000000000
hot key found with counter: 87    keyname: counter:000000000002
hot key found with counter: 87    keyname: counter:000000000001
hot key found with counter: 64    keyname: myset</code></pre>
<br>

<h3 id="Redisäº‹åŠ¡"><a href="#Redisäº‹åŠ¡" class="headerlink" title="Redisäº‹åŠ¡"></a>Redisäº‹åŠ¡</h3><p><font color="#f00"><strong>Redis äº‹åŠ¡çš„æœ¬è´¨æ˜¯ä¸€ç»„å‘½ä»¤çš„é›†åˆ</strong></font></p>
<p>äº‹åŠ¡æ”¯æŒä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–, åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ï¼Œä¼šæŒ‰ç…§é¡ºåºä¸²è¡ŒåŒ–æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å‘½ä»¤ï¼Œå…¶ä»–å®¢æˆ·ç«¯æäº¤çš„å‘½ä»¤è¯·æ±‚ä¸ä¼šæ’å…¥åˆ°äº‹åŠ¡æ‰§è¡Œå‘½ä»¤åºåˆ—ä¸­</p>
<blockquote>
<br>

<p><strong>æ€»ç»“</strong></p>
<p>Redisäº‹åŠ¡å°±æ˜¯ä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§çš„æ‰§è¡Œä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„ä¸€ç³»åˆ—å‘½ä»¤</p>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong>åºåˆ—åŒ–æ“ä½œï¼Œä¸²è”å¤šä¸ªå‘½ä»¤é˜²æ­¢åˆ«çš„å‘½ä»¤æ’é˜Ÿ</p>
<p><strong>Redisä½¿ç”¨ä¹è§‚é”ï¼šrediså°±æ˜¯åˆ©ç”¨check-and-setæœºåˆ¶å®ç°äº‹åŠ¡</strong></p>
</blockquote>
<blockquote>
<br>

<p><strong>å›é¡¾: ä¹è§‚é”ä¸æ‚²è§‚é”</strong></p>
<ul>
<li>æ‚²è§‚é”ï¼šæ¯æ¬¡æ‹¿åˆ°æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œæˆ–è€…ç­‰å¾…åˆ«äººå¤„ç†å®Œå†å»æ‹¿é”ï¼Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å¾ˆå¤šç”¨åˆ°äº†è¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ã€è¡¨é”ã€è¯»é”ã€å†™é”</li>
<li>ä¹è§‚é”ï¼šæ¯æ¬¡æ‹¿æ•°æ®çš„æ—¶å€™æ€»è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚ä½†æ˜¯æ›´æ–°çš„æ—¶å€™å›å»åˆ¤æ–­åˆ«äººæœ‰æ²¡æœ‰æ›´æ”¹æ•°æ®ï¼Œä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶ã€‚ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œå¯ä»¥æé«˜ååé‡</li>
</ul>
</blockquote>
<p>ä¸‰å¤§ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å•ç‹¬çš„éš”ç¦»æ“ä½œï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œã€‚ä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯æ‰“æ–­</strong></li>
<li><strong>æ²¡æœ‰éš”ç¦»çº§åˆ«æ¦‚å¿µï¼šæ‰¹é‡æ“ä½œåœ¨å‘é€ EXEC å‘½ä»¤å‰è¢«æ”¾å…¥é˜Ÿåˆ—ç¼“å­˜ï¼Œå¹¶ä¸ä¼šè¢«å®é™…æ‰§è¡Œï¼Œä¹Ÿå°±ä¸å­˜åœ¨äº‹åŠ¡å†…çš„æŸ¥è¯¢è¦çœ‹åˆ°äº‹åŠ¡é‡Œçš„æ›´æ–°ï¼Œäº‹åŠ¡å¤–æŸ¥è¯¢ä¸èƒ½çœ‹åˆ°</strong></li>
<li><strong>ä¸èƒ½ä¿è¯åŸå­æ€§ï¼šå•æ¡å‘½ä»¤æ˜¯åŸå­æ€§æ‰§è¡Œçš„ï¼Œä½†äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ï¼Œä¸”æ²¡æœ‰å›æ»š; äº‹åŠ¡ä¸­ä»»æ„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶ä½™çš„å‘½ä»¤ä»ä¼šè¢«æ‰§è¡Œ</strong></li>
</ul>
<br>

<p><strong>Redisäº‹åŠ¡çš„ä¸‰ä¸ªé˜¶æ®µï¼š</strong></p>
<ul>
<li>å¼€å§‹äº‹åŠ¡</li>
<li>å‘½ä»¤å…¥é˜Ÿ</li>
<li>æ‰§è¡Œäº‹åŠ¡</li>
</ul>
<p><strong>Redisäº‹åŠ¡ç›¸å…³å‘½ä»¤ï¼š</strong></p>
<ul>
<li><code>watch key1 key2 ...</code>: ç›‘è§†ä¸€æˆ–å¤šä¸ªkey, å¦‚æœåœ¨<strong>äº‹åŠ¡æ‰§è¡Œä¹‹å‰ï¼Œè¢«ç›‘è§†çš„keyè¢«å…¶ä»–å‘½ä»¤æ”¹åŠ¨ï¼Œåˆ™äº‹åŠ¡è¢«æ‰“æ–­ ï¼ˆ ç±»ä¼¼ä¹è§‚é” ï¼‰</strong></li>
<li><code>multi</code>: æ ‡è®°ä¸€ä¸ª<strong>äº‹åŠ¡å—çš„å¼€å§‹</strong>ï¼ˆ queued ï¼‰</li>
<li><code>exec</code>: <strong>æ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å—çš„å‘½ä»¤ ï¼ˆ ä¸€æ—¦æ‰§è¡Œexecåï¼Œä¹‹å‰åŠ çš„ç›‘æ§é”éƒ½ä¼šè¢«å–æ¶ˆæ‰ ï¼‰</strong>ã€€</li>
<li><code>discard</code>: <strong>å–æ¶ˆäº‹åŠ¡ï¼Œæ”¾å¼ƒäº‹åŠ¡å—ä¸­çš„æ‰€æœ‰å‘½ä»¤</strong></li>
<li><code>unwatch</code>: <strong>å–æ¶ˆwatchå¯¹æ‰€æœ‰keyçš„ç›‘æ§</strong></li>
</ul>
<br>

<p><strong>Redisäº‹åŠ¡ä½¿ç”¨æ¡ˆä¾‹</strong></p>
<p><strong>â‘  æ­£å¸¸æ‰§è¡Œ</strong></p>
<pre><code class="mysql">localhost:0&gt;MULTI # å¼€å¯äº‹åŠ¡
&quot;OK&quot;
localhost:0&gt;set k1 v1 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k2 v2 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;get k2 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k3 v3 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;exec # æ‰§è¡Œäº‹åŠ¡
# è¾“å‡ºç»“æœ
 1)  &quot;OK&quot; 
 2)  &quot;OK&quot;
 3)  &quot;v2&quot;
 4)  &quot;OK&quot;</code></pre>
<p><strong>â‘¡ æ”¾å¼ƒäº‹åŠ¡</strong></p>
<pre><code class="mysql">localhost:0&gt;multi # å¼€å¯äº‹åŠ¡
&quot;OK&quot;
localhost:0&gt;set k1 v1 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k2 v2 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k3 v3 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;discard # å–æ¶ˆäº‹åŠ¡
&quot;OK&quot;
localhost:0&gt;get k2 # æ•°æ®æœªè¢«åŠ å…¥
null</code></pre>
<p><strong>â‘¢ äº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨å‘½ä»¤æ€§é”™è¯¯</strong></p>
<p><font color="#f00"><strong>è‹¥åœ¨äº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨å‘½ä»¤æ€§é”™è¯¯ï¼ˆç±»ä¼¼äºç¼–è¯‘æ€§é”™è¯¯ï¼‰ï¼Œåˆ™æ‰§è¡ŒEXECå‘½ä»¤æ—¶ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œ</strong></font></p>
<pre><code class="mysql">localhost:0&gt;multi # å¼€å¯äº‹åŠ¡
&quot;OK&quot;
localhost:0&gt;set k1 v1 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k2 v2 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k3 v3 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;getset k3 # é”™è¯¯å‘½ä»¤
&quot;ERR wrong number of arguments for &#39;getset&#39; command&quot;
localhost:0&gt;set k4 v4 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k5 v5 # å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;exec # æ‰§è¡Œäº‹åŠ¡æŠ¥é”™!
&quot;EXECABORT Transaction discarded because of previous errors.&quot;
localhost:0&gt;get k5 # å‘½ä»¤æœªæ‰§è¡Œ
null</code></pre>
<p><strong>â‘£ äº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨è¯­æ³•æ€§é”™è¯¯</strong></p>
<p><font color="#f00"><strong>è‹¥åœ¨äº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨è¯­æ³•æ€§é”™è¯¯ï¼ˆç±»ä¼¼äºè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼Œåˆ™æ‰§è¡ŒEXECå‘½ä»¤æ—¶ï¼Œå…¶ä»–æ­£ç¡®å‘½ä»¤ä¼šè¢«æ‰§è¡Œï¼Œé”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸</strong></font></p>
<pre><code class="mysql">localhost:0&gt;set k1 v1 # äº‹åŠ¡å‰è®¾ç½®k1 - v1
&quot;OK&quot;
localhost:0&gt;multi # å¼€å¯äº‹åŠ¡
&quot;OK&quot;
localhost:0&gt;incr k1 # é”™è¯¯å‘½ä»¤, å¯¹v1è¿›è¡ŒåŠ ä¸€æ“ä½œ
&quot;QUEUED&quot;
localhost:0&gt;set k2 v2 # æ­£ç¡®å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;set k3 v3 # æ­£ç¡®å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;get k3 # æ­£ç¡®å‘½ä»¤å…¥é˜Ÿ
&quot;QUEUED&quot;
localhost:0&gt;exec # æ‰§è¡Œäº‹åŠ¡
 1)  &quot;ERR value is not an integer or out of range&quot; # ç¬¬ä¸€æ¡å‘½ä»¤æŠ¥é”™
 2)  &quot;OK&quot; # å…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œ
 3)  &quot;OK&quot;
 4)  &quot;v3&quot;</code></pre>
<p><strong>â‘¤ ä½¿ç”¨watch</strong></p>
<ul>
<li><p>æ¡ˆä¾‹ä¸€ï¼šä½¿ç”¨watchæ£€æµ‹balanceï¼Œäº‹åŠ¡æœŸé—´balanceæ•°æ®æœªå˜åŠ¨ï¼Œäº‹åŠ¡æ‰§è¡ŒæˆåŠŸ</p>
<pre><code class="mysql">localhost:0&gt;set balance 100 # balanceåˆå§‹å€¼ä¸º100
&quot;OK&quot;
localhost:0&gt;watch balance # æ£€æµ‹å¯ç”¨ä½™é¢æ•°
&quot;OK&quot;
localhost:0&gt;multi # å¼€å¯äº‹åŠ¡
&quot;OK&quot;
localhost:0&gt;decrby balance 20 # æ¶ˆè´¹20å, å¯ç”¨ä½™é¢æ•°-20
&quot;QUEUED&quot;
localhost:0&gt;incrby debt 20 # åº”è¿˜ä½™é¢ + 20
&quot;QUEUED&quot;
localhost:0&gt;exec
 1)  &quot;80&quot;
 2)  &quot;20&quot;</code></pre>
</li>
<li><p>æ¡ˆä¾‹äºŒï¼šä½¿ç”¨watchæ£€æµ‹balanceï¼Œåœ¨å¼€å¯äº‹åŠ¡åï¼ˆæ ‡æ³¨1å¤„ï¼‰ï¼Œåœ¨æ–°çª—å£æ‰§è¡Œæ ‡æ³¨2ä¸­çš„æ“ä½œï¼Œæ›´æ”¹balanceçš„å€¼ï¼Œæ¨¡æ‹Ÿå…¶ä»–å®¢æˆ·ç«¯åœ¨äº‹åŠ¡æ‰§è¡ŒæœŸé—´æ›´æ”¹watchç›‘æ§çš„æ•°æ®ï¼Œç„¶åå†æ‰§è¡Œæ ‡æ³¨1åå‘½ä»¤ï¼Œæ‰§è¡ŒEXECåï¼Œäº‹åŠ¡æœªæˆåŠŸæ‰§è¡Œ</p>
<pre><code class="mysql"># å®¢æˆ·ç«¯-1
localhost:0&gt;set balance 100 # balanceåˆå§‹å€¼ä¸º100
&quot;OK&quot;
localhost:0&gt;watch balance # æ£€æµ‹å¯ç”¨ä½™é¢æ•°
&quot;OK&quot;
localhost:0&gt;multi # å®¢æˆ·ç«¯-1å¼€å¯äº‹åŠ¡(æ ‡æ³¨1)
&quot;OK&quot;

# å®¢æˆ·ç«¯-2æ‰§è¡Œ
localhost:0&gt;get balance
&quot;100&quot;
localhost:0&gt;set balance 800 # å®¢æˆ·ç«¯-2ä¿®æ”¹balance, æ­¤æ—¶å®¢æˆ·ç«¯-1å¼€å¯äº†äº‹åŠ¡
&quot;OK&quot;

# å®¢æˆ·ç«¯-1ç»§ç»­
localhost:0&gt;decrby balance 20 # æ¶ˆè´¹20å, å¯ç”¨ä½™é¢æ•°-20
&quot;QUEUED&quot;
localhost:0&gt;incrby debt 20 # åº”è¿˜ä½™é¢ + 20
&quot;QUEUED&quot;
localhost:0&gt;exec
(nil) # äº‹åŠ¡å¤±è´¥
localhost:0&gt;get balance # balanceå€¼å·²ç»è¢«ä¿®æ”¹
&quot;800&quot;</code></pre>
<p><strong>ä¸€ä½†æ‰§è¡Œ EXEC å¼€å¯äº‹åŠ¡çš„æ‰§è¡Œåï¼Œæ— è®ºäº‹åŠ¡ä½¿ç”¨æ‰§è¡ŒæˆåŠŸï¼Œ WARCH å¯¹å˜é‡çš„ç›‘æ§éƒ½å°†è¢«å–æ¶ˆ, æ•…å½“äº‹åŠ¡æ‰§è¡Œå¤±è´¥åï¼Œéœ€é‡æ–°æ‰§è¡ŒWATCHå‘½ä»¤å¯¹å˜é‡è¿›è¡Œç›‘æ§ï¼Œå¹¶å¼€å¯æ–°çš„äº‹åŠ¡è¿›è¡Œæ“ä½œ</strong></p>
</li>
</ul>
<blockquote>
<br>

<p><strong>watchæ€»ç»“:</strong></p>
<p>watchæŒ‡ä»¤ç±»ä¼¼äºä¹è§‚é”ï¼Œåœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œ<font color="#f00"><strong>å¦‚æœwatchç›‘æ§çš„å¤šä¸ªKEYä¸­ä»»ä½•KEYçš„å€¼å·²ç»è¢«å…¶ä»–å®¢æˆ·ç«¯æ›´æ”¹ï¼Œåˆ™ä½¿ç”¨EXECæ‰§è¡Œäº‹åŠ¡æ—¶ï¼Œäº‹åŠ¡é˜Ÿåˆ—å°†ä¸ä¼šè¢«æ‰§è¡Œï¼ŒåŒæ—¶è¿”å›Null, multi-bulkåº”ç­”ä»¥é€šçŸ¥è°ƒç”¨è€…äº‹åŠ¡æ‰§è¡Œå¤±è´¥</strong></font></p>
</blockquote>
<br>

<h3 id="Redisè®¢é˜…å‘å¸ƒ"><a href="#Redisè®¢é˜…å‘å¸ƒ" class="headerlink" title="Redisè®¢é˜…å‘å¸ƒ"></a>Redisè®¢é˜…å‘å¸ƒ</h3><p>å‘å¸ƒè®¢é˜…æ˜¯ä¸€ç§åº”ç”¨ç¨‹åºç³»ç»Ÿä¹‹é—´é€šè®¯ï¼Œä¼ é€’æ•°æ®çš„æŠ€æœ¯æ‰‹æ®µ, ç‰¹åˆ«æ˜¯åœ¨å¼‚æ„ï¼ˆä¸<br> åŒè¯­è¨€ï¼‰ç³»ç»Ÿä¹‹é—´ä½œç”¨éå¸¸æ˜æ˜¾, å‘å¸ƒè®¢é˜…å¯ä»¥å®ç°åº”ç”¨ç³»ç»Ÿä¹‹é—´çš„è§£è€¦åˆ</p>
<p>é™¤äº†ä¼ ç»Ÿçš„æ¯”å¦‚RabbitMQ, Kafkaç­‰æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°å‘å¸ƒ/è®¢é˜…(Pub/Sub)ä¹‹å¤–, Redisä¹Ÿå¯ä»¥å®ç°Pub/SubæœåŠ¡</p>
<p>Redisé€šè¿‡<code>publishå’Œsubscribe</code>å‘½ä»¤å®ç°è®¢é˜…å’Œå‘å¸ƒçš„åŠŸèƒ½, Rediså°†ä¿¡æ¯ç±»å‹ç§°ä¸ºé€šé“(channel); </p>
<p>è®¢é˜…è€…å¯ä»¥é€šè¿‡subscribeå‘½ä»¤å‘redis-serverè®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„æ¶ˆæ¯ç±»å‹; å½“å‘å¸ƒè€…é€šè¿‡publishå‘½ä»¤å‘redis-serverå‘é€ç‰¹å®šç±»å‹çš„ä¿¡æ¯æ—¶ï¼Œè®¢é˜…è¯¥æ¶ˆæ¯ç±»å‹çš„å…¨éƒ¨è®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°æ­¤æ¶ˆæ¯</p>
<p><strong>Redisæ¡ˆä¾‹</strong></p>
<p>å®¢æˆ·ç«¯-1è®¢é˜…cctv1:</p>
<pre><code class="mysql">127.0.0.1:6379&gt; subscribe cctv1
Reading messages... (press Ctrl-C to quit)
1) &quot;subscribe&quot;
2) &quot;CCTV1&quot;
3) (integer) 1</code></pre>
<p>å®¢æˆ·ç«¯-2è®¢é˜…cctv1å’Œcctv2:</p>
<pre><code class="mysql">127.0.0.1:6379&gt; subscribe cctv1 cctv2
Reading messages... (press Ctrl-C to quit)
1) &quot;subscribe&quot;
2) &quot;CCTV1&quot;
3) (integer) 1
1) &quot;subscribe&quot;
2) &quot;CCTV2&quot;
3) (integer) 2</code></pre>
<p>å®¢æˆ·ç«¯-3è®¢é˜…å‘å¸ƒåˆ°æ¨¡å¼(ä½¿ç”¨psubscribeæ¥è®¢é˜…ä¸€ä¸ªæ¨¡å¼):</p>
<pre><code class="mysql">127.0.0.1:6379&gt; psubscribe cctv*
Reading messages... (press Ctrl-C to quit)
1) &quot;psubscribe&quot;
2) &quot;CCTV*&quot;
3) (integer) 1</code></pre>
<p>ç°åœ¨å®¢æˆ·ç«¯-4å‘æœåŠ¡å™¨æ¨é€äº†å…³äºcctv1é¢‘é“çš„ä¿¡æ¯:</p>
<pre><code class="mysql">127.0.0.1:6379&gt; publish CCTV1 &quot;cctv1 is good&quot;
(integer) 2</code></pre>
<p>åˆ™ä¸‰ä¸ªå®¢æˆ·ç«¯éƒ½ä¼šè·å¾—:</p>
<pre><code class="mysql"># å®¢æˆ·ç«¯-1
1) &quot;message&quot;
2) &quot;cctv1&quot;
3) &quot;cctv1 is good&quot;

# å®¢æˆ·ç«¯-2
1) &quot;message&quot;
2) &quot;cctv1&quot;
3) &quot;cctv1 is good&quot;

# å®¢æˆ·ç«¯-3
1) &quot;pmessage&quot;
2) &quot;cctv*&quot;
3) &quot;cctv1&quot;
4) &quot;cctv1 is good&quot;</code></pre>
<p><strong>Pub/Subåœ¨Javaä¸­çš„å®ç°</strong></p>
<p>å¯¼å…¥Redisé©±åŠ¨</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;redis.clients&lt;/groupId&gt;
    &lt;artifactId&gt;jedis&lt;/artifactId&gt;
    &lt;version&gt;3.2.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
<p>Redisé©±åŠ¨åŒ…æä¾›äº†ä¸€ä¸ªæŠ½è±¡ç±»: <code>JedisPubSub</code>, ç»§æ‰¿è¿™ä¸ªç±»å°±å®Œæˆäº†å¯¹å®¢æˆ·ç«¯å¯¹è®¢é˜…çš„ç›‘å¬</p>
<p>ç¤ºä¾‹ä»£ç :</p>
<p>RedisMsgPubSubListener.java</p>
<pre><code class="java">package top.jasonkayzk.redismq.listener;

import redis.clients.jedis.JedisPubSub;

/**
 * Rediså‘å¸ƒè®¢é˜…æ¶ˆæ¯ç›‘å¬å™¨
 *
 * @author zk
 */
public class RedisMsgPubSubListener extends JedisPubSub {

    @Override
    public void unsubscribe() {
        super.unsubscribe();
    }

    @Override
    public void unsubscribe(String... channels) {
        super.unsubscribe(channels);
    }

    @Override
    public void subscribe(String... channels) {
        super.subscribe(channels);
    }

    @Override
    public void psubscribe(String... patterns) {
        super.psubscribe(patterns);
    }

    @Override
    public void punsubscribe() {
        super.punsubscribe();
    }

    @Override
    public void punsubscribe(String... patterns) {
        super.punsubscribe(patterns);
    }

    /**
     * è®¢é˜…é¢‘é“æ—¶çš„å›è°ƒ
     *
     * @param channel            é¢‘é“
     * @param subscribedChannels è®¢é˜…æˆåŠŸçš„é¢‘é“
     */
    @Override
    public void onSubscribe(String channel, int subscribedChannels) {
        System.out.println(String.format(&quot;subscribe redis channel success, channel %s, subscribedChannels %d&quot;,
                channel, subscribedChannels));
    }

    /**
     * ç›‘å¬åˆ°è®¢é˜…é¢‘é“æ¥å—åˆ°æ¶ˆæ¯æ—¶çš„å›è°ƒ
     *
     * @param channel è®¢é˜…é¢‘é“
     * @param message é¢‘é“æ¨é€
     */
    @Override
    public void onMessage(String channel, String message) {
        System.out.println(String.format(&quot;receive redis published message, channel %s, message %s&quot;, channel, message));
    }

    /**
     * å–æ¶ˆè®¢é˜…é¢‘é“æ—¶çš„å›è°ƒ
     *
     * @param channel            é¢‘é“
     * @param subscribedChannels è®¢é˜…æˆåŠŸçš„é¢‘é“
     */
    @Override
    public void onUnsubscribe(String channel, int subscribedChannels) {
        System.out.println(String.format(&quot;unsubscribe redis channel, channel %s, subscribedChannels %d&quot;,
                channel, subscribedChannels));
    }

    /**
     * ç›‘å¬åˆ°è®¢é˜…æ¨¡å¼æ¥å—åˆ°æ¶ˆæ¯æ—¶çš„å›è°ƒ
     *
     * @param pattern è®¢é˜…æ¨¡å¼
     * @param channel è®¢é˜…é¢‘é“
     * @param message é¢‘é“æ¨é€
     */
    @Override
    public void onPMessage(String pattern, String channel, String message) {
        System.out.println(String.format(&quot;onPMessage: pattern[%s], channel[%s], message[%s]&quot;, pattern, channel, message));
    }

    /**
     * å–æ¶ˆè®¢é˜…æ¨¡å¼æ—¶çš„å›è°ƒ
     *
     * @param pattern            è®¢é˜…æ¨¡å¼
     * @param subscribedChannels è®¢é˜…çš„é¢‘é“
     */
    @Override
    public void onPUnsubscribe(String pattern, int subscribedChannels) {
        System.out.println(String.format(&quot;onPUnsubscribe: pattern[%s], subscribedChannels[%s]&quot;, pattern, subscribedChannels));
    }

    /**
     * è®¢é˜…é¢‘é“æ¨¡å¼æ—¶çš„å›è°ƒ
     *
     * @param pattern            è®¢é˜…æ¨¡å¼
     * @param subscribedChannels è®¢é˜…çš„é¢‘é“
     */
    @Override
    public void onPSubscribe(String pattern, int subscribedChannels) {
        System.out.println(String.format(&quot;onPSubscribe: pattern[%s], subscribedChannels[%s]&quot;, pattern, subscribedChannels));
    }

}
</code></pre>
<blockquote>
<br>

<p><strong>æ–¹æ³•è¯´æ˜:</strong></p>
<ul>
<li>ç›‘å¬åˆ°è®¢é˜…æ¨¡å¼æ¥å—åˆ°æ¶ˆæ¯æ—¶çš„å›è°ƒ (onPMessage)</li>
<li>ç›‘å¬åˆ°è®¢é˜…é¢‘é“æ¥å—åˆ°æ¶ˆæ¯æ—¶çš„å›è°ƒ (onMessage )</li>
<li>è®¢é˜…é¢‘é“æ—¶çš„å›è°ƒ( onSubscribe )</li>
<li>å–æ¶ˆè®¢é˜…é¢‘é“æ—¶çš„å›è°ƒ( onUnsubscribe )</li>
<li>è®¢é˜…é¢‘é“æ¨¡å¼æ—¶çš„å›è°ƒ ( onPSubscribe )</li>
<li>å–æ¶ˆè®¢é˜…æ¨¡å¼æ—¶çš„å›è°ƒ( onPUnsubscribe )</li>
</ul>
</blockquote>
<p>å‘å¸ƒè€…: RedisPub</p>
<pre><code class="java">package top.jasonkayzk.redismq.pub;

import redis.clients.jedis.Jedis;

/**
 * å‘å¸ƒè€…
 *
 * @author zk
 */
public class RedisPub {

    public static void main(String[] args) {
        publish();
    }

    public static void publish() {
        System.out.println(&quot;å‘å¸ƒè€…&quot;);
        Jedis client = null;
        try {
            // redisæœåŠ¡åœ°å€å’Œç«¯å£å·
            client = new Jedis(&quot;127.0.0.1&quot;, 6379, 0);

            // clientå®¢æˆ·ç«¯é…ç½®ä¸¤ä¸ªæ¨é€channel
            client.publish( &quot;news.share&quot;, &quot;æ–°é—»åˆ†äº«&quot;);
            client.publish( &quot;news.blog&quot;, &quot;æ–°é—»åšå®¢&quot;);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (client != null) {
                client.disconnect();
            }
        }
    }

}</code></pre>
<p>è®¢é˜…è€…: RedisSub</p>
<pre><code class="java">package top.jasonkayzk.redismq.sub;

import redis.clients.jedis.Jedis;
import top.jasonkayzk.redismq.listener.RedisMsgPubSubListener;

/**
 * è®¢é˜…è€…
 *
 * @author zk
 */
public class RedisSub {

    public static void main(String[] args) {
        subscribe();
    }

    public static void subscribe() {
        System.out.println(&quot;è®¢é˜…è€…&quot;);
        Jedis client = null;
        try {
            // redisæœåŠ¡åœ°å€å’Œç«¯å£å·
            client = new Jedis(&quot;127.0.0.1&quot;, 6379, 0);
            // åˆ›å»ºä¸€ä¸ªListener
            RedisMsgPubSubListener listener = new RedisMsgPubSubListener();
            // å®¢æˆ·ç«¯é…ç½®ç›‘å¬ä¸¤ä¸ªchannel: news.shareå’Œnews.blog
            // çœŸæ­£æ”¶åˆ°æ¨é€ååœ¨listenerä¸­å¤„ç†å›è°ƒé€»è¾‘
            client.subscribe(listener, &quot;news.share&quot;, &quot;news.blog&quot;);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (client != null) {
                client.disconnect();
            }
        }
    }

}</code></pre>
<p>ä¹‹åå…ˆè¿è¡Œè®¢é˜…è€…è¿›è¡Œè®¢é˜…, ç„¶åè¿è¡Œå‘å¸ƒè€…å³å¯æ”¶åˆ°æ¶ˆæ¯:</p>
<pre><code>è®¢é˜…è€…
subscribe redis channel success, channel news.share, subscribedChannels 1
subscribe redis channel success, channel news.blog, subscribedChannels 2
receive redis published message, channel news.share, message æ–°é—»åˆ†äº«
receive redis published message, channel news.blog, message æ–°é—»åšå®¢</code></pre><blockquote>
<br>

<p><strong>è¿è¡Œæœºåˆ¶è¯´æ˜:</strong></p>
<p>RedisPubé€šè¿‡Jediså®¢æˆ·ç«¯æ³¨å†Œå¹¶å‘å¸ƒæ¶ˆæ¯åˆ°æŒ‡å®šçš„channel, ä¹‹åRedisSubé€šè¿‡Listenerç±»ä¸­çš„subscribe()æ–¹æ³•æ³¨å†Œè®¢é˜…;</p>
<p><font color="#f00"><strong>Listeneræ”¶åˆ°å‘å¸ƒäº‹ä»¶ä¹‹å, é€šè¿‡OnMessageç­‰å›è°ƒå‡½æ•°å®Œæˆé€»è¾‘å¤„ç†(å³RedisSubä»…ä»…å®Œæˆè®¢é˜…, çœŸæ­£æ‰§è¡Œé€»è¾‘çš„æ˜¯Listener)</strong></font></p>
<p>æºç è§: <a href="https://github.com/JasonkayZK/Java_Samples/tree/redis-pub/sub" target="_blank" rel="noopener">https://github.com/JasonkayZK/Java_Samples/tree/redis-pub/sub</a></p>
</blockquote>
<br>

<h3 id="Rediså®ç°åˆ†å¸ƒå¼é”"><a href="#Rediså®ç°åˆ†å¸ƒå¼é”" class="headerlink" title="Rediså®ç°åˆ†å¸ƒå¼é”"></a>Rediså®ç°åˆ†å¸ƒå¼é”</h3><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é”ï¼Œæ¥é¿å…ç”±äºç«äº‰è€Œé€ æˆçš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä»¥<code>synchronized ã€Lock</code>æ¥ä½¿ç”¨å®ƒ</p>
<p>ä½†æ˜¯Javaä¸­çš„é”ï¼Œåªèƒ½ä¿è¯åœ¨åŒä¸€ä¸ªJVMè¿›ç¨‹å†…ä¸­æ‰§è¡Œã€‚å¦‚æœåœ¨åˆ†å¸ƒå¼é›†ç¾¤ç¯å¢ƒä¸‹å‘¢ï¼Ÿ</p>
<p>åˆ†å¸ƒå¼é”ï¼Œæ˜¯ä¸€ç§æ€æƒ³ï¼Œå®ƒçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å°†æ²™æ»©å½“åšåˆ†å¸ƒå¼é”çš„ç»„ä»¶ï¼Œé‚£ä¹ˆå®ƒçœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li><strong>åŠ é”</strong></li>
</ul>
<p>åœ¨æ²™æ»©ä¸Šè¸©ä¸€è„šï¼Œç•™ä¸‹è‡ªå·±çš„è„šå°ï¼Œå°±å¯¹åº”äº†åŠ é”æ“ä½œã€‚å…¶ä»–è¿›ç¨‹æˆ–è€…çº¿ç¨‹ï¼Œçœ‹åˆ°æ²™æ»©ä¸Šå·²ç»æœ‰è„šå°ï¼Œè¯æ˜é”å·²è¢«åˆ«äººæŒæœ‰ï¼Œåˆ™ç­‰å¾…</p>
<ul>
<li><strong>è§£é”</strong></li>
</ul>
<p>æŠŠè„šå°ä»æ²™æ»©ä¸ŠæŠ¹å»ï¼Œå°±æ˜¯è§£é”çš„è¿‡ç¨‹</p>
<ul>
<li><strong>é”è¶…æ—¶</strong></li>
</ul>
<p>ä¸ºäº†é¿å…æ­»é”ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€é˜µé£ï¼Œåœ¨å•ä½æ—¶é—´ååˆ®èµ·ï¼Œå°†è„šå°è‡ªåŠ¨æŠ¹å»</p>
<p>åˆ†å¸ƒå¼é”çš„å®ç°æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åŸºäºæ•°æ®åº“ã€memcachedã€Redisã€ç³»ç»Ÿæ–‡ä»¶ã€zookeeperç­‰ã€‚å®ƒä»¬çš„æ ¸å¿ƒçš„ç†å¿µè·Ÿä¸Šé¢çš„è¿‡ç¨‹å¤§è‡´ç›¸åŒ</p>
<p><strong>â‘  å•èŠ‚ç‚¹Rediså®ç°ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼é”</strong></p>
<ul>
<li><strong>åŠ é”</strong></li>
</ul>
<p><font color="#f00"><strong>åŠ é”å®é™…ä¸Šå°±æ˜¯åœ¨redisä¸­ï¼Œç»™Keyé”®è®¾ç½®ä¸€ä¸ªå€¼ï¼Œä¸ºé¿å…æ­»é”ï¼Œå¹¶ç»™å®šä¸€ä¸ªè¿‡æœŸæ—¶é—´:</strong></font></p>
<p><code>SET lock_key lock_value NX PX 5000</code></p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li><code>lock_value</code> æ˜¯å®¢æˆ·ç«¯ç”Ÿæˆçš„å”¯ä¸€çš„å­—ç¬¦ä¸²</li>
<li><code>NX</code> ä»£è¡¨åªåœ¨é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œ</li>
<li><code>PX 5000</code> è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸º5000æ¯«ç§’</li>
</ul>
<p>è¿™æ ·ï¼Œå¦‚æœä¸Šé¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œåˆ™è¯æ˜å®¢æˆ·ç«¯è·å–åˆ°äº†é”</p>
<ul>
<li><strong>è§£é”</strong></li>
</ul>
<p>è§£é”çš„è¿‡ç¨‹å°±æ˜¯å°†Keyé”®åˆ é™¤, ä½†ä¹Ÿä¸èƒ½ä¹±åˆ ï¼Œä¸èƒ½è¯´å®¢æˆ·ç«¯1çš„è¯·æ±‚å°†å®¢æˆ·ç«¯2çš„é”ç»™åˆ é™¤æ‰, è¿™æ—¶å€™<code>lock_value</code>çš„ä½œç”¨å°±ä½“ç°å‡ºæ¥</p>
<p>ä¸ºäº†ä¿è¯è§£é”æ“ä½œçš„åŸå­æ€§ï¼Œå¯ä»¥ç”¨LUAè„šæœ¬å®Œæˆè¿™ä¸€æ“ä½œ: å…ˆåˆ¤æ–­å½“å‰é”çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ä¼ å…¥çš„å€¼ç›¸ç­‰ï¼Œæ˜¯çš„è¯å°±åˆ é™¤Keyï¼Œè§£é”æˆåŠŸ</p>
<pre><code class="lua">if redis.call(&#39;get&#39;,KEYS[1]) == ARGV[1] then 
   return redis.call(&#39;del&#39;,KEYS[1]) 
else
   return 0 
end</code></pre>
<ul>
<li><strong>å®ç°</strong></li>
</ul>
<p>é¦–å…ˆåŠ å…¥jedisä¾èµ–</p>
<pre><code class="java">        &lt;dependency&gt;
            &lt;groupId&gt;redis.clients&lt;/groupId&gt;
            &lt;artifactId&gt;jedis&lt;/artifactId&gt;
            &lt;version&gt;3.2.0&lt;/version&gt;
        &lt;/dependency&gt;</code></pre>
<p>åˆ†å¸ƒå¼é”</p>
<p>SinglePointRedisLock.java</p>
<pre><code class="java">package top.jasonkayzk.redislock.singlepoint;

import redis.clients.jedis.Jedis;
import redis.clients.jedis.params.SetParams;

import java.util.Collections;

/**
 * å•ç‚¹Redisåˆ†å¸ƒå¼é”
 * &lt;p&gt;
 * æœªå®ç°: å¯é‡å…¥, é”®å€¼è¿‡æœŸç­‰é—®é¢˜
 *
 * @author zk
 */
public class SinglePointRedisLock {

    /**
     * é”é”®
     */
    private final String LOCK_KEY = &quot;redis_lock&quot;;

    /**
     * é”è¿‡æœŸæ—¶é—´
     */
    protected final long internalLockLeaseTime = 30000;

    /**
     * è·å–é”çš„è¶…æ—¶æ—¶é—´
     */
    private final long TIMEOUT = 999999;

    /**
     * åŠ é”
     *
     * @param id é”Id
     * @return æ˜¯å¦åŠ é”æˆåŠŸ
     */
    public boolean lock(String id) {
        try (Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379, 0)) {
            long start = System.currentTimeMillis();

            // SETå‘½ä»¤çš„å‚æ•°
            SetParams params = SetParams.setParams().nx().px(internalLockLeaseTime);

            for (; ; ) {
                // SETå‘½ä»¤è¿”å›OK ï¼Œåˆ™è¯æ˜è·å–é”æˆåŠŸ
                String lock = jedis.set(LOCK_KEY, id, params);
                if (&quot;OK&quot;.equals(lock)) {
                    return true;
                }

                // å¦åˆ™å¾ªç¯ç­‰å¾…ï¼Œåœ¨timeoutæ—¶é—´å†…ä»æœªè·å–åˆ°é”ï¼Œåˆ™è·å–å¤±è´¥
                long l = System.currentTimeMillis() - start;
                if (l &gt;= TIMEOUT) {
                    return false;
                }

                // æ¨¡æ‹Ÿè‡ªæ—‹é”
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    /**
     * è§£é”
     *
     * @param id é”Id
     * @return æ˜¯å¦æˆåŠŸè§£é”
     */
    public boolean unlock(String id) {
        try (Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379, 0)) {
            String script =
                    &quot;if redis.call(&#39;get&#39;,KEYS[1]) == ARGV[1] then&quot; +
                            &quot;   return redis.call(&#39;del&#39;,KEYS[1]) &quot; +
                            &quot;else&quot; +
                            &quot;   return 0 &quot; +
                            &quot;end&quot;;

            // ä½¿ç”¨jedis.evalæ‰§è¡ŒLuaè„šæœ¬, ä¿è¯è§£é”çš„åŸå­æ€§
            Object result = jedis.eval(script, Collections.singletonList(LOCK_KEY),
                    Collections.singletonList(id));
            return &quot;1&quot;.equals(result.toString());
        }
    }

}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p><strong>â‘  åŠ é”è¿‡ç¨‹lock()</strong></p>
<p><font color="#f00"><strong>åŠ é”çš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡SETæŒ‡ä»¤æ¥è®¾ç½®å€¼ï¼ŒæˆåŠŸåˆ™è¿”å›ï¼›å¦åˆ™å°±å¾ªç¯ç­‰å¾…ï¼Œåœ¨timeoutæ—¶é—´å†…ä»æœªè·å–åˆ°é”ï¼Œåˆ™è·å–å¤±è´¥</strong></font></p>
<p><strong>â‘¡ è§£é”è¿‡ç¨‹unlock()</strong></p>
<p><font color="#f00"><strong>è§£é”é€šè¿‡<code>jedis.eval</code>æ¥æ‰§è¡Œä¸€æ®µLuaè„šæœ¬, ä¿è¯äº†è§£é”è¿‡ç¨‹çš„åŸå­æ€§; å°†é”çš„Keyé”®å’Œç”Ÿæˆçš„å­—ç¬¦ä¸²å½“åšå‚æ•°ä¼ è¿›æ¥</strong></font></p>
</blockquote>
<ul>
<li><strong>æµ‹è¯•</strong></li>
</ul>
<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¿›è¡Œæµ‹è¯•: å¼€å¯1000ä¸ªçº¿ç¨‹ï¼Œå¯¹countè¿›è¡Œç´¯åŠ </p>
<p>è°ƒç”¨çš„æ—¶å€™ï¼Œå…³é”®æ˜¯å”¯ä¸€å­—ç¬¦ä¸²çš„ç”Ÿæˆ, è¿™é‡Œè€…ä½¿ç”¨çš„æ˜¯Javaè‡ªå¸¦çš„UUIDç”Ÿæˆ, å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Snowflake</code>ç®—æ³•</p>
<blockquote>
<br>

<p><strong>å…·ä½“UUIDç”Ÿæˆç®—æ³•è§:</strong> <a href="https://jasonkayzk.github.io/2020/02/09/UUIDç”Ÿæˆç®—æ³•-UUIDè¿˜æ˜¯snowflake/">UUIDç”Ÿæˆç®—æ³•-UUIDè¿˜æ˜¯snowflake</a></p>
</blockquote>
<p>SinglePointRedisLockTest.java</p>
<pre><code class="java">package top.jasonkayzk.redislock.singlepoint;

import java.util.UUID;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

/**
 * å•èŠ‚ç‚¹Redisåˆ†å¸ƒå¼é”æµ‹è¯•ç±»
 *
 * @author zk
 */
public class SinglePointRedisLockTest {

    SinglePointRedisLock redisLock = new SinglePointRedisLock();

    private int count = 0;

    public static void main(String[] args) throws InterruptedException {
        new SinglePointRedisLockTest().test();
    }

    public void test() throws InterruptedException {
        int clientCount = 1000;

        CountDownLatch latch = new CountDownLatch(clientCount);

        // åˆ›å»ºclientå¤§å°çš„è¿æ¥æ± 
        ExecutorService executorService = Executors.newFixedThreadPool(clientCount);

        long start = System.currentTimeMillis();

        for (var i = 0; i &lt; clientCount; ++i) {
            executorService.execute(() -&gt; {
                //é€šè¿‡Snowflakeç®—æ³•è·å–å”¯ä¸€çš„IDå­—ç¬¦ä¸²
                UUID id = UUID.randomUUID();
                try {
                    redisLock.lock(id.toString());
                    count++;
                } finally {
                    redisLock.unlock(id.toString());
                }
                latch.countDown();
            });
        }

        latch.await();
        long end = System.currentTimeMillis();
        System.out.println(String.format(&quot;æ‰§è¡Œçº¿ç¨‹æ•°:{%s},æ€»è€—æ—¶:{%s},countæ•°ä¸º:{%s}&quot;, clientCount, end - start, count));
        executorService.shutdown();
    }

}

/* Output */
æ‰§è¡Œçº¿ç¨‹æ•°:{1000},æ€»è€—æ—¶:{1759},countæ•°ä¸º:{1000}</code></pre>
<p>è‡³æ­¤ï¼Œå•èŠ‚ç‚¹Redisçš„åˆ†å¸ƒå¼é”çš„å®ç°å°±å·²ç»å®Œæˆäº†, æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯é—®é¢˜ä¹Ÿæ¯”è¾ƒå¤§, æ¯”å¦‚:</p>
<ul>
<li>é”ä¸å…·æœ‰å¯é‡å…¥æ€§</li>
<li>é”è¶…æ—¶é—®é¢˜</li>
<li>â€¦â€¦</li>
</ul>
<hr>
<p><strong>â‘¡ Redisson</strong></p>
<blockquote>
<br>

<p><strong>Redissonä»‹ç»</strong></p>
<p><a href="https://redisson.org/" target="_blank" rel="noopener">Redisson</a>æ˜¯æ¶è®¾åœ¨<a href="http://redis.cn/" target="_blank" rel="noopener">Redis</a>åŸºç¡€ä¸Šçš„ä¸€ä¸ªJavaé©»å†…å­˜æ•°æ®ç½‘æ ¼ï¼ˆIn-Memory Data Gridï¼‰ã€‚å……åˆ†çš„åˆ©ç”¨äº†Redisé”®å€¼æ•°æ®åº“æä¾›çš„ä¸€ç³»åˆ—ä¼˜åŠ¿ï¼ŒåŸºäºJavaå®ç”¨å·¥å…·åŒ…ä¸­å¸¸ç”¨æ¥å£ï¼Œä¸ºä½¿ç”¨è€…æä¾›äº†ä¸€ç³»åˆ—å…·æœ‰åˆ†å¸ƒå¼ç‰¹æ€§çš„å¸¸ç”¨å·¥å…·ç±»ã€‚ä½¿å¾—<strong>åŸæœ¬ä½œä¸ºåè°ƒå•æœºå¤šçº¿ç¨‹å¹¶å‘ç¨‹åºçš„å·¥å…·åŒ…è·å¾—äº†åè°ƒåˆ†å¸ƒå¼å¤šæœºå¤šçº¿ç¨‹å¹¶å‘ç³»ç»Ÿçš„èƒ½åŠ›</strong>ï¼Œå¤§å¤§é™ä½äº†è®¾è®¡å’Œç ”å‘å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„éš¾åº¦ã€‚åŒæ—¶ç»“åˆå„å¯Œç‰¹è‰²çš„åˆ†å¸ƒå¼æœåŠ¡ï¼Œæ›´è¿›ä¸€æ­¥ç®€åŒ–äº†åˆ†å¸ƒå¼ç¯å¢ƒä¸­ç¨‹åºç›¸äº’ä¹‹é—´çš„åä½œ</p>
</blockquote>
<p>ç›¸å¯¹äºJedisè€Œè¨€ï¼ŒRedissonæ›´ä¸ºå¼ºå¤§, å½“ç„¶äº†ï¼Œéšä¹‹è€Œæ¥çš„å°±æ˜¯å®ƒçš„å¤æ‚æ€§</p>
<p>å®ƒé‡Œé¢ä¹Ÿå®ç°äº†åˆ†å¸ƒå¼é”ï¼Œè€Œä¸”åŒ…å«å¤šç§ç±»å‹çš„é”</p>
<p>æ›´å¤šè¯·å‚é˜…<a href="https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨" target="_blank" rel="noopener">åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨</a></p>
<ul>
<li><strong>å¯é‡å…¥é”</strong></li>
</ul>
<p>å…ˆæ¥çœ‹çœ‹Redissonä¸­å¦‚ä½•è°ƒç”¨å¯é‡å…¥é”, è¿™é‡Œä½¿ç”¨çš„æ˜¯å½“å‰çš„æœ€æ–°ç‰ˆ: 3.12.1</p>
<pre><code class="java">package top.jasonkayzk.redislock.redisson;

import org.redisson.Redisson;
import org.redisson.api.RLock;
import org.redisson.api.RedissonClient;
import org.redisson.config.Config;

import java.util.concurrent.CountDownLatch;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

/**
 * Redissonå¯é‡å…¥é”æµ‹è¯•
 *
 * @author zk
 */
public class RedissonReentrantLockTest {

    private int count = 0;

    private static final String LOCK_KEY = &quot;redis_lock&quot;;

    /**
     * é”è¿‡æœŸæ—¶é—´
     */
    protected static final long INTERNAL_LOCK_LEASE_TIME = 30000;

    private static final RedissonClient client;

    static {
        Config config = new Config();
        config.useSingleServer().setAddress(&quot;redis://127.0.0.1:6379&quot;);

        client = Redisson.create(config);
    }

    public static void main(String[] args) throws InterruptedException {
        new RedissonReentrantLockTest().test();
    }

    public void test() throws InterruptedException {
        var clientCount = 1000;

        var latch = new CountDownLatch(clientCount);

        // åˆ›å»ºclientå¤§å°çš„è¿æ¥æ± 
        var executorService = Executors.newFixedThreadPool(clientCount);

        var start = System.currentTimeMillis();

        for (var i = 0; i &lt; clientCount; ++i) {
            executorService.execute(() -&gt; {
                RLock lock = null;
                try {
                    lock = client.getLock(LOCK_KEY);
                    lock.lock(INTERNAL_LOCK_LEASE_TIME, TimeUnit.MILLISECONDS);
                    count++;
                } finally {
                    if (lock != null) {
                        lock.unlock();
                    }
                }
                latch.countDown();
            });
        }

        latch.await();
        long end = System.currentTimeMillis();
        System.out.println(String.format(&quot;æ‰§è¡Œçº¿ç¨‹æ•°:{%s},æ€»è€—æ—¶:{%s},countæ•°ä¸º:{%s}&quot;, clientCount, end - start, count));
        executorService.shutdown();
        client.shutdown();
    }

}</code></pre>
<blockquote>
<br>

<p><strong>ä»£ç è¯´æ˜:</strong></p>
<p>é€šè¿‡é…ç½®è·å–RedissonClientå®¢æˆ·ç«¯çš„å®ä¾‹ï¼Œç„¶å<code>getLock</code>è·å–é”çš„å®ä¾‹ï¼Œè¿›è¡Œæ“ä½œå³å¯</p>
<ul>
<li><strong>è·å–é”å®ä¾‹</strong></li>
</ul>
<p>å…ˆæ¥çœ‹<code>RLock lock = client.getLock(&quot;lock1&quot;);</code>  è¿™å¥ä»£ç å°±æ˜¯ä¸ºäº†è·å–é”çš„å®ä¾‹ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª<code>RedissonLock</code>å¯¹è±¡:</p>
<pre><code class="java">public RLock getLock(String name) {
   return new RedissonLock(connectionManager.getCommandExecutor(), name);
}</code></pre>
<p>åœ¨<code>RedissonLock</code>æ„é€ æ–¹æ³•ä¸­ï¼Œä¸»è¦åˆå§‹åŒ–ä¸€äº›å±æ€§</p>
<pre><code class="java">public RedissonLock(CommandAsyncExecutor commandExecutor, String name) {
   super(commandExecutor, name);
   //å‘½ä»¤æ‰§è¡Œå™¨
   this.commandExecutor = commandExecutor;
   //UUIDå­—ç¬¦ä¸²
   this.id = commandExecutor.getConnectionManager().getId();
   //å†…éƒ¨é”è¿‡æœŸæ—¶é—´
   this.internalLockLeaseTime = commandExecutor.
               getConnectionManager().getCfg().getLockWatchdogTimeout();
   this.entryName = id + &quot;:&quot; + name;
}</code></pre>
<ul>
<li><strong>åŠ é”</strong></li>
</ul>
<p>å½“æˆ‘ä»¬è°ƒç”¨<code>lock</code>æ–¹æ³•ï¼Œå®šä½åˆ°<code>lockInterruptibly</code>, åœ¨è¿™é‡Œï¼Œå®Œæˆäº†åŠ é”çš„é€»è¾‘</p>
<pre><code class="java">public void lockInterruptibly(long leaseTime, TimeUnit unit) throws InterruptedException {

   //å½“å‰çº¿ç¨‹ID
   long threadId = Thread.currentThread().getId();
   //å°è¯•è·å–é”
   Long ttl = tryAcquire(leaseTime, unit, threadId);
   // å¦‚æœttlä¸ºç©ºï¼Œåˆ™è¯æ˜è·å–é”æˆåŠŸ
   if (ttl == null) {
       return;
   }
   //å¦‚æœè·å–é”å¤±è´¥ï¼Œåˆ™è®¢é˜…åˆ°å¯¹åº”è¿™ä¸ªé”çš„channel
   RFuture&lt;RedissonLockEntry&gt; future = subscribe(threadId);
   commandExecutor.syncSubscription(future);

   try {
       while (true) {
           //å†æ¬¡å°è¯•è·å–é”
           ttl = tryAcquire(leaseTime, unit, threadId);
           //ttlä¸ºç©ºï¼Œè¯´æ˜æˆåŠŸè·å–é”ï¼Œè¿”å›
           if (ttl == null) {
               break;
           }
           //ttlå¤§äº0 åˆ™ç­‰å¾…ttlæ—¶é—´åç»§ç»­å°è¯•è·å–
           if (ttl &gt;= 0) {
               getEntry(threadId).getLatch().tryAcquire(ttl, TimeUnit.MILLISECONDS);
           } else {
               getEntry(threadId).getLatch().acquire();
           }
       }
   } finally {
       //å–æ¶ˆå¯¹channelçš„è®¢é˜…
       unsubscribe(future, threadId);
   }
   //get(lockAsync(leaseTime, unit));
}</code></pre>
<p>å¦‚ä¸Šä»£ç ï¼Œå°±æ˜¯åŠ é”çš„å…¨è¿‡ç¨‹:</p>
<ul>
<li><font color="#f00"><strong>å…ˆè°ƒç”¨<code>tryAcquire</code>æ¥è·å–é”ï¼Œå¦‚æœè¿”å›å€¼ttlä¸ºç©ºï¼Œåˆ™è¯æ˜åŠ é”æˆåŠŸï¼Œè¿”å›ï¼›</strong></font></li>
<li><font color="#f00"><strong>å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™è¯æ˜åŠ é”å¤±è´¥; è¿™æ—¶å€™ï¼Œå®ƒä¼šè®¢é˜…è¿™ä¸ªé”çš„Channelï¼Œç­‰å¾…é”é‡Šæ”¾çš„æ¶ˆæ¯ï¼Œç„¶åé‡æ–°å°è¯•è·å–é”</strong></font></li>
</ul>
<p>Redissonå¯é‡å…¥é”æµç¨‹å›¾:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/13230160-6c08ae68fe9a796f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/815" alt="Redissonå¯é‡å…¥é”æµç¨‹å›¾.png"></p>
<ul>
<li><strong>è·å–é”</strong></li>
</ul>
<p>è·å–é”çš„è¿‡ç¨‹å°±è¦çœ‹<code>tryAcquire</code>æ–¹æ³•</p>
<p>åœ¨è¿™é‡Œï¼Œå®ƒæœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼Œä¸€ç§æ˜¯å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„é”ï¼Œä¸€ç§æ˜¯ä¸å¸¦è¿‡æœŸæ—¶é—´çš„é”</p>
<pre><code class="java">private &lt;T&gt; RFuture&lt;Long&gt; tryAcquireAsync(long leaseTime, TimeUnit unit, final long threadId) {

   //å¦‚æœå¸¦æœ‰è¿‡æœŸæ—¶é—´ï¼Œåˆ™æŒ‰ç…§æ™®é€šæ–¹å¼è·å–é”
   if (leaseTime != -1) {
       return tryLockInnerAsync(leaseTime, unit, threadId, RedisCommands.EVAL_LONG);
   }

   //å…ˆæŒ‰ç…§30ç§’çš„è¿‡æœŸæ—¶é—´æ¥æ‰§è¡Œè·å–é”çš„æ–¹æ³•
   RFuture&lt;Long&gt; ttlRemainingFuture = tryLockInnerAsync(
       commandExecutor.getConnectionManager().getCfg().getLockWatchdogTimeout(),
       TimeUnit.MILLISECONDS, threadId, RedisCommands.EVAL_LONG);

   //å¦‚æœè¿˜æŒæœ‰è¿™ä¸ªé”ï¼Œåˆ™å¼€å¯å®šæ—¶ä»»åŠ¡ä¸æ–­åˆ·æ–°è¯¥é”çš„è¿‡æœŸæ—¶é—´
   ttlRemainingFuture.addListener(new FutureListener&lt;Long&gt;() {
       @Override
       public void operationComplete(Future&lt;Long&gt; future) throws Exception {
           if (!future.isSuccess()) {
               return;
           }

           Long ttlRemaining = future.getNow();
           // lock acquired
           if (ttlRemaining == null) {
               scheduleExpirationRenewal(threadId);
           }
       }
   });
   return ttlRemainingFuture;
}</code></pre>
<p>æ¥ç€å¾€ä¸‹çœ‹ï¼Œ<code>tryLockInnerAsync</code>æ–¹æ³•æ˜¯çœŸæ­£æ‰§è¡Œè·å–é”çš„é€»è¾‘ï¼Œå®ƒæ˜¯ä¸€æ®µLUAè„šæœ¬ä»£ç ã€‚åœ¨è¿™é‡Œï¼Œå®ƒä½¿ç”¨çš„æ˜¯hashæ•°æ®ç»“æ„</p>
<pre><code class="java">&lt;T&gt; RFuture&lt;T&gt; tryLockInnerAsync(long leaseTime, TimeUnit unit,     
                           long threadId, RedisStrictCommand&lt;T&gt; command) {

       //è¿‡æœŸæ—¶é—´
       internalLockLeaseTime = unit.toMillis(leaseTime);

       return commandExecutor.evalWriteAsync(getName(), LongCodec.INSTANCE, command,
                 //å¦‚æœé”ä¸å­˜åœ¨ï¼Œåˆ™é€šè¿‡hsetè®¾ç½®å®ƒçš„å€¼ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´
                 &quot;if (redis.call(&#39;exists&#39;, KEYS[1]) == 0) then &quot; +
                     &quot;redis.call(&#39;hset&#39;, KEYS[1], ARGV[2], 1); &quot; +
                     &quot;redis.call(&#39;pexpire&#39;, KEYS[1], ARGV[1]); &quot; +
                     &quot;return nil; &quot; +
                 &quot;end; &quot; +
                 //å¦‚æœé”å·²å­˜åœ¨ï¼Œå¹¶ä¸”é”çš„æ˜¯å½“å‰çº¿ç¨‹ï¼Œåˆ™é€šè¿‡hincrbyç»™æ•°å€¼é€’å¢1
                 &quot;if (redis.call(&#39;hexists&#39;, KEYS[1], ARGV[2]) == 1) then &quot; +
                     &quot;redis.call(&#39;hincrby&#39;, KEYS[1], ARGV[2], 1); &quot; +
                     &quot;redis.call(&#39;pexpire&#39;, KEYS[1], ARGV[1]); &quot; +
                     &quot;return nil; &quot; +
                 &quot;end; &quot; +
                 //å¦‚æœé”å·²å­˜åœ¨ï¼Œä½†å¹¶éæœ¬çº¿ç¨‹ï¼Œåˆ™è¿”å›è¿‡æœŸæ—¶é—´ttl
                 &quot;return redis.call(&#39;pttl&#39;, KEYS[1]);&quot;,
       Collections.&lt;Object&gt;singletonList(getName()), 
               internalLockLeaseTime, getLockName(threadId));
   }</code></pre>
<p>è¿™æ®µLUAä»£ç çœ‹èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œæœ‰ä¸‰ä¸ªåˆ¤æ–­ï¼š</p>
<ul>
<li><strong>é€šè¿‡existsåˆ¤æ–­ï¼Œå¦‚æœé”ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®å€¼å’Œè¿‡æœŸæ—¶é—´ï¼ŒåŠ é”æˆåŠŸ</strong></li>
<li><strong>é€šè¿‡hexistsåˆ¤æ–­ï¼Œå¦‚æœé”å·²å­˜åœ¨ï¼Œå¹¶ä¸”é”çš„æ˜¯å½“å‰çº¿ç¨‹ï¼Œåˆ™è¯æ˜æ˜¯é‡å…¥é”ï¼ŒåŠ é”æˆåŠŸ</strong></li>
<li><strong>å¦‚æœé”å·²å­˜åœ¨ï¼Œä½†é”çš„ä¸æ˜¯å½“å‰çº¿ç¨‹ï¼Œåˆ™è¯æ˜æœ‰å…¶ä»–çº¿ç¨‹æŒæœ‰é”ã€‚è¿”å›å½“å‰é”çš„è¿‡æœŸæ—¶é—´ï¼ŒåŠ é”å¤±è´¥</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/13230160-2046b77640392660.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/913" alt="Redissonå¯é‡å…¥é”æµç¨‹å›¾2.png"></p>
<p>åŠ é”æˆåŠŸåï¼Œåœ¨redisçš„å†…å­˜æ•°æ®ä¸­ï¼Œå°±æœ‰ä¸€æ¡hashç»“æ„çš„æ•°æ®: </p>
<ul>
<li><strong>keyä¸ºé”çš„åç§°ï¼›fieldä¸ºéšæœºå­—ç¬¦ä¸²+çº¿ç¨‹IDï¼›å€¼ä¸º1</strong></li>
<li><strong>å¦‚æœåŒä¸€çº¿ç¨‹å¤šæ¬¡è°ƒç”¨<code>lock</code>æ–¹æ³•ï¼Œå€¼é€’å¢1</strong></li>
</ul>
<pre><code class="mysql">127.0.0.1:6379&gt; hgetall lock1
1) &quot;b5ae0be4-5623-45a5-8faa-ab7eb167ce87:1&quot;
2) &quot;1&quot;</code></pre>
<ul>
<li><strong>è§£é”</strong></li>
</ul>
<p>æˆ‘ä»¬é€šè¿‡è°ƒç”¨<code>unlock</code>æ–¹æ³•æ¥è§£é”</p>
<pre><code class="java">public RFuture&lt;Void&gt; unlockAsync(final long threadId) {
   final RPromise&lt;Void&gt; result = new RedissonPromise&lt;Void&gt;();

   //è§£é”æ–¹æ³•
   RFuture&lt;Boolean&gt; future = unlockInnerAsync(threadId);

   future.addListener(new FutureListener&lt;Boolean&gt;() {
       @Override
       public void operationComplete(Future&lt;Boolean&gt; future) throws Exception {
           if (!future.isSuccess()) {
               cancelExpirationRenewal(threadId);
               result.tryFailure(future.cause());
               return;
           }
           //è·å–è¿”å›å€¼
           Boolean opStatus = future.getNow();
           //å¦‚æœè¿”å›ç©ºï¼Œåˆ™è¯æ˜è§£é”çš„çº¿ç¨‹å’Œå½“å‰é”ä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼ŒæŠ›å‡ºå¼‚å¸¸
           if (opStatus == null) {
               IllegalMonitorStateException cause = 
                   new IllegalMonitorStateException(&quot;
                       attempt to unlock lock, not locked by current thread by node id: &quot;
                       + id + &quot; thread-id: &quot; + threadId);
               result.tryFailure(cause);
               return;
           }
           //è§£é”æˆåŠŸï¼Œå–æ¶ˆåˆ·æ–°è¿‡æœŸæ—¶é—´çš„é‚£ä¸ªå®šæ—¶ä»»åŠ¡
           if (opStatus) {
               cancelExpirationRenewal(null);
           }
           result.trySuccess(null);
       }
   });

   return result;
}</code></pre>
<p>ç„¶åæˆ‘ä»¬å†çœ‹<code>unlockInnerAsync</code>æ–¹æ³•ã€‚è¿™é‡Œä¹Ÿæ˜¯ä¸€æ®µLUAè„šæœ¬ä»£ç </p>
<pre><code class="java">protected RFuture&lt;Boolean&gt; unlockInnerAsync(long threadId) {
   return commandExecutor.evalWriteAsync(getName(), LongCodec.INSTANCE, EVAL,

           //å¦‚æœé”å·²ç»ä¸å­˜åœ¨ï¼Œ å‘å¸ƒé”é‡Šæ”¾çš„æ¶ˆæ¯
           &quot;if (redis.call(&#39;exists&#39;, KEYS[1]) == 0) then &quot; +
               &quot;redis.call(&#39;publish&#39;, KEYS[2], ARGV[1]); &quot; +
               &quot;return 1; &quot; +
           &quot;end;&quot; +
           //å¦‚æœé‡Šæ”¾é”çš„çº¿ç¨‹å’Œå·²å­˜åœ¨é”çš„çº¿ç¨‹ä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œè¿”å›null
           &quot;if (redis.call(&#39;hexists&#39;, KEYS[1], ARGV[3]) == 0) then &quot; +
               &quot;return nil;&quot; +
           &quot;end; &quot; +
           //é€šè¿‡hincrbyé€’å‡1çš„æ–¹å¼ï¼Œé‡Šæ”¾ä¸€æ¬¡é”
           //è‹¥å‰©ä½™æ¬¡æ•°å¤§äº0 ï¼Œåˆ™åˆ·æ–°è¿‡æœŸæ—¶é—´
           &quot;local counter = redis.call(&#39;hincrby&#39;, KEYS[1], ARGV[3], -1); &quot; +
           &quot;if (counter &gt; 0) then &quot; +
               &quot;redis.call(&#39;pexpire&#39;, KEYS[1], ARGV[2]); &quot; +
               &quot;return 0; &quot; +
           //å¦åˆ™è¯æ˜é”å·²ç»é‡Šæ”¾ï¼Œåˆ é™¤keyå¹¶å‘å¸ƒé”é‡Šæ”¾çš„æ¶ˆæ¯
           &quot;else &quot; +
               &quot;redis.call(&#39;del&#39;, KEYS[1]); &quot; +
               &quot;redis.call(&#39;publish&#39;, KEYS[2], ARGV[1]); &quot; +
               &quot;return 1; &quot;+
           &quot;end; &quot; +
           &quot;return nil;&quot;,
   Arrays.&lt;Object&gt;asList(getName(), getChannelName()), 
       LockPubSub.unlockMessage, internalLockLeaseTime, getLockName(threadId));

}</code></pre>
<p>å¦‚ä¸Šä»£ç ï¼Œå°±æ˜¯é‡Šæ”¾é”çš„é€»è¾‘ã€‚åŒæ ·çš„ï¼Œå®ƒä¹Ÿæ˜¯æœ‰ä¸‰ä¸ªåˆ¤æ–­ï¼š</p>
<ul>
<li><strong>å¦‚æœé”å·²ç»ä¸å­˜åœ¨ï¼Œé€šè¿‡publishå‘å¸ƒé”é‡Šæ”¾çš„æ¶ˆæ¯ï¼Œè§£é”æˆåŠŸ</strong></li>
<li><strong>å¦‚æœè§£é”çš„çº¿ç¨‹å’Œå½“å‰é”çš„çº¿ç¨‹ä¸æ˜¯åŒä¸€ä¸ªï¼Œè§£é”å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸</strong></li>
<li><strong>é€šè¿‡hincrbyé€’å‡1ï¼Œå…ˆé‡Šæ”¾ä¸€æ¬¡é”ã€‚è‹¥å‰©ä½™æ¬¡æ•°è¿˜å¤§äº0ï¼Œåˆ™è¯æ˜å½“å‰é”æ˜¯é‡å…¥é”ï¼Œåˆ·æ–°è¿‡æœŸæ—¶é—´ï¼›è‹¥å‰©ä½™æ¬¡æ•°å°äº0ï¼Œåˆ é™¤keyå¹¶å‘å¸ƒé”é‡Šæ”¾çš„æ¶ˆæ¯ï¼Œè§£é”æˆåŠŸ</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/13230160-34c1a3f8ec81a652.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/876" alt="Redissonå¯é‡å…¥é”æµç¨‹å›¾3.png"></p>
</blockquote>
<p>è‡³æ­¤ï¼ŒRedissonä¸­çš„å¯é‡å…¥é”çš„é€»è¾‘ï¼Œå°±åˆ†æå®Œäº†</p>
<p>ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„ä¸¤ç§å®ç°æ–¹å¼éƒ½æ˜¯é’ˆå¯¹å•æœºRediså®ä¾‹è€Œè¿›è¡Œçš„, å¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªRediså®ä¾‹ï¼Œè¯·å‚é˜…<strong>Redlockç®—æ³•</strong></p>
<p>è¯¥ç®—æ³•çš„å…·ä½“å†…å®¹ï¼Œè¯·å‚è€ƒ<a href="http://redis.cn/topics/distlock.html" target="_blank" rel="noopener">http://redis.cn/topics/distlock.html</a></p>
<blockquote>
<br>

<p><strong>æ–‡ç« è½¬è‡ª:</strong> <a href="https://www.jianshu.com/p/47fd7f86c848" target="_blank" rel="noopener">åˆ†å¸ƒå¼é”ä¹‹Rediså®ç°</a></p>
</blockquote>
<br>

<h3 id="Rediså®ç°åˆ†å¸ƒå¼Session"><a href="#Rediså®ç°åˆ†å¸ƒå¼Session" class="headerlink" title="Rediså®ç°åˆ†å¸ƒå¼Session"></a>Rediså®ç°åˆ†å¸ƒå¼Session</h3><p>è§: <a href="https://jasonkayzk.github.io/2020/02/10/Rediså®ç°åˆ†å¸ƒå¼Session/">Rediså®ç°åˆ†å¸ƒå¼Session</a></p>
<br>

<h3 id="Rediså®ç°SSO"><a href="#Rediså®ç°SSO" class="headerlink" title="Rediså®ç°SSO"></a>Rediså®ç°SSO</h3><p>è§: <a href="https://jasonkayzk.github.io/2020/02/10/Rediså®ç°SSO/">Rediså®ç°SSO</a></p>
<br>

<h3 id="RedisæŒä¹…åŒ–"><a href="#RedisæŒä¹…åŒ–" class="headerlink" title="RedisæŒä¹…åŒ–"></a>RedisæŒä¹…åŒ–</h3><p>Redisæä¾›ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼šRDBï¼ˆredis databaseï¼‰å’ŒAOFï¼ˆappend of fileï¼‰</p>
<p><strong>â‘  RDB</strong></p>
<p>åœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…ï¼Œå°†<strong>å†…å­˜ä¸­çš„æ•°æ®ä½œä¸ºä¸€ä¸ªå¿«ç…§æ–‡ä»¶ï¼ˆsnapshotï¼‰å†™å…¥åˆ°ç£ç›˜</strong>ï¼Œè¯»å–çš„æ—¶å€™ä¹Ÿæ˜¯<strong>ç›´æ¥è¯»å–snapshotæ–‡ä»¶åˆ°å†…å­˜ä¸­</strong></p>
<p><img src="http://img1.tuicool.com/NjYjYvF.png!web?_=6182478" alt="RDB.png"></p>
<ul>
<li><strong>æŒä¹…åŒ–è¿‡ç¨‹ï¼š</strong>rediså•ç‹¬åˆ›å»º(é€šè¿‡æ“ä½œç³»ç»Ÿçš„forkå‡½æ•°)ä¸€ä¸ªè¿›ç¨‹æ¥æŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…ä¸Šæ¬¡æŒä¹…åŒ–ç»“æŸåï¼Œä¼šå°†è¯¥ä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–æ–‡ä»¶ï¼Œæ¯”aofé«˜æ•ˆï¼Œä½†æ˜¯æœ€åä¸€æ¬¡æ•°æ®å¯èƒ½ä¼šä¸¢å¤±</li>
<li><strong>Forkï¼š</strong>åœ¨linuxä¸­ï¼Œfork()ä¼šäº§ç”Ÿä¸€ä¸ªè·Ÿä¸»è¿›ç¨‹ä¸€æ ·çš„å­è¿›ç¨‹ï¼Œå‡ºäºæ•ˆç‡è€ƒè™‘ï¼Œä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹ä¼šå…¬ç”¨ä¸€æ®µç‰©ç†å†…å­˜ï¼Œå½“å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæ‰ä¼šæŠŠä¸»è¿›ç¨‹å¤åˆ¶ä¸€ä»½ç»™å­è¿›ç¨‹</li>
<li><strong>Rediså¤‡ä»½çš„æ–‡ä»¶ï¼š</strong>åœ¨redis.confä¸­è®¾ç½®ï¼Œdbfilenameé»˜è®¤ä¸ºï¼šdump.rdb</li>
<li><strong>RDBä¿å­˜ç­–ç•¥ï¼š</strong><ul>
<li>save 900 1: åœ¨900ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰1ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œåˆ™dumpå†…å­˜å¿«ç…§</li>
<li>save 300 10: åœ¨300ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œåˆ™dumpå†…å­˜å¿«ç…§</li>
<li>save 60 10000: åœ¨60ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10000ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œåˆ™dumpå†…å­˜å¿«ç…§</li>
</ul>
</li>
<li><strong>RDBçš„å¤‡ä»½ï¼š</strong><ul>
<li>config get dir å¾—åˆ°å¤‡ä»½çš„æ–‡ä»¶å¤¹</li>
<li>å¤åˆ¶å¤‡ä»½æ–‡ä»¶</li>
</ul>
</li>
<li><strong>RDBæ¢å¤ï¼š</strong><ul>
<li>å…³é—­redis</li>
<li>å°†å¤‡ä»½æ–‡ä»¶å¤åˆ¶åˆ°å·¥ä½œç›®å½•ä¸‹</li>
<li>å¯åŠ¨redisï¼Œè‡ªåŠ¨åŠ è½½</li>
</ul>
</li>
</ul>
<hr>
<p><strong>â‘¡ AOF</strong></p>
<p>ä»¥æ—¥å¿—å½¢å¼<strong>è®°å½•æ¯ä¸ªå†™æ“ä½œ</strong>ï¼Œå¯åŠ¨æ—¶é€šè¿‡æ—¥å¿—æ¢å¤æ“ä½œ</p>
<p><img src="http://img2.tuicool.com/YrqaY3f.png!web?_=6182478" alt="AOF.png"></p>
<ul>
<li>å¼€å¯AOFï¼šé»˜è®¤ä¸å¼€å¯ï¼Œè¿›å…¥redis.confæ‰¾åˆ°<code>appendonly yes</code>æ‰“å¼€</li>
<li>ä¿®å¤AOFï¼šredis-check-aof â€“fix appendonly.aof</li>
<li>åŒæ­¥é¢‘ç‡ï¼šæ¯ç§’è®°å½•ä¸€æ¬¡ï¼Œå¦‚æœå®•æœºè¯¥ç§’è®°å¯èƒ½å¤±æ•ˆ</li>
<li>Rewriteï¼šbgrewriteaof å› ä¸ºæ—¥å¿—æ˜¯è¿½åŠ æ–¹å¼ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œå½“è¶…è¿‡äº†è®¾ç½®çš„é˜ˆå€¼æ—¶ï¼Œæ—¥å¿—æ–‡ä»¶ä¼šå‹ç¼©ï¼Œä¿ç•™ä»…å¯ä»¥æ¢å¤çš„æ—¥å¿—</li>
</ul>
<hr>
<p><strong>â‘¢ RDBå’ŒAOFå¯¹æ¯”</strong></p>
<ul>
<li><p>RDBä¼˜ç‚¹</p>
<p>æ•´ä¸ªRedisæ•°æ®åº“å°†åªåŒ…å«ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¯èƒ½æ‰“ç®—æ¯ä¸ªå°æ—¶å½’æ¡£ä¸€æ¬¡æœ€è¿‘24å°æ—¶çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜è¦æ¯å¤©å½’æ¡£ä¸€æ¬¡æœ€è¿‘30å¤©çš„æ•°æ®ã€‚é€šè¿‡è¿™æ ·çš„å¤‡ä»½ç­–ç•¥ï¼Œä¸€æ—¦ç³»ç»Ÿå‡ºç°ç¾éš¾æ€§æ•…éšœï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“çš„è¿›è¡Œæ¢å¤</p>
<ul>
<li>èŠ‚çœç£ç›˜ç©ºé—´</li>
<li>æ¢å¤é€Ÿåº¦å¿«</li>
<li>RDBçš„å¯åŠ¨æ•ˆç‡æ›´é«˜</li>
</ul>
</li>
<li><p>RDBç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸€æ®µæ—¶é—´ä¿å­˜ä¸€æ¬¡å¿«ç…§ï¼Œå®•æœºæ—¶æœ€åä¸€æ¬¡å¯èƒ½æ²¡æœ‰ä¿å­˜</li>
<li>æ•°æ®å¤ªå¤§æ—¶ï¼Œæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½: ç”±äºRDBæ˜¯é€šè¿‡forkå­è¿›ç¨‹æ¥ååŠ©å®Œæˆæ•°æ®æŒä¹…åŒ–å·¥ä½œçš„ï¼Œå› æ­¤ï¼Œå¦‚æœå½“æ•°æ®é›†è¾ƒå¤§æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªæœåŠ¡å™¨åœæ­¢æœåŠ¡å‡ ç™¾æ¯«ç§’ï¼Œç”šè‡³æ˜¯1ç§’é’Ÿ</li>
</ul>
</li>
<li><p>AOFä¼˜ç‚¹:</p>
<p>æ›´é«˜çš„æ•°æ®å®‰å…¨æ€§ï¼Œå³æ•°æ®æŒä¹…æ€§ã€‚Redisä¸­æä¾›äº†ä¸‰ç§åŒæ­¥ç­–ç•¥ï¼Œå³æ¯ç§’åŒæ­¥ã€æ¯ä¿®æ”¹åŒæ­¥å’Œä¸åŒæ­¥</p>
<p>äº‹å®ä¸Šï¼Œæ¯ç§’åŒæ­¥ä¹Ÿæ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œå…¶æ•ˆç‡ä¹Ÿæ˜¯éå¸¸é«˜çš„ï¼Œæ‰€å·®çš„æ˜¯ä¸€æ—¦ç³»ç»Ÿå‡ºç°å®•æœºç°è±¡ï¼Œé‚£ä¹ˆè¿™ä¸€ç§’é’Ÿä¹‹å†…ä¿®æ”¹çš„æ•°æ®å°†ä¼šä¸¢å¤±ã€‚è€Œæ¯ä¿®æ”¹åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºåŒæ­¥æŒä¹…åŒ–ï¼Œå³æ¯æ¬¡å‘ç”Ÿçš„æ•°æ®å˜åŒ–éƒ½ä¼šè¢«ç«‹å³è®°å½•åˆ°ç£ç›˜ä¸­, è¿™ç§æ–¹å¼åœ¨æ•ˆç‡ä¸Šæ˜¯æœ€ä½çš„</p>
<ul>
<li>å¤‡ä»½æœºåˆ¶æ›´åŠ ç¨³å¥</li>
<li>å¯è¯»çš„æ—¥å¿—æ–‡ä»¶ï¼Œé€šè¿‡aofæ¢å¤æ›´åŠ ç¨³å¥</li>
<li>å¯ä»¥å¤„ç†å¤±è¯¯: æœ¬æ¬¡æ“ä½œåªæ˜¯å†™å…¥äº†ä¸€åŠæ•°æ®å°±å‡ºç°äº†ç³»ç»Ÿå´©æºƒé—®é¢˜ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œåœ¨Redisä¸‹ä¸€æ¬¡å¯åŠ¨ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡redis-check-aofå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜</li>
<li>å¦‚æœæ—¥å¿—è¿‡å¤§ï¼ŒRediså¯ä»¥è‡ªåŠ¨å¯ç”¨rewriteæœºåˆ¶ã€‚å³Redisä»¥appendæ¨¡å¼ä¸æ–­çš„å°†ä¿®æ”¹æ•°æ®å†™å…¥åˆ°è€çš„ç£ç›˜æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶Redisè¿˜ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç”¨äºè®°å½•æ­¤æœŸé—´æœ‰å“ªäº›ä¿®æ”¹å‘½ä»¤è¢«æ‰§è¡Œã€‚å› æ­¤åœ¨è¿›è¡Œrewriteåˆ‡æ¢æ—¶å¯ä»¥æ›´å¥½çš„ä¿è¯æ•°æ®å®‰å…¨æ€§</li>
</ul>
</li>
<li><p>AOFç¼ºç‚¹ï¼š</p>
<ul>
<li>æ¯”RDBæ›´å ç£ç›˜</li>
<li>å¤‡ä»½é€Ÿåº¦, æ¢å¤é€Ÿåº¦éƒ½è¾ƒæ…¢</li>
<li>æ¯æ¬¡éƒ½åŒæ­¥æ—¥å¿—ï¼Œæœ‰æ€§èƒ½å‹åŠ›</li>
</ul>
</li>
</ul>
<blockquote>
  <br>

<p>  <strong>ä½¿ç”¨åœºæ™¯:</strong></p>
<p>  äºŒè€…é€‰æ‹©çš„æ ‡å‡†ï¼Œå°±æ˜¯çœ‹:</p>
<ul>
<li><p>æ„¿æ„ç‰ºç‰²ä¸€äº›æ€§èƒ½ï¼Œæ¢å–æ›´é«˜çš„ç¼“å­˜ä¸€è‡´æ€§ï¼ˆAOFï¼‰</p>
</li>
<li><p>æ„¿æ„å†™æ“ä½œé¢‘ç¹çš„æ—¶å€™ï¼Œä¸å¯ç”¨å¤‡ä»½æ¥æ¢å–æ›´é«˜çš„æ€§èƒ½ï¼Œå¾…æ‰‹åŠ¨è¿è¡Œsaveçš„æ—¶å€™ï¼Œå†åšå¤‡ä»½ï¼ˆRDBï¼‰</p>
<p>ç”Ÿäº§ç¯å¢ƒå…¶å®æ›´å¤šéƒ½æ˜¯äºŒè€…ç»“åˆä½¿ç”¨çš„</p>
</li>
</ul>
</blockquote>
<br>

<h3 id="Redisæ¶æ„æ¨¡å¼"><a href="#Redisæ¶æ„æ¨¡å¼" class="headerlink" title="Redisæ¶æ„æ¨¡å¼"></a>Redisæ¶æ„æ¨¡å¼</h3><p>ä¸€ä¸»ä¸€ä»[Master-Slave], Redisé›†ç¾¤[Redis-Cluster], å“¨å…µæ¨¡å¼[Redis-Sentinel]</p>
<br>

<h3 id="Redisé›†ç¾¤-å¦‚ä½•ä¿è¯åŒæ­¥â€¦"><a href="#Redisé›†ç¾¤-å¦‚ä½•ä¿è¯åŒæ­¥â€¦" class="headerlink" title="Redisé›†ç¾¤(å¦‚ä½•ä¿è¯åŒæ­¥â€¦)"></a>Redisé›†ç¾¤(å¦‚ä½•ä¿è¯åŒæ­¥â€¦)</h3><br>

<h3 id="ç¼“å­˜ç®—æ³•-LRUç­‰"><a href="#ç¼“å­˜ç®—æ³•-LRUç­‰" class="headerlink" title="ç¼“å­˜ç®—æ³•(LRUç­‰)"></a>ç¼“å­˜ç®—æ³•(LRUç­‰)</h3><br>

<h3 id="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ"><a href="#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ" class="headerlink" title="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ"></a>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Ÿä»€ä¹ˆæ˜¯å“ˆå¸Œæ§½ï¼Ÿ</h3><br>

<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…?"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿä½•å¦‚é¿å…?</h3><br>

<h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><p>æ–‡ç« å‚è€ƒ:</p>
<ul>
<li><a href="https://blog.csdn.net/qq_24641227/article/details/94591693" target="_blank" rel="noopener">Redisçš„å„ç§ç”¨é€”ä»¥åŠä½¿ç”¨åœºæ™¯</a></li>
<li><a href="https://blog.csdn.net/xpsallwell/article/details/84030285" target="_blank" rel="noopener">Redisçš„äº”ç§æ•°æ®ç»“æ„åŸç†åˆ†æ</a></li>
<li><a href="https://blog.csdn.net/wufaliang003/article/details/82016385" target="_blank" rel="noopener">Redisçš„3ä¸ªé«˜çº§æ•°æ®ç»“æ„</a></li>
<li><a href="https://blog.csdn.net/harleylau/article/details/86246806" target="_blank" rel="noopener">å¦‚ä½•å¤„ç†redisé›†ç¾¤ä¸­çš„hot Key</a></li>
<li><a href="https://www.jianshu.com/p/47fd7f86c848" target="_blank" rel="noopener">åˆ†å¸ƒå¼é”ä¹‹Rediså®ç°</a></li>
</ul>

  </article>

  <div id="like-container" style="text-align: center">
    <div class="like-feed">
      <p>è§‰å¾—æœ¬æ–‡ä¸é”™å°±ç‚¹ä¸ª<span>â™¥</span>å†èµ°å§~</p>
      <div class="like-img">
        <div class="like-heart" id="like" rel="like"></div>
        <div class="like-count" id="like-count"></div>
      </div>
    </div>
  </div>

  <!-- æ–‡ç« åˆ†äº« -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
  <div class="social-share" data-mode="prepend" data-disabled="tencent,diandian"></div>
  <br>

  
  
<div class="nexmoe-post-copyright">
<i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
<strong>æœ¬æ–‡ä½œè€…ï¼š</strong>Jasonkay<br>
<strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://jasonkayzk.github.io/2020/02/05/Redisé¢è¯•ç›¸å…³é—®é¢˜/" title="https://jasonkayzk.github.io/2020/02/05/Redisé¢è¯•ç›¸å…³é—®é¢˜/" target="_blank" rel="noopener">https://jasonkayzk.github.io/2020/02/05/Redisé¢è¯•ç›¸å…³é—®é¢˜/</a><br>

  <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯

</div>


  

  <!-- å¢åŠ é¢è¯•ç‚¹å‡»æ ‡é¢˜æ‰æ˜¾ç¤ºç­”æ¡ˆç­‰æ•ˆæœ! -->
  <!-- <script type="text/javascript">
    $(".question").click(function () {
      var a = $(".answer").eq($(".question").index(this));
      a.is(".answer_shown") ? a.animate({ 'opacity': '1' }, 800).removeClass("answer_shown") : a.animate({ 'opacity': '0' }, 800).addClass("answer_shown");
    });
  </script> -->
  <!-- <style>
    .answer_shown {
      opacity: 0;
    }
  </style> -->

  <!-- åŠ è½½åšå®¢ç‚¹èµåŠŸèƒ½ -->
  <script>
    function ajax(options) {
      return new Promise(function (resolve, reject) {
        $.ajax(options).done(resolve).fail(reject);
      });
    }

    var docName = $('meta[property="og:title"]').attr('content');
    
    // è·³è¿‡localhost
    if (location.hostname !== 'localhost') {
      // åˆå§‹åŒ–
      ajax({
        url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
        type: 'post',
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({
          "actionId": "get",
          "docName": docName
        })
      }).then(
        function fulfillHandler(data) {
          $('#like-count').text(data.likeNum);
        },
        function rejectHandler(jqXHR, textStatus, errorThrown) {
          $('#like-count').text(0);
          console.log(jqXHR, textStatus, errorThrown);
        }
      ).catch(function errorHandler(error) {
        $('#like-count').text(0);
        console.log(error);
      });

      $(document).ready(function () {
        $(".like-heart").on("click", function () {
          var heart = $(this);
          var likeCount = $("#like-count" + heart.attr("id").split("like")[1]);
          var intCount = parseInt(likeCount.html());
          var rel = heart.attr("rel");

          if (rel === "like") {
            likeCount.html(intCount + 1);
            heart.addClass("like-heartAnimation").attr("rel", "unlike");
            ajax({
              url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
              type: 'post',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({
                "actionId": "add",
                "docName": docName
              })
            }).catch(function errorHandler(error) {
              console.log(error);
            });
          } else {
            likeCount.html(intCount - 1);
            heart.removeClass("like-heartAnimation").attr("rel", "like");
            heart.css("background-position", "left");
            ajax({
              url: "https://service-rvqf6dam-1257829547.gz.apigw.tencentcs.com/blog_like/",
              type: 'post',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify({
                "actionId": "subtract",
                "docName": docName
              })
            }).catch(function errorHandler(error) {
              console.log(error);
            });
          }
        }).on("mouseleave", function () {
          $(this).css("background-position", "");
        });
      });
    }
  </script>
  <style>
    #like-container {
      margin: 0 auto;
      width: 100%;
    }

    .like-img {
      width: 200px;
      height: 100px;
      display: inline-block;
    }

    .like-heart {
      float: left;
      background: url(/images/web_heart_animation.png);
      background-position: left;
      background-repeat: no-repeat;
      height: 50px;
      width: 120px;
      left: -14px;
      background-size: 2900%;
    }

    .like-count {
      float: left;
      font-family: 'Georgia', Times, Times New Roman, serif;
      font-size: 35px;
      color: #999999;
      text-align: left;
      height: 50px;
      width: 50px;
      line-height: 44px;
    }

    .like-heart:hover,
    .like-heart:focus {
      background-position: right;
    }

    @-webkit-keyframes heartBlast {
      0% {
        background-position: left;
      }

      100% {
        background-position: right;
      }
    }

    @keyframes heartBlast {
      0% {
        background-position: left;
      }

      100% {
        background-position: right;
      }
    }

    .like-heartAnimation {
      display: inline-block;
      -webkit-animation-name: heartBlast;
      animation-name: heartBlast;
      -webkit-animation-duration: .8s;
      animation-duration: .8s;
      -webkit-animation-iteration-count: 1;
      animation-iteration-count: 1;
      -webkit-animation-timing-function: steps(28);
      animation-timing-function: steps(28);
      background-position: right;
    }

    .like-feed {
      height: 90px;
      margin-bottom: 20px;
      text-align: center
    }

    .like-feed p {
      font-family: 'microsoft yahei', 'Georgia';
      font-size: 25px;
    }

    .like-feed span {
      font-size: 30px;
      color: #D33115;
    }
  </style>

  <section class="nexmoe-comment">
    <div class="utterances"></div>
<style>
    .v .vwrap {
      border: 1px dashed #c4bfbf
    }
  
    .v .vwrap .vheader .vinput {
      border-bottom: 1px dashed #c4bfbf
    }
</style>
<script src="https://utteranc.es/client.js" repo="JasonkayZK/JasonkayZK.github.io" issue-term="title" label="commentâœ¨ğŸ’¬âœ¨" theme="github-light" crossorigin="anonymous" async>
</script>

</section>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/app.js?v=1770725351901"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>




  
    <!-- Google Analytics -->
<script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'G-1NWK4EEKDF', 'auto');
    ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>






    <!-- baidu Analytics -->
<script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5f5ec71a32c11ff54dff64d0341017b0";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>

<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<!-- 
<script type="text/javascript">
  !function (e, t, a) { function n() { c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), o(), r() } function r() { for (var e = 0; e < d.length; e++)d[e].alpha <= 0 ? (t.body.removeChild(d[e].el), d.splice(e, 1)) : (d[e].y--, d[e].scale += .004, d[e].alpha -= .013, d[e].el.style.cssText = "left:" + d[e].x + "px;top:" + d[e].y + "px;opacity:" + d[e].alpha + ";transform:scale(" + d[e].scale + "," + d[e].scale + ") rotate(45deg);background:" + d[e].color + ";z-index:99999"); requestAnimationFrame(r) } function o() { var t = "function" == typeof e.onclick && e.onclick; e.onclick = function (e) { t && t(), i(e) } } function i(e) { var a = t.createElement("div"); a.className = "heart", d.push({ el: a, x: e.clientX - 5, y: e.clientY - 5, scale: 1, alpha: 1, color: s() }), t.body.appendChild(a) } function c(e) { var a = t.createElement("style"); a.type = "text/css"; try { a.appendChild(t.createTextNode(e)) } catch (t) { a.styleSheet.cssText = e } t.getElementsByTagName("head")[0].appendChild(a) } function s() { return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")" } var d = []; e.requestAnimationFrame = function () { return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) { setTimeout(e, 1e3 / 60) } }(), n() }(window, document);
</script>
 -->
 
<script>
  // è¿›åº¦æ¡åŠ è½½: nprogress
  NProgress.start()
  NProgress.done()
</script>

<script type="text/javascript" defer>
  $(document).ready(function () {
    $.goup({
      trigger: 100,
      bottomOffset: 50,
      locationOffset: 50,
      title: '0%',
      titleAsText: true
    });
    $(".goup-container").css("background", "#64dcf0 none repeat scroll 0% 0%").css("opacity", 0.9);
    $(".goup-text").css("font-weight", 600).css("opacity", 0.9);
  });

  $(document).scroll(function () {
    var d_h = $(document).height();
    var c_h = $(window).height();
    var c_t_h = $(window).scrollTop();
    var schedule = c_t_h / (d_h - c_h - 0.5);
    var str = Number(schedule * 100).toFixed();
    str += "%";
    $(".goup-text").text(str);
  });
</script>

<!-- ç«™å†…é€šçŸ¥ -->
<script src="/js/notification.js"></script>
<script>
  'use strict';

  (function () {
    $(function () {
      $('.position').click(function (event) {
        var el = $(event.target);
        $('.position').removeClass('selected');
        el.addClass('selected');
        position = el.attr('data-position');
      });
    });
  });

  var position = 2;
  // å…³é—­ç™¾æ¯«ç§’æ•°
  var closeTime = 50;
  var notifyFunc = function () {
    // Notification.create(
    //   //Â Title
    //   "Tencentå†…æ¨ä¸­ğŸ“§",
    //   //Â Text
    //   "ç®€å†æŠ•é€’å¤„ï¼š<BR/><a href='/hiring/'>ç®€å†æŠ•é€’</a>",
    //   //Â Illustration
    //   "/images/avatar4.jpg",
    //   //Â Effect
    //   'fadeInRight',
    //   //Â PositionÂ 1, 2,Â 3,Â 4
    //   position,
    //   closeTime
    // );
    // setTimeout(() => {
    //   Notification.create(
    //     "èµ„æºä¸‹è½½âš¡",
    //     "ä¼ é€é—¨ï¼š<BR/><a href='/sharing/'>æ–‡ä»¶åˆ†äº«</a>",
    //     "/images/avatar4.jpg",
    //     'fadeInRight',
    //     position,
    //     closeTime
    //   )
    // }, 350);
    setTimeout(() => {
      Notification.create(
        "RSSè®¢é˜…ğŸ“¢",
        "ä¼ é€é—¨ï¼š<BR/><a href='/atom.xml'>RSSè®¢é˜…</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 0);
    setTimeout(() => {
        Notification.create(
        "åœ¨çº¿ç¾¤èŠğŸ’­",
        "ä¼ é€é—¨ï¼š<BR/><a href='/chat/'>ç•…æ‰€æ¬²è¨€</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 350);
    setTimeout(() => {
        Notification.create(
        // "è·‘æ­¥å¥èº«ğŸƒ",
        // "ä¼ é€é—¨ï¼š<BR/><a href='/running/'>è·‘æ­¥å¥èº«</a>",
        "æ‘„å½±åˆ†äº«ğŸ“·",
        "ä¼ é€é—¨ï¼š<BR/><a href='http://159.75.131.252:32352/'>æ‘„å½±åˆ†äº«</a>",
        "/images/avatar4.jpg",
        'fadeInRight',
        position,
        closeTime
      )
    }, 700);
  };

  (function once() {
    if (sessionStorage.getItem('load') == null) {
      notifyFunc();
      sessionStorage.setItem('load', false);
    } else {
      return;
    }
  })();
</script>
<script>
  $(document).on("click", ".dismiss", function (e) {
    Notification.hide(e.currentTarget.classList[1].split('-')[1]);
  })
</script>

</html>